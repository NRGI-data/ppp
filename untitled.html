<!DOCTYPE html PUBLIC \"-//W3C//DTD XHTML 1.0 Strict//EN\" \"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd\">\n<html xmlns=\"http://www.w3.org/1999/xhtml\" xml:lang=\"en\" lang=\"en\">\n<head>\n <title>Server Error</title>\n\n<script type=\"text/javascript\">\n  debug_base = 'http://boot2docker:5462/_debug';\n  debug_count = 1431466927;\n</script>\n\n<!-- CSS Imports -->\n<link rel=\"stylesheet\" href=\"http://boot2docker:5462/_debug/media/traceback.css\" type=\"text/css\" media=\"screen\" />\n<!-- Pygments highlighting -->\n<style type=\"text/css\">\n.highlight .hll { background-color: #ffffcc }\n.highlight  { background: #f8f8f8; }\n.highlight .c { color: #408080; font-style: italic } /* Comment */\n.highlight .err { border: 1px solid #FF0000 } /* Error */\n.highlight .k { color: #008000; font-weight: bold } /* Keyword */\n.highlight .o { color: #666666 } /* Operator */\n.highlight .cm { color: #408080; font-style: italic } /* Comment.Multiline */\n.highlight .cp { color: #BC7A00 } /* Comment.Preproc */\n.highlight .c1 { color: #408080; font-style: italic } /* Comment.Single */\n.highlight .cs { color: #408080; font-style: italic } /* Comment.Special */\n.highlight .gd { color: #A00000 } /* Generic.Deleted */\n.highlight .ge { font-style: italic } /* Generic.Emph */\n.highlight .gr { color: #FF0000 } /* Generic.Error */\n.highlight .gh { color: #000080; font-weight: bold } /* Generic.Heading */\n.highlight .gi { color: #00A000 } /* Generic.Inserted */\n.highlight .go { color: #888888 } /* Generic.Output */\n.highlight .gp { color: #000080; font-weight: bold } /* Generic.Prompt */\n.highlight .gs { font-weight: bold } /* Generic.Strong */\n.highlight .gu { color: #800080; font-weight: bold } /* Generic.Subheading */\n.highlight .gt { color: #0044DD } /* Generic.Traceback */\n.highlight .kc { color: #008000; font-weight: bold } /* Keyword.Constant */\n.highlight .kd { color: #008000; font-weight: bold } /* Keyword.Declaration */\n.highlight .kn { color: #008000; font-weight: bold } /* Keyword.Namespace */\n.highlight .kp { color: #008000 } /* Keyword.Pseudo */\n.highlight .kr { color: #008000; font-weight: bold } /* Keyword.Reserved */\n.highlight .kt { color: #B00040 } /* Keyword.Type */\n.highlight .m { color: #666666 } /* Literal.Number */\n.highlight .s { color: #BA2121 } /* Literal.String */\n.highlight .na { color: #7D9029 } /* Name.Attribute */\n.highlight .nb { color: #008000 } /* Name.Builtin */\n.highlight .nc { color: #0000FF; font-weight: bold } /* Name.Class */\n.highlight .no { color: #880000 } /* Name.Constant */\n.highlight .nd { color: #AA22FF } /* Name.Decorator */\n.highlight .ni { color: #999999; font-weight: bold } /* Name.Entity */\n.highlight .ne { color: #D2413A; font-weight: bold } /* Name.Exception */\n.highlight .nf { color: #0000FF } /* Name.Function */\n.highlight .nl { color: #A0A000 } /* Name.Label */\n.highlight .nn { color: #0000FF; font-weight: bold } /* Name.Namespace */\n.highlight .nt { color: #008000; font-weight: bold } /* Name.Tag */\n.highlight .nv { color: #19177C } /* Name.Variable */\n.highlight .ow { color: #AA22FF; font-weight: bold } /* Operator.Word */\n.highlight .w { color: #bbbbbb } /* Text.Whitespace */\n.highlight .mf { color: #666666 } /* Literal.Number.Float */\n.highlight .mh { color: #666666 } /* Literal.Number.Hex */\n.highlight .mi { color: #666666 } /* Literal.Number.Integer */\n.highlight .mo { color: #666666 } /* Literal.Number.Oct */\n.highlight .sb { color: #BA2121 } /* Literal.String.Backtick */\n.highlight .sc { color: #BA2121 } /* Literal.String.Char */\n.highlight .sd { color: #BA2121; font-style: italic } /* Literal.String.Doc */\n.highlight .s2 { color: #BA2121 } /* Literal.String.Double */\n.highlight .se { color: #BB6622; font-weight: bold } /* Literal.String.Escape */\n.highlight .sh { color: #BA2121 } /* Literal.String.Heredoc */\n.highlight .si { color: #BB6688; font-weight: bold } /* Literal.String.Interpol */\n.highlight .sx { color: #008000 } /* Literal.String.Other */\n.highlight .sr { color: #BB6688 } /* Literal.String.Regex */\n.highlight .s1 { color: #BA2121 } /* Literal.String.Single */\n.highlight .ss { color: #19177C } /* Literal.String.Symbol */\n.highlight .bp { color: #008000 } /* Name.Builtin.Pseudo */\n.highlight .vc { color: #19177C } /* Name.Variable.Class */\n.highlight .vg { color: #19177C } /* Name.Variable.Global */\n.highlight .vi { color: #19177C } /* Name.Variable.Instance */\n.highlight .il { color: #666666 } /* Literal.Number.Integer.Long */\n</style>\n\n<link rel=\"stylesheet\" href=\"http://boot2docker:5462/_debug/media/pylons/style/itraceback.css\" type=\"text/css\" media=\"screen\" />\n\n</head>\n\n<body id=\"documentation\" onload=\"switch_display('traceback_data')\">\n<!-- We are only using a table to ensure old browsers see the message correctly -->\n\n<noscript>\n<div style=\"border-bottom: 1px solid #808080\">\n<div style=\"border-bottom: 1px solid #404040\">\n<table width=\"100%\" border=\"0\" cellpadding=\"0\" bgcolor=\"#FFFFE1\"><tr><td>&nbsp;</td><td><span style=\"padding: 0px; margin: 0px; font-family: Tahoma, sans-serif; font-size: 11px\">Warning, your browser does not support JavaScript so you will not be able to use the interactive debugging on this page.</span></td></tr></table>\n</div>\n</div>\n</noscript>\n\n    <!-- Top anchor -->\n    <a name=\"top\"></a>\n\n    <!-- Main Content -->\n    <div id=\"nav-bar\">\n\n        <!-- Section Navigation -->\n        <h4 class=\"invisible\">Section Links</h4>\n\n            <ul id=\"navlist\">\n               <!--   -->\n               <li id=\"source_data_tab\"><a href=\"#source_data\" onclick=\"javascript:return switch_display('source_data');\" accesskey=\"4\" id=\"source_data_link\">Source</a></li>\n               <li id=\"template_data_tab\"><a href=\"#template_data\" onclick=\"javascript:return switch_display('template_data');\" accesskey=\"3\" id=\"template_data_link\">Template</a></li>\n               <li id=\"extra_data_tab\"><a href=\"#extra_data\" onclick=\"javascript:return switch_display('extra_data');\" id=\"extra_data_link\" accesskey=\"2\" >Extra Data</a></li>\n               <li id=\"traceback_data_tab\" class=\"active\"><a href=\"#traceback_data\" onclick=\"javascript:return switch_display('traceback_data');\" id=\"traceback_data_link\" class=\"active\" accesskey=\"1\">Traceback</a></li>\n            </ul>\n    </div>\n    <div id=\"main-content\">\n        <div class=\"hr\"><hr class=\"hr\" /></div>\n        <div class=\"content-padding\">\n            <div id=\"source_data\" class=\"hidden-data\">\n              There is no source code to display. Click a 'view' link in the <a href=\"#traceback_data\" onclick=\"javascript:switch_display('traceback_data')\" id=\"traceback_data_link\" class=\"active\" accesskey=\"1\">Traceback</a> tab to load source code.\n            </div>\n            <div id=\"extra_data\" class=\"hidden-data\">\n                <h1 class=\"first\"><a name=\"content\"></a>Extra Data</h1>\n                <table class=\"variables\">\n<tr class=\"header\"><th colspan=\"2\">CGI Variables</th></tr>\n<tr class=\"odd\"><td>CKAN_CURRENT_URL</td>\n<td><tt>'/api/3/action/datastore_upsert'</tt></td></tr>\n<tr class=\"even\"><td>CKAN_LANG</td>\n<td><tt>'en'</tt></td></tr>\n<tr class=\"odd\"><td>CKAN_LANG_IS_DEFAULT</td>\n<td><tt>True</tt></td></tr>\n<tr class=\"even\"><td>CONTENT_LENGTH</td>\n<td><tt>'350807'</tt></td></tr>\n<tr class=\"odd\"><td>CONTENT_TYPE</td>\n<td><tt>'application/json; charset=utf-8'</tt></td></tr>\n<tr class=\"even\"><td>HTTP_ACCEPT</td>\n<td><tt>'application/json'</tt></td></tr>\n<tr class=\"odd\"><td>HTTP_CONNECTION</td>\n<td><tt>'keep-alive'</tt></td></tr>\n<tr class=\"even\"><td>HTTP_HOST</td>\n<td><tt>'boot2docker:5462'</tt></td></tr>\n<tr class=\"odd\"><td>HTTP_X_CKAN_API_KEY</td>\n<td><tt>'ea8de489-11f3-4c30-afaf-480e3fafd422'</tt></td></tr>\n<tr class=\"even\"><td>PATH_INFO</td>\n<td><tt>'/api/3/action/datastore_upsert'</tt></td></tr>\n<tr class=\"odd\"><td>REMOTE_ADDR</td>\n<td><tt>'192.168.59.3'</tt></td></tr>\n<tr class=\"even\"><td>REQUEST_METHOD</td>\n<td><tt>'POST'</tt></td></tr>\n<tr class=\"odd\"><td>SERVER_NAME</td>\n<td><tt>'0.0.0.0'</tt></td></tr>\n<tr class=\"even\"><td>SERVER_PORT</td>\n<td><tt>'5000'</tt></td></tr>\n<tr class=\"odd\"><td>SERVER_PROTOCOL</td>\n<td><tt>'HTTP/1.1'</tt></td></tr>\n</table>\n                <h1 class=\"first\"><a name=\"content\"></a>Extra Data</h1>\n                <table class=\"variables\">\n<tr class=\"header\"><th colspan=\"2\">WSGI Variables</th></tr>\n<tr class=\"odd\"><td>application</td>\n<td><tt>&lt;fanstatic.publisher.Delegator object at 0x7fbcf38f1a50&gt;</tt></td></tr>\n<tr class=\"even\"><td>beaker.cache</td>\n<td><tt>&lt;beaker.cache.CacheManager object at 0x7fbcf38f1810&gt;</tt></td></tr>\n<tr class=\"odd\"><td>beaker.get_session</td>\n<td><tt>&lt;bound method SessionMiddleware._get_session of &lt;beaker.middleware.SessionMiddleware object at 0x7fbcf37a7ad0&gt;&gt;</tt></td></tr>\n<tr class=\"even\"><td>beaker.session</td>\n<td><tt>{'_accessed_time': 1431469734.502756, '_creation_time': 1431469734.502756}</tt></td></tr>\n<tr class=\"odd\"><td>fanstatic.needed</td>\n<td><tt>&lt;fanstatic.core.NeededResources object at 0x7fbcd95db590&gt;</tt></td></tr>\n<tr class=\"even\"><td>paste.cookies</td>\n<td><tt>(&lt;SimpleCookie: &gt;, '')</tt></td></tr>\n<tr class=\"odd\"><td>paste.evalexception</td>\n<td><tt>&lt;weberror.evalexception.EvalException object at 0x7fbcf38f1850&gt;</tt></td></tr>\n<tr class=\"even\"><td>paste.evalexception.debug_count</td>\n<td><tt>1431466927</tt></td></tr>\n<tr class=\"odd\"><td>paste.httpserver.thread_pool</td>\n<td><tt>&lt;paste.httpserver.ThreadPool object at 0x7fbd00a72f90&gt;</tt></td></tr>\n<tr class=\"even\"><td>paste.registry</td>\n<td><tt>&lt;paste.registry.Registry object at 0x7fbcf37a7b90&gt;</tt></td></tr>\n<tr class=\"odd\"><td>paste.throw_errors</td>\n<td><tt>True</tt></td></tr>\n<tr class=\"even\"><td>pylons.action_method</td>\n<td><tt>&lt;bound method ApiController.action of &lt;ckan.controllers.api.ApiController object at 0x7fbcd8d40c10&gt;&gt;</tt></td></tr>\n<tr class=\"odd\"><td>pylons.controller</td>\n<td><tt>&lt;ckan.controllers.api.ApiController object at 0x7fbcd8d40c10&gt;</tt></td></tr>\n<tr class=\"even\"><td>pylons.environ_config</td>\n<td><tt>{'session': 'beaker.session', 'cache': 'beaker.cache'}</tt></td></tr>\n<tr class=\"odd\"><td>pylons.pylons</td>\n<td><tt>&lt;pylons.util.PylonsContext object at 0x7fbcd8d40650&gt;</tt></td></tr>\n<tr class=\"even\"><td>pylons.routes_dict</td>\n<td><tt>{'action': u'action', 'controller': u'api', 'ver': 3, 'logic_function': u'datastore_upsert'}</tt></td></tr>\n<tr class=\"odd\"><td>pylons.status_code_redirect</td>\n<td><tt>True</tt></td></tr>\n<tr class=\"even\"><td>repoze.who.api</td>\n<td><tt>&lt;repoze.who.api.API object at 0x7fbcf37a7bd0&gt;</tt></td></tr>\n<tr class=\"odd\"><td>repoze.who.logger</td>\n<td><tt>&lt;logging.Logger object at 0x7fbcf38d2690&gt;</tt></td></tr>\n<tr class=\"even\"><td>repoze.who.plugins</td>\n<td><tt>{'ckan.lib.authenticator:UsernamePasswordAuthenticator': &lt;ckan.lib.authenticator.UsernamePasswordAuthenticator object at 0x7fbcf38c7d90&gt;, 'friendlyform': &lt;FriendlyFormPlugin 140449516647760&gt;, 'auth_tkt': &lt;CkanAuthTktCookiePlugin 140449516647696&gt;}</tt></td></tr>\n<tr class=\"odd\"><td>routes.route</td>\n<td><tt>&lt;routes.route.Route object at 0x7fbcf3996d50&gt;</tt></td></tr>\n<tr class=\"even\"><td>routes.url</td>\n<td><tt>&lt;routes.util.URLGenerator object at 0x7fbcf0650e10&gt;</tt></td></tr>\n<tr class=\"odd\"><td>weberror.evalexception</td>\n<td><tt>&lt;weberror.evalexception.EvalException object at 0x7fbcf38f1850&gt;</tt></td></tr>\n<tr class=\"even\"><td>webob._parsed_query_vars</td>\n<td><tt>(GET([]), '')</tt></td></tr>\n<tr class=\"odd\"><td>webob.adhoc_attrs</td>\n<td><tt>{'response': &lt;Response at 0x7fbcd95dbb10 200 OK&gt;, 'language': 'en-us'}</tt></td></tr>\n<tr class=\"even\"><td>webob.is_body_seekable</td>\n<td><tt>True</tt></td></tr>\n<tr class=\"odd\"><td>wsgi process</td>\n<td><tt>'Multithreaded'</tt></td></tr>\n<tr class=\"even\"><td>wsgiorg.routing_args</td>\n<td><tt>(&lt;routes.util.URLGenerator object at 0x7fbcf0650e10&gt;, {'action': u'action', 'controller': u'api', 'ver': 3, 'logic_function': u'datastore_upsert'})</tt></td></tr>\n</table>\n            </div>\n            <div id=\"template_data\" class=\"hidden-data\">\n                <p>No Template information available.</p>\n            </div>\n            <div id=\"traceback_data\">\n<div style=\"float: left; width: 100%; padding-bottom: 20px;\">\n<h1 class=\"first\"><a name=\"content\"></a>WebError Traceback:</h1>\n<div class=\"main-exception-bar\">\n  <span class=\"main-exception\" style=\"color: #f00;\">&#8669;</span>\n  <code class=\"main-exception\">InvalidDataError: The data was invalid (for example: a numeric value is out of range or was inserted into a text field).</code>\n</div>\n<div id=\"formats\">\n   <span class=\"title\">View as: &nbsp;</span> <a id=\"view_short_html\" class=\"active\" href=\"#\">Interactive</a> \n   <a id=\"view_long_html\" href=\"#\">(full)</a> &nbsp;|&nbsp; <a id=\"view_short_text\" href=\"#\">Text</a>  \n   <a id=\"view_long_text\" href=\"#\">(full)</a> &nbsp;|&nbsp; <a id=\"view_short_xml\" href=\"#\">XML</a> \n   <a id=\"view_long_xml\" href=\"#\">(full)</a>\n</div>  \n<div style=\"clear: both;\">\n<div id=\"error-area\" style=\"display: none; background-color: #600; color: #fff; border: 2px solid black\">\n<button onclick=\"return clearError()\">clear this</button>\n<div id=\"error-container\"></div>\n<button onclick=\"return clearError()\">clear this</button>\n</div>\n\n    <div id=\"short_traceback\">\n    <div class=\"frame\">\nModule <span class=\"module\" title=\"/project/ckan/ckan/controllers/api.py\">ckan.controllers.api</span>:<b>197</b> in <code>action</code>  <a href=\"#\" class=\"show_locals\" tbid=\"140449073848904\" onClick=\"return showFrame(this)\">&nbsp; &nbsp; <img src=\"http://boot2docker:5462/_debug/media/plus.jpg\" border=0 width=9 height=9> &nbsp; &nbsp;</a> <a href=\"#\" class=\"\" location=\"ckan.controllers.api:197\" onClick=\"return showSource(this)\">view</a><br>\n<div style=\"display: none\" class=\"source highlight\" source-type=\"long\"><a class=\"switch_source\" onclick=\"return switch_source(this, 'long')\" href=\"#\">&lt;&lt;&nbsp; </a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class=\"k\">del</span> <span class=\"n\">request_data</span><span class=\"p\">[</span><span class=\"s\">&#39;callback&#39;</span><span class=\"p\">]</span><br>\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class=\"k\">try</span><span class=\"p\">:</span><br>\n<span class=\"source-highlight\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class=\"n\">result</span> <span class=\"o\">=</span> <span class=\"n\">function</span><span class=\"p\">(</span><span class=\"n\">context</span><span class=\"p\">,</span> <span class=\"n\">request_data</span><span class=\"p\">)</span></span><br>\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class=\"n\">return_dict</span><span class=\"p\">[</span><span class=\"s\">&#39;success&#39;</span><span class=\"p\">]</span> <span class=\"o\">=</span> <span class=\"bp\">True</span><br>\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class=\"n\">return_dict</span><span class=\"p\">[</span><span class=\"s\">&#39;result&#39;</span><span class=\"p\">]</span> <span class=\"o\">=</span> <span class=\"n\">result</span></div><div class=\"source highlight\" source-type=\"short\"><a onclick=\"return switch_source(this, 'short')\" class=\"switch_source\" href=\"#\">&gt;&gt;&nbsp; </a><span class=\"n\">result</span> <span class=\"o\">=</span> <span class=\"n\">function</span><span class=\"p\">(</span><span class=\"n\">context</span><span class=\"p\">,</span> <span class=\"n\">request_data</span><span class=\"p\">)</span></div>\n</div>\n<div class=\"frame\">\nModule <span class=\"module\" title=\"/project/ckan/ckan/logic/__init__.py\">ckan.logic</span>:<b>424</b> in <code>wrapped</code>  <a href=\"#\" class=\"show_locals\" tbid=\"140449073848688\" onClick=\"return showFrame(this)\">&nbsp; &nbsp; <img src=\"http://boot2docker:5462/_debug/media/plus.jpg\" border=0 width=9 height=9> &nbsp; &nbsp;</a> <a href=\"#\" class=\"\" location=\"ckan.logic:424\" onClick=\"return showSource(this)\">view</a><br>\n<div style=\"display: none\" class=\"source highlight\" source-type=\"long\"><a class=\"switch_source\" onclick=\"return switch_source(this, 'long')\" href=\"#\">&lt;&lt;&nbsp; </a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class=\"c\"># check_access(action_name, context, data_dict=None)</span><br>\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class=\"n\">result</span> <span class=\"o\">=</span> <span class=\"n\">_action</span><span class=\"p\">(</span><span class=\"n\">context</span><span class=\"p\">,</span> <span class=\"n\">data_dict</span><span class=\"p\">,</span> <span class=\"o\">**</span><span class=\"n\">kw</span><span class=\"p\">)</span><br>\n<span class=\"source-highlight\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class=\"k\">try</span><span class=\"p\">:</span></span><br>\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class=\"n\">audit</span> <span class=\"o\">=</span> <span class=\"n\">context</span><span class=\"p\">[</span><span class=\"s\">&#39;__auth_audit&#39;</span><span class=\"p\">][</span><span class=\"o\">-</span><span class=\"mi\">1</span><span class=\"p\">]</span></div><div class=\"source highlight\" source-type=\"short\"><a onclick=\"return switch_source(this, 'short')\" class=\"switch_source\" href=\"#\">&gt;&gt;&nbsp; </a><span class=\"n\">result</span> <span class=\"o\">=</span> <span class=\"n\">_action</span><span class=\"p\">(</span><span class=\"n\">context</span><span class=\"p\">,</span> <span class=\"n\">data_dict</span><span class=\"p\">,</span> <span class=\"o\">**</span><span class=\"n\">kw</span><span class=\"p\">)</span></div>\n</div>\n<div class=\"frame\">\nModule <span class=\"module\" title=\"/project/ckan/ckanext/datastore/logic/action.py\">ckanext.datastore.logic.action</span>:<b>212</b> in <code>datastore_upsert</code>  <a href=\"#\" class=\"show_locals\" tbid=\"140449073852000\" onClick=\"return showFrame(this)\">&nbsp; &nbsp; <img src=\"http://boot2docker:5462/_debug/media/plus.jpg\" border=0 width=9 height=9> &nbsp; &nbsp;</a> <a href=\"#\" class=\"\" location=\"ckanext.datastore.logic.action:212\" onClick=\"return showSource(this)\">view</a><br>\n<div style=\"display: none\" class=\"source highlight\" source-type=\"long\"><a class=\"switch_source\" onclick=\"return switch_source(this, 'long')\" href=\"#\">&lt;&lt;&nbsp; </a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class=\"p\">))</span><br>\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>\n<span class=\"source-highlight\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class=\"n\">result</span> <span class=\"o\">=</span> <span class=\"n\">db</span><span class=\"o\">.</span><span class=\"n\">upsert</span><span class=\"p\">(</span><span class=\"n\">context</span><span class=\"p\">,</span> <span class=\"n\">data_dict</span><span class=\"p\">)</span></span><br>\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class=\"n\">result</span><span class=\"o\">.</span><span class=\"n\">pop</span><span class=\"p\">(</span><span class=\"s\">&#39;id&#39;</span><span class=\"p\">,</span> <span class=\"bp\">None</span><span class=\"p\">)</span><br>\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class=\"n\">result</span><span class=\"o\">.</span><span class=\"n\">pop</span><span class=\"p\">(</span><span class=\"s\">&#39;connection_url&#39;</span><span class=\"p\">)</span></div><div class=\"source highlight\" source-type=\"short\"><a onclick=\"return switch_source(this, 'short')\" class=\"switch_source\" href=\"#\">&gt;&gt;&nbsp; </a><span class=\"n\">result</span> <span class=\"o\">=</span> <span class=\"n\">db</span><span class=\"o\">.</span><span class=\"n\">upsert</span><span class=\"p\">(</span><span class=\"n\">context</span><span class=\"p\">,</span> <span class=\"n\">data_dict</span><span class=\"p\">)</span></div>\n</div>\n<div class=\"frame\">\nModule <span class=\"module\" title=\"/project/ckan/ckanext/datastore/db.py\">ckanext.datastore.db</span>:<b>1121</b> in <code>upsert</code>  <a href=\"#\" class=\"show_locals\" tbid=\"140449073849048\" onClick=\"return showFrame(this)\">&nbsp; &nbsp; <img src=\"http://boot2docker:5462/_debug/media/plus.jpg\" border=0 width=9 height=9> &nbsp; &nbsp;</a> <a href=\"#\" class=\"\" location=\"ckanext.datastore.db:1121\" onClick=\"return showSource(this)\">view</a><br>\n<div style=\"display: none\" class=\"source highlight\" source-type=\"long\"><a class=\"switch_source\" onclick=\"return switch_source(this, 'long')\" href=\"#\">&lt;&lt;&nbsp; </a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class=\"n\">context</span><span class=\"p\">[</span><span class=\"s\">&#39;connection&#39;</span><span class=\"p\">]</span><span class=\"o\">.</span><span class=\"n\">execute</span><span class=\"p\">(</span><br>\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class=\"s\">u&#39;SET LOCAL statement_timeout TO {0}&#39;</span><span class=\"o\">.</span><span class=\"n\">format</span><span class=\"p\">(</span><span class=\"n\">timeout</span><span class=\"p\">))</span><br>\n<span class=\"source-highlight\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class=\"n\">upsert_data</span><span class=\"p\">(</span><span class=\"n\">context</span><span class=\"p\">,</span> <span class=\"n\">data_dict</span><span class=\"p\">)</span></span><br>\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class=\"n\">trans</span><span class=\"o\">.</span><span class=\"n\">commit</span><span class=\"p\">()</span><br>\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class=\"k\">return</span> <span class=\"n\">_unrename_json_field</span><span class=\"p\">(</span><span class=\"n\">data_dict</span><span class=\"p\">)</span></div><div class=\"source highlight\" source-type=\"short\"><a onclick=\"return switch_source(this, 'short')\" class=\"switch_source\" href=\"#\">&gt;&gt;&nbsp; </a><span class=\"n\">upsert_data</span><span class=\"p\">(</span><span class=\"n\">context</span><span class=\"p\">,</span> <span class=\"n\">data_dict</span><span class=\"p\">)</span></div>\n</div>\n<div class=\"frame\">\nModule <span class=\"module\" title=\"/project/ckan/ckanext/datastore/db.py\">ckanext.datastore.db</span>:<b>656</b> in <code>upsert_data</code>  <a href=\"#\" class=\"show_locals\" tbid=\"140449073851856\" onClick=\"return showFrame(this)\">&nbsp; &nbsp; <img src=\"http://boot2docker:5462/_debug/media/plus.jpg\" border=0 width=9 height=9> &nbsp; &nbsp;</a> <a href=\"#\" class=\"\" location=\"ckanext.datastore.db:656\" onClick=\"return showSource(this)\">view</a><br>\n<div style=\"display: none\" class=\"source highlight\" source-type=\"long\"><a class=\"switch_source\" onclick=\"return switch_source(this, 'long')\" href=\"#\">&lt;&lt;&nbsp; </a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class=\"k\">except</span> <span class=\"n\">sqlalchemy</span><span class=\"o\">.</span><span class=\"n\">exc</span><span class=\"o\">.</span><span class=\"n\">DataError</span> <span class=\"k\">as</span> <span class=\"n\">err</span><span class=\"p\">:</span><br>\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class=\"k\">raise</span> <span class=\"n\">InvalidDataError</span><span class=\"p\">(</span><br>\n<span class=\"source-highlight\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class=\"n\">toolkit</span><span class=\"o\">.</span><span class=\"n\">_</span><span class=\"p\">(</span><span class=\"s\">&quot;The data was invalid (for example: a numeric value &quot;</span></span><br>\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class=\"s\">&quot;is out of range or was inserted into a text field).&quot;</span><br>\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class=\"p\">))</span></div><div class=\"source highlight\" source-type=\"short\"><a onclick=\"return switch_source(this, 'short')\" class=\"switch_source\" href=\"#\">&gt;&gt;&nbsp; </a><span class=\"n\">toolkit</span><span class=\"o\">.</span><span class=\"n\">_</span><span class=\"p\">(</span><span class=\"s\">&quot;The data was invalid (for example: a numeric value &quot;</span></div>\n</div>\n<b>InvalidDataError: The data was invalid (for example: a numeric value is out of range or was inserted into a text field).</b><br>\n    </div>\n    <div id=\"short_text_version\" class=\"hidden-data\">\n    <textarea style=\"width: 100%\" rows=11 cols=60>File '/project/ckan/ckan/controllers/api.py', line 197 in action\n  result = function(context, request_data)\nFile '/project/ckan/ckan/logic/__init__.py', line 424 in wrapped\n  result = _action(context, data_dict, **kw)\nFile '/project/ckan/ckanext/datastore/logic/action.py', line 212 in datastore_upsert\n  result = db.upsert(context, data_dict)\nFile '/project/ckan/ckanext/datastore/db.py', line 1121 in upsert\n  upsert_data(context, data_dict)\nFile '/project/ckan/ckanext/datastore/db.py', line 656 in upsert_data\n  toolkit._(\"The data was invalid (for example: a numeric value \"\nInvalidDataError: The data was invalid (for example: a numeric value is out of range or was inserted into a text field).</textarea>\n    </div>\n    <div id=\"long_xml_version\" class=\"hidden-data\">\n    <textarea style=\"width: 100%\" rows=50 cols=60>&lt;?xml version=\"1.0\" ?&gt;&lt;traceback&gt;&lt;sysinfo&gt;&lt;language full_version=\"2.7.6 (default, Mar 22 2014, 22:59:56) \n[GCC 4.8.2]\" platform=\"linux2\" version=\"2.7.6\"&gt;Python&lt;/language&gt;&lt;libraries&gt;&lt;library name=\"repoze.lru\" version=\"0.6\"/&gt;&lt;library name=\"mako\" version=\"0.9.0\"/&gt;&lt;library name=\"webhelpers\" version=\"1.3\"/&gt;&lt;library name=\"pylons\" version=\"0.9.7\"/&gt;&lt;library name=\"simplejson\" version=\"3.3.1\"/&gt;&lt;library name=\"weberror\" version=\"0.10.3\"/&gt;&lt;library name=\"webtest\" version=\"1.4.3\"/&gt;&lt;library name=\"markupsafe\" version=\"0.18\"/&gt;&lt;library name=\"pygments\" version=\"1.6\"/&gt;&lt;library name=\"genshi\" version=\"0.6\"/&gt;&lt;library name=\"sqlalchemy\" version=\"0.9.6\"/&gt;&lt;library name=\"paste\" version=\"1.7.5.1\"/&gt;&lt;library name=\"decorator\" version=\"3.4.0\"/&gt;&lt;library name=\"beaker\" version=\"1.6.4\"/&gt;&lt;library name=\"formencode\" version=\"1.2.6\"/&gt;&lt;library name=\"pastedeploy\" version=\"1.5.0\"/&gt;&lt;library name=\"tempita\" version=\"0.5.2\"/&gt;&lt;library name=\"nose\" version=\"1.3.0\"/&gt;&lt;library name=\"routes\" version=\"1.13\"/&gt;&lt;library name=\"webob\" version=\"1.0.8\"/&gt;&lt;library name=\"pastescript\" version=\"1.7.5\"/&gt;&lt;/libraries&gt;&lt;/sysinfo&gt;&lt;stack&gt;&lt;frame&gt;&lt;module&gt;weberror.evalexception&lt;/module&gt;&lt;filename&gt;/usr/lib/ckan/local/lib/python2.7/site-packages/weberror/evalexception.py&lt;/filename&gt;&lt;line&gt;431&lt;/line&gt;&lt;function&gt;respond&lt;/function&gt;&lt;operation&gt;app_iter = self.application(environ, detect_start_response)&lt;/operation&gt;&lt;operation_context&gt;        try:\n            __traceback_supplement__ = errormiddleware.Supplement, self, environ\n            app_iter = self.application(environ, detect_start_response)\n            \n            # Don't create a list from a paste.fileapp object \n&lt;/operation_context&gt;&lt;/frame&gt;&lt;frame&gt;&lt;module&gt;webob.dec&lt;/module&gt;&lt;filename&gt;/usr/lib/ckan/local/lib/python2.7/site-packages/webob/dec.py&lt;/filename&gt;&lt;line&gt;147&lt;/line&gt;&lt;function&gt;__call__&lt;/function&gt;&lt;operation&gt;resp = self.call_func(req, *args, **self.kwargs)&lt;/operation&gt;&lt;operation_context&gt;                if self.middleware_wraps:\n                    args = (self.middleware_wraps,) + args\n                resp = self.call_func(req, *args, **self.kwargs)\n            except webob.exc.HTTPException, resp:\n                pass\n&lt;/operation_context&gt;&lt;/frame&gt;&lt;frame&gt;&lt;module&gt;webob.dec&lt;/module&gt;&lt;filename&gt;/usr/lib/ckan/local/lib/python2.7/site-packages/webob/dec.py&lt;/filename&gt;&lt;line&gt;208&lt;/line&gt;&lt;function&gt;call_func&lt;/function&gt;&lt;operation&gt;return self.func(req, *args, **kwargs)&lt;/operation&gt;&lt;operation_context&gt;        &amp;quot;&amp;quot;&amp;quot;Call the wrapped function; override this in a subclass to\n        change how the function is called.&amp;quot;&amp;quot;&amp;quot;\n        return self.func(req, *args, **kwargs)\n\n    def clone(self, func=None, **kw):\n&lt;/operation_context&gt;&lt;/frame&gt;&lt;frame&gt;&lt;module&gt;fanstatic.publisher&lt;/module&gt;&lt;filename&gt;/usr/lib/ckan/local/lib/python2.7/site-packages/fanstatic/publisher.py&lt;/filename&gt;&lt;line&gt;234&lt;/line&gt;&lt;function&gt;__call__&lt;/function&gt;&lt;operation&gt;return request.get_response(self.app)&lt;/operation&gt;&lt;operation_context&gt;            # the trigger segment is not in the URL, so we delegate\n            # to the original application\n            return request.get_response(self.app)\n        # the trigger is in there, so let whatever is behind the\n        # trigger be handled by the publisher\n&lt;/operation_context&gt;&lt;/frame&gt;&lt;frame&gt;&lt;module&gt;webob.request&lt;/module&gt;&lt;filename&gt;/usr/lib/ckan/local/lib/python2.7/site-packages/webob/request.py&lt;/filename&gt;&lt;line&gt;1053&lt;/line&gt;&lt;function&gt;get_response&lt;/function&gt;&lt;operation&gt;application, catch_exc_info=False)&lt;/operation&gt;&lt;operation_context&gt;        else:\n            status, headers, app_iter = self.call_application(\n                application, catch_exc_info=False)\n        return self.ResponseClass(\n            status=status, headerlist=list(headers), app_iter=app_iter,\n&lt;/operation_context&gt;&lt;/frame&gt;&lt;frame&gt;&lt;module&gt;webob.request&lt;/module&gt;&lt;filename&gt;/usr/lib/ckan/local/lib/python2.7/site-packages/webob/request.py&lt;/filename&gt;&lt;line&gt;1022&lt;/line&gt;&lt;function&gt;call_application&lt;/function&gt;&lt;operation&gt;app_iter = application(self.environ, start_response)&lt;/operation&gt;&lt;operation_context&gt;            captured[:] = [status, headers, exc_info]\n            return output.append\n        app_iter = application(self.environ, start_response)\n        if output or not captured:\n            try:\n&lt;/operation_context&gt;&lt;/frame&gt;&lt;frame&gt;&lt;module&gt;webob.dec&lt;/module&gt;&lt;filename&gt;/usr/lib/ckan/local/lib/python2.7/site-packages/webob/dec.py&lt;/filename&gt;&lt;line&gt;147&lt;/line&gt;&lt;function&gt;__call__&lt;/function&gt;&lt;operation&gt;resp = self.call_func(req, *args, **self.kwargs)&lt;/operation&gt;&lt;operation_context&gt;                if self.middleware_wraps:\n                    args = (self.middleware_wraps,) + args\n                resp = self.call_func(req, *args, **self.kwargs)\n            except webob.exc.HTTPException, resp:\n                pass\n&lt;/operation_context&gt;&lt;/frame&gt;&lt;frame&gt;&lt;module&gt;webob.dec&lt;/module&gt;&lt;filename&gt;/usr/lib/ckan/local/lib/python2.7/site-packages/webob/dec.py&lt;/filename&gt;&lt;line&gt;208&lt;/line&gt;&lt;function&gt;call_func&lt;/function&gt;&lt;operation&gt;return self.func(req, *args, **kwargs)&lt;/operation&gt;&lt;operation_context&gt;        &amp;quot;&amp;quot;&amp;quot;Call the wrapped function; override this in a subclass to\n        change how the function is called.&amp;quot;&amp;quot;&amp;quot;\n        return self.func(req, *args, **kwargs)\n\n    def clone(self, func=None, **kw):\n&lt;/operation_context&gt;&lt;/frame&gt;&lt;frame&gt;&lt;module&gt;fanstatic.injector&lt;/module&gt;&lt;filename&gt;/usr/lib/ckan/local/lib/python2.7/site-packages/fanstatic/injector.py&lt;/filename&gt;&lt;line&gt;54&lt;/line&gt;&lt;function&gt;__call__&lt;/function&gt;&lt;operation&gt;response = request.get_response(self.app)&lt;/operation&gt;&lt;operation_context&gt;\n        # Get the response from the wrapped application:\n        response = request.get_response(self.app)\n\n        # We only continue if the content-type is appropriate.\n&lt;/operation_context&gt;&lt;/frame&gt;&lt;frame&gt;&lt;module&gt;webob.request&lt;/module&gt;&lt;filename&gt;/usr/lib/ckan/local/lib/python2.7/site-packages/webob/request.py&lt;/filename&gt;&lt;line&gt;1053&lt;/line&gt;&lt;function&gt;get_response&lt;/function&gt;&lt;operation&gt;application, catch_exc_info=False)&lt;/operation&gt;&lt;operation_context&gt;        else:\n            status, headers, app_iter = self.call_application(\n                application, catch_exc_info=False)\n        return self.ResponseClass(\n            status=status, headerlist=list(headers), app_iter=app_iter,\n&lt;/operation_context&gt;&lt;/frame&gt;&lt;frame&gt;&lt;module&gt;webob.request&lt;/module&gt;&lt;filename&gt;/usr/lib/ckan/local/lib/python2.7/site-packages/webob/request.py&lt;/filename&gt;&lt;line&gt;1022&lt;/line&gt;&lt;function&gt;call_application&lt;/function&gt;&lt;operation&gt;app_iter = application(self.environ, start_response)&lt;/operation&gt;&lt;operation_context&gt;            captured[:] = [status, headers, exc_info]\n            return output.append\n        app_iter = application(self.environ, start_response)\n        if output or not captured:\n            try:\n&lt;/operation_context&gt;&lt;/frame&gt;&lt;frame&gt;&lt;module&gt;beaker.middleware&lt;/module&gt;&lt;filename&gt;/usr/lib/ckan/local/lib/python2.7/site-packages/beaker/middleware.py&lt;/filename&gt;&lt;line&gt;73&lt;/line&gt;&lt;function&gt;__call__&lt;/function&gt;&lt;operation&gt;return self.app(environ, start_response)&lt;/operation&gt;&lt;operation_context&gt;                                                   self.cache_manager)\n        environ[self.environ_key] = self.cache_manager\n        return self.app(environ, start_response)\n\n\n&lt;/operation_context&gt;&lt;/frame&gt;&lt;frame&gt;&lt;module&gt;beaker.middleware&lt;/module&gt;&lt;filename&gt;/usr/lib/ckan/local/lib/python2.7/site-packages/beaker/middleware.py&lt;/filename&gt;&lt;line&gt;155&lt;/line&gt;&lt;function&gt;__call__&lt;/function&gt;&lt;operation&gt;return self.wrap_app(environ, session_start_response)&lt;/operation&gt;&lt;operation_context&gt;                        headers.append(('Set-cookie', cookie))\n            return start_response(status, headers, exc_info)\n        return self.wrap_app(environ, session_start_response)\n\n    def _get_session(self):\n&lt;/operation_context&gt;&lt;/frame&gt;&lt;frame&gt;&lt;module&gt;routes.middleware&lt;/module&gt;&lt;filename&gt;/usr/lib/ckan/local/lib/python2.7/site-packages/routes/middleware.py&lt;/filename&gt;&lt;line&gt;131&lt;/line&gt;&lt;function&gt;__call__&lt;/function&gt;&lt;operation&gt;response = self.app(environ, start_response)&lt;/operation&gt;&lt;operation_context&gt;                                             r'\\1', oldpath)\n        \n        response = self.app(environ, start_response)\n        \n        # Wrapped in try as in rare cases the attribute will be gone already\n&lt;/operation_context&gt;&lt;/frame&gt;&lt;frame&gt;&lt;module&gt;pylons.wsgiapp&lt;/module&gt;&lt;filename&gt;/usr/lib/ckan/local/lib/python2.7/site-packages/pylons/wsgiapp.py&lt;/filename&gt;&lt;line&gt;125&lt;/line&gt;&lt;function&gt;__call__&lt;/function&gt;&lt;operation&gt;response = self.dispatch(controller, environ, start_response)&lt;/operation&gt;&lt;operation_context&gt;        \n        controller = self.resolve(environ, start_response)\n        response = self.dispatch(controller, environ, start_response)\n        \n        if 'paste.testing_variables' in environ and hasattr(response,\n&lt;/operation_context&gt;&lt;/frame&gt;&lt;frame&gt;&lt;module&gt;pylons.wsgiapp&lt;/module&gt;&lt;filename&gt;/usr/lib/ckan/local/lib/python2.7/site-packages/pylons/wsgiapp.py&lt;/filename&gt;&lt;line&gt;324&lt;/line&gt;&lt;function&gt;dispatch&lt;/function&gt;&lt;operation&gt;return controller(environ, start_response)&lt;/operation&gt;&lt;operation_context&gt;        if log_debug:\n            log.debug(&amp;quot;Calling controller class with WSGI interface&amp;quot;)\n        return controller(environ, start_response)\n    \n    def load_test_env(self, environ):\n&lt;/operation_context&gt;&lt;/frame&gt;&lt;frame&gt;&lt;module&gt;ckan.controllers.api&lt;/module&gt;&lt;filename&gt;/project/ckan/ckan/controllers/api.py&lt;/filename&gt;&lt;line&gt;70&lt;/line&gt;&lt;function&gt;__call__&lt;/function&gt;&lt;operation&gt;return base.BaseController.__call__(self, environ, start_response)&lt;/operation&gt;&lt;operation_context&gt;        # avoid status_code_redirect intercepting error responses\n        environ['pylons.status_code_redirect'] = True\n        return base.BaseController.__call__(self, environ, start_response)\n\n    def _finish(self, status_int, response_data=None,\n&lt;/operation_context&gt;&lt;/frame&gt;&lt;frame&gt;&lt;module&gt;ckan.lib.base&lt;/module&gt;&lt;filename&gt;/project/ckan/ckan/lib/base.py&lt;/filename&gt;&lt;line&gt;338&lt;/line&gt;&lt;function&gt;__call__&lt;/function&gt;&lt;operation&gt;res = WSGIController.__call__(self, environ, start_response)&lt;/operation&gt;&lt;operation_context&gt;\n        try:\n            res = WSGIController.__call__(self, environ, start_response)\n        finally:\n            model.Session.remove()\n&lt;/operation_context&gt;&lt;/frame&gt;&lt;frame&gt;&lt;module&gt;pylons.controllers.core&lt;/module&gt;&lt;filename&gt;/usr/lib/ckan/local/lib/python2.7/site-packages/pylons/controllers/core.py&lt;/filename&gt;&lt;line&gt;221&lt;/line&gt;&lt;function&gt;__call__&lt;/function&gt;&lt;operation&gt;response = self._dispatch_call()&lt;/operation&gt;&lt;operation_context&gt;                return response(environ, self.start_response)\n        \n        response = self._dispatch_call()\n        if not start_response_called:\n            self.start_response = start_response\n&lt;/operation_context&gt;&lt;/frame&gt;&lt;frame&gt;&lt;module&gt;pylons.controllers.core&lt;/module&gt;&lt;filename&gt;/usr/lib/ckan/local/lib/python2.7/site-packages/pylons/controllers/core.py&lt;/filename&gt;&lt;line&gt;172&lt;/line&gt;&lt;function&gt;_dispatch_call&lt;/function&gt;&lt;operation&gt;response = self._inspect_call(func)&lt;/operation&gt;&lt;operation_context&gt;            req.environ['pylons.action_method'] = func\n            \n            response = self._inspect_call(func)\n        else:\n            if log_debug:\n&lt;/operation_context&gt;&lt;/frame&gt;&lt;frame&gt;&lt;module&gt;pylons.controllers.core&lt;/module&gt;&lt;filename&gt;/usr/lib/ckan/local/lib/python2.7/site-packages/pylons/controllers/core.py&lt;/filename&gt;&lt;line&gt;107&lt;/line&gt;&lt;function&gt;_inspect_call&lt;/function&gt;&lt;operation&gt;result = self._perform_call(func, args)&lt;/operation&gt;&lt;operation_context&gt;                      func.__name__, args)\n        try:\n            result = self._perform_call(func, args)\n        except HTTPException, httpe:\n            if log_debug:\n&lt;/operation_context&gt;&lt;/frame&gt;&lt;frame&gt;&lt;module&gt;pylons.controllers.core&lt;/module&gt;&lt;filename&gt;/usr/lib/ckan/local/lib/python2.7/site-packages/pylons/controllers/core.py&lt;/filename&gt;&lt;line&gt;60&lt;/line&gt;&lt;function&gt;_perform_call&lt;/function&gt;&lt;operation&gt;return func(**args)&lt;/operation&gt;&lt;operation_context&gt;        &amp;quot;&amp;quot;&amp;quot;Hide the traceback for everything above this method&amp;quot;&amp;quot;&amp;quot;\n        __traceback_hide__ = 'before_and_this'\n        return func(**args)\n    \n    def _inspect_call(self, func):\n&lt;/operation_context&gt;&lt;/frame&gt;&lt;frame&gt;&lt;module&gt;ckan.controllers.api&lt;/module&gt;&lt;filename&gt;/project/ckan/ckan/controllers/api.py&lt;/filename&gt;&lt;line&gt;197&lt;/line&gt;&lt;function&gt;action&lt;/function&gt;&lt;operation&gt;result = function(context, request_data)&lt;/operation&gt;&lt;operation_context&gt;            del request_data['callback']\n        try:\n            result = function(context, request_data)\n            return_dict['success'] = True\n            return_dict['result'] = result\n&lt;/operation_context&gt;&lt;/frame&gt;&lt;frame&gt;&lt;module&gt;ckan.logic&lt;/module&gt;&lt;filename&gt;/project/ckan/ckan/logic/__init__.py&lt;/filename&gt;&lt;line&gt;424&lt;/line&gt;&lt;function&gt;wrapped&lt;/function&gt;&lt;operation&gt;result = _action(context, data_dict, **kw)&lt;/operation&gt;&lt;operation_context&gt;\n                # check_access(action_name, context, data_dict=None)\n                result = _action(context, data_dict, **kw)\n                try:\n                    audit = context['__auth_audit'][-1]\n&lt;/operation_context&gt;&lt;/frame&gt;&lt;frame&gt;&lt;module&gt;ckanext.datastore.logic.action&lt;/module&gt;&lt;filename&gt;/project/ckan/ckanext/datastore/logic/action.py&lt;/filename&gt;&lt;line&gt;212&lt;/line&gt;&lt;function&gt;datastore_upsert&lt;/function&gt;&lt;operation&gt;result = db.upsert(context, data_dict)&lt;/operation&gt;&lt;operation_context&gt;        ))\n\n    result = db.upsert(context, data_dict)\n    result.pop('id', None)\n    result.pop('connection_url')\n&lt;/operation_context&gt;&lt;/frame&gt;&lt;frame&gt;&lt;module&gt;ckanext.datastore.db&lt;/module&gt;&lt;filename&gt;/project/ckan/ckanext/datastore/db.py&lt;/filename&gt;&lt;line&gt;1121&lt;/line&gt;&lt;function&gt;upsert&lt;/function&gt;&lt;operation&gt;upsert_data(context, data_dict)&lt;/operation&gt;&lt;operation_context&gt;        context['connection'].execute(\n            u'SET LOCAL statement_timeout TO {0}'.format(timeout))\n        upsert_data(context, data_dict)\n        trans.commit()\n        return _unrename_json_field(data_dict)\n&lt;/operation_context&gt;&lt;/frame&gt;&lt;frame&gt;&lt;module&gt;ckanext.datastore.db&lt;/module&gt;&lt;filename&gt;/project/ckan/ckanext/datastore/db.py&lt;/filename&gt;&lt;line&gt;656&lt;/line&gt;&lt;function&gt;upsert_data&lt;/function&gt;&lt;operation&gt;toolkit._(&amp;quot;The data was invalid (for example: a numeric value &amp;quot;&lt;/operation&gt;&lt;operation_context&gt;        except sqlalchemy.exc.DataError as err:\n            raise InvalidDataError(\n                toolkit._(&amp;quot;The data was invalid (for example: a numeric value &amp;quot;\n                          &amp;quot;is out of range or was inserted into a text field).&amp;quot;\n                          ))\n&lt;/operation_context&gt;&lt;/frame&gt;&lt;/stack&gt;&lt;exception&gt;&lt;type&gt;InvalidDataError&lt;/type&gt;&lt;value&gt;The data was invalid (for example: a numeric value is out of range or was inserted into a text field).&lt;/value&gt;&lt;/exception&gt;&lt;/traceback&gt;</textarea>\n    </div>\n    <div id=\"short_xml_version\" class=\"hidden-data\">\n    <textarea style=\"width: 100%\" rows=27 cols=60>&lt;?xml version=\"1.0\" ?&gt;&lt;traceback&gt;&lt;sysinfo&gt;&lt;language full_version=\"2.7.6 (default, Mar 22 2014, 22:59:56) \n[GCC 4.8.2]\" platform=\"linux2\" version=\"2.7.6\"&gt;Python&lt;/language&gt;&lt;libraries&gt;&lt;library name=\"repoze.lru\" version=\"0.6\"/&gt;&lt;library name=\"mako\" version=\"0.9.0\"/&gt;&lt;library name=\"webhelpers\" version=\"1.3\"/&gt;&lt;library name=\"pylons\" version=\"0.9.7\"/&gt;&lt;library name=\"simplejson\" version=\"3.3.1\"/&gt;&lt;library name=\"weberror\" version=\"0.10.3\"/&gt;&lt;library name=\"webtest\" version=\"1.4.3\"/&gt;&lt;library name=\"markupsafe\" version=\"0.18\"/&gt;&lt;library name=\"pygments\" version=\"1.6\"/&gt;&lt;library name=\"genshi\" version=\"0.6\"/&gt;&lt;library name=\"sqlalchemy\" version=\"0.9.6\"/&gt;&lt;library name=\"paste\" version=\"1.7.5.1\"/&gt;&lt;library name=\"decorator\" version=\"3.4.0\"/&gt;&lt;library name=\"beaker\" version=\"1.6.4\"/&gt;&lt;library name=\"formencode\" version=\"1.2.6\"/&gt;&lt;library name=\"pastedeploy\" version=\"1.5.0\"/&gt;&lt;library name=\"tempita\" version=\"0.5.2\"/&gt;&lt;library name=\"nose\" version=\"1.3.0\"/&gt;&lt;library name=\"routes\" version=\"1.13\"/&gt;&lt;library name=\"webob\" version=\"1.0.8\"/&gt;&lt;library name=\"pastescript\" version=\"1.7.5\"/&gt;&lt;/libraries&gt;&lt;/sysinfo&gt;&lt;stack&gt;&lt;frame&gt;&lt;module&gt;ckan.controllers.api&lt;/module&gt;&lt;filename&gt;/project/ckan/ckan/controllers/api.py&lt;/filename&gt;&lt;line&gt;197&lt;/line&gt;&lt;function&gt;action&lt;/function&gt;&lt;operation&gt;result = function(context, request_data)&lt;/operation&gt;&lt;operation_context&gt;            del request_data['callback']\n        try:\n            result = function(context, request_data)\n            return_dict['success'] = True\n            return_dict['result'] = result\n&lt;/operation_context&gt;&lt;/frame&gt;&lt;frame&gt;&lt;module&gt;ckan.logic&lt;/module&gt;&lt;filename&gt;/project/ckan/ckan/logic/__init__.py&lt;/filename&gt;&lt;line&gt;424&lt;/line&gt;&lt;function&gt;wrapped&lt;/function&gt;&lt;operation&gt;result = _action(context, data_dict, **kw)&lt;/operation&gt;&lt;operation_context&gt;\n                # check_access(action_name, context, data_dict=None)\n                result = _action(context, data_dict, **kw)\n                try:\n                    audit = context['__auth_audit'][-1]\n&lt;/operation_context&gt;&lt;/frame&gt;&lt;frame&gt;&lt;module&gt;ckanext.datastore.logic.action&lt;/module&gt;&lt;filename&gt;/project/ckan/ckanext/datastore/logic/action.py&lt;/filename&gt;&lt;line&gt;212&lt;/line&gt;&lt;function&gt;datastore_upsert&lt;/function&gt;&lt;operation&gt;result = db.upsert(context, data_dict)&lt;/operation&gt;&lt;operation_context&gt;        ))\n\n    result = db.upsert(context, data_dict)\n    result.pop('id', None)\n    result.pop('connection_url')\n&lt;/operation_context&gt;&lt;/frame&gt;&lt;frame&gt;&lt;module&gt;ckanext.datastore.db&lt;/module&gt;&lt;filename&gt;/project/ckan/ckanext/datastore/db.py&lt;/filename&gt;&lt;line&gt;1121&lt;/line&gt;&lt;function&gt;upsert&lt;/function&gt;&lt;operation&gt;upsert_data(context, data_dict)&lt;/operation&gt;&lt;operation_context&gt;        context['connection'].execute(\n            u'SET LOCAL statement_timeout TO {0}'.format(timeout))\n        upsert_data(context, data_dict)\n        trans.commit()\n        return _unrename_json_field(data_dict)\n&lt;/operation_context&gt;&lt;/frame&gt;&lt;frame&gt;&lt;module&gt;ckanext.datastore.db&lt;/module&gt;&lt;filename&gt;/project/ckan/ckanext/datastore/db.py&lt;/filename&gt;&lt;line&gt;656&lt;/line&gt;&lt;function&gt;upsert_data&lt;/function&gt;&lt;operation&gt;toolkit._(&amp;quot;The data was invalid (for example: a numeric value &amp;quot;&lt;/operation&gt;&lt;operation_context&gt;        except sqlalchemy.exc.DataError as err:\n            raise InvalidDataError(\n                toolkit._(&amp;quot;The data was invalid (for example: a numeric value &amp;quot;\n                          &amp;quot;is out of range or was inserted into a text field).&amp;quot;\n                          ))\n&lt;/operation_context&gt;&lt;/frame&gt;&lt;/stack&gt;&lt;exception&gt;&lt;type&gt;InvalidDataError&lt;/type&gt;&lt;value&gt;The data was invalid (for example: a numeric value is out of range or was inserted into a text field).&lt;/value&gt;&lt;/exception&gt;&lt;/traceback&gt;</textarea>\n    </div>\n    \n        <div id=\"full_traceback\" class=\"hidden-data\">\n        URL: <a href=\"http://boot2docker:5462/api/3/action/datastore_upsert\">http://boot2docker:5462/api/3/action/datastore_upsert</a><br>\n<div class=\"frame\">\nModule <span class=\"module\" title=\"/usr/lib/ckan/local/lib/python2.7/site-packages/weberror/evalexception.py\">weberror.evalexception</span>:<b>431</b> in <code>respond</code>  <a href=\"#\" class=\"show_locals\" tbid=\"140449077477176\" onClick=\"return showFrame(this)\">&nbsp; &nbsp; <img src=\"http://boot2docker:5462/_debug/media/plus.jpg\" border=0 width=9 height=9> &nbsp; &nbsp;</a> <a href=\"#\" class=\"\" location=\"weberror.evalexception:431\" onClick=\"return showSource(this)\">view</a><br>\n<div style=\"display: none\" class=\"source highlight\" source-type=\"long\"><a class=\"switch_source\" onclick=\"return switch_source(this, 'long')\" href=\"#\">&lt;&lt;&nbsp; </a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class=\"k\">try</span><span class=\"p\">:</span><br>\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class=\"n\">__traceback_supplement__</span> <span class=\"o\">=</span> <span class=\"n\">errormiddleware</span><span class=\"o\">.</span><span class=\"n\">Supplement</span><span class=\"p\">,</span> <span class=\"bp\">self</span><span class=\"p\">,</span> <span class=\"n\">environ</span><br>\n<span class=\"source-highlight\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class=\"n\">app_iter</span> <span class=\"o\">=</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">application</span><span class=\"p\">(</span><span class=\"n\">environ</span><span class=\"p\">,</span> <span class=\"n\">detect_start_response</span><span class=\"p\">)</span></span><br>\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class=\"c\"># Don&#39;t create a list from a paste.fileapp object </span></div><div class=\"source highlight\" source-type=\"short\"><a onclick=\"return switch_source(this, 'short')\" class=\"switch_source\" href=\"#\">&gt;&gt;&nbsp; </a><span class=\"n\">app_iter</span> <span class=\"o\">=</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">application</span><span class=\"p\">(</span><span class=\"n\">environ</span><span class=\"p\">,</span> <span class=\"n\">detect_start_response</span><span class=\"p\">)</span></div>\n</div>\n<div class=\"frame\">\nModule <span class=\"module\" title=\"/usr/lib/ckan/local/lib/python2.7/site-packages/webob/dec.py\">webob.dec</span>:<b>147</b> in <code>__call__</code>  <a href=\"#\" class=\"show_locals\" tbid=\"140449077476240\" onClick=\"return showFrame(this)\">&nbsp; &nbsp; <img src=\"http://boot2docker:5462/_debug/media/plus.jpg\" border=0 width=9 height=9> &nbsp; &nbsp;</a> <a href=\"#\" class=\"\" location=\"webob.dec:147\" onClick=\"return showSource(this)\">view</a><br>\n<div style=\"display: none\" class=\"source highlight\" source-type=\"long\"><a class=\"switch_source\" onclick=\"return switch_source(this, 'long')\" href=\"#\">&lt;&lt;&nbsp; </a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class=\"k\">if</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">middleware_wraps</span><span class=\"p\">:</span><br>\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class=\"n\">args</span> <span class=\"o\">=</span> <span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">middleware_wraps</span><span class=\"p\">,)</span> <span class=\"o\">+</span> <span class=\"n\">args</span><br>\n<span class=\"source-highlight\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class=\"n\">resp</span> <span class=\"o\">=</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">call_func</span><span class=\"p\">(</span><span class=\"n\">req</span><span class=\"p\">,</span> <span class=\"o\">*</span><span class=\"n\">args</span><span class=\"p\">,</span> <span class=\"o\">**</span><span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">kwargs</span><span class=\"p\">)</span></span><br>\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class=\"k\">except</span> <span class=\"n\">webob</span><span class=\"o\">.</span><span class=\"n\">exc</span><span class=\"o\">.</span><span class=\"n\">HTTPException</span><span class=\"p\">,</span> <span class=\"n\">resp</span><span class=\"p\">:</span><br>\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class=\"k\">pass</span></div><div class=\"source highlight\" source-type=\"short\"><a onclick=\"return switch_source(this, 'short')\" class=\"switch_source\" href=\"#\">&gt;&gt;&nbsp; </a><span class=\"n\">resp</span> <span class=\"o\">=</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">call_func</span><span class=\"p\">(</span><span class=\"n\">req</span><span class=\"p\">,</span> <span class=\"o\">*</span><span class=\"n\">args</span><span class=\"p\">,</span> <span class=\"o\">**</span><span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">kwargs</span><span class=\"p\">)</span></div>\n</div>\n<div class=\"frame\">\nModule <span class=\"module\" title=\"/usr/lib/ckan/local/lib/python2.7/site-packages/webob/dec.py\">webob.dec</span>:<b>208</b> in <code>call_func</code>  <a href=\"#\" class=\"show_locals\" tbid=\"140449077474728\" onClick=\"return showFrame(this)\">&nbsp; &nbsp; <img src=\"http://boot2docker:5462/_debug/media/plus.jpg\" border=0 width=9 height=9> &nbsp; &nbsp;</a> <a href=\"#\" class=\"\" location=\"webob.dec:208\" onClick=\"return showSource(this)\">view</a><br>\n<div style=\"display: none\" class=\"source highlight\" source-type=\"long\"><a class=\"switch_source\" onclick=\"return switch_source(this, 'long')\" href=\"#\">&lt;&lt;&nbsp; </a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class=\"sd\">&quot;&quot;&quot;Call the wrapped function; override this in a subclass to</span><br>\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class=\"sd\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; change how the function is called.&quot;&quot;&quot;</span><br>\n<span class=\"source-highlight\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class=\"k\">return</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">func</span><span class=\"p\">(</span><span class=\"n\">req</span><span class=\"p\">,</span> <span class=\"o\">*</span><span class=\"n\">args</span><span class=\"p\">,</span> <span class=\"o\">**</span><span class=\"n\">kwargs</span><span class=\"p\">)</span></span><br>\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class=\"k\">def</span> <span class=\"nf\">clone</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">,</span> <span class=\"n\">func</span><span class=\"o\">=</span><span class=\"bp\">None</span><span class=\"p\">,</span> <span class=\"o\">**</span><span class=\"n\">kw</span><span class=\"p\">):</span></div><div class=\"source highlight\" source-type=\"short\"><a onclick=\"return switch_source(this, 'short')\" class=\"switch_source\" href=\"#\">&gt;&gt;&nbsp; </a><span class=\"k\">return</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">func</span><span class=\"p\">(</span><span class=\"n\">req</span><span class=\"p\">,</span> <span class=\"o\">*</span><span class=\"n\">args</span><span class=\"p\">,</span> <span class=\"o\">**</span><span class=\"n\">kwargs</span><span class=\"p\">)</span></div>\n</div>\n<div class=\"frame\">\nModule <span class=\"module\" title=\"/usr/lib/ckan/local/lib/python2.7/site-packages/fanstatic/publisher.py\">fanstatic.publisher</span>:<b>234</b> in <code>__call__</code>  <a href=\"#\" class=\"show_locals\" tbid=\"140449077477248\" onClick=\"return showFrame(this)\">&nbsp; &nbsp; <img src=\"http://boot2docker:5462/_debug/media/plus.jpg\" border=0 width=9 height=9> &nbsp; &nbsp;</a> <a href=\"#\" class=\"\" location=\"fanstatic.publisher:234\" onClick=\"return showSource(this)\">view</a><br>\n<div style=\"display: none\" class=\"source highlight\" source-type=\"long\"><a class=\"switch_source\" onclick=\"return switch_source(this, 'long')\" href=\"#\">&lt;&lt;&nbsp; </a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class=\"c\"># the trigger segment is not in the URL, so we delegate</span><br>\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class=\"c\"># to the original application</span><br>\n<span class=\"source-highlight\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class=\"k\">return</span> <span class=\"n\">request</span><span class=\"o\">.</span><span class=\"n\">get_response</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">app</span><span class=\"p\">)</span></span><br>\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class=\"c\"># the trigger is in there, so let whatever is behind the</span><br>\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class=\"c\"># trigger be handled by the publisher</span></div><div class=\"source highlight\" source-type=\"short\"><a onclick=\"return switch_source(this, 'short')\" class=\"switch_source\" href=\"#\">&gt;&gt;&nbsp; </a><span class=\"k\">return</span> <span class=\"n\">request</span><span class=\"o\">.</span><span class=\"n\">get_response</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">app</span><span class=\"p\">)</span></div>\n</div>\n<div class=\"frame\">\nModule <span class=\"module\" title=\"/usr/lib/ckan/local/lib/python2.7/site-packages/webob/request.py\">webob.request</span>:<b>1053</b> in <code>get_response</code>  <a href=\"#\" class=\"show_locals\" tbid=\"140449077476168\" onClick=\"return showFrame(this)\">&nbsp; &nbsp; <img src=\"http://boot2docker:5462/_debug/media/plus.jpg\" border=0 width=9 height=9> &nbsp; &nbsp;</a> <a href=\"#\" class=\"\" location=\"webob.request:1053\" onClick=\"return showSource(this)\">view</a><br>\n<div style=\"display: none\" class=\"source highlight\" source-type=\"long\"><a class=\"switch_source\" onclick=\"return switch_source(this, 'long')\" href=\"#\">&lt;&lt;&nbsp; </a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class=\"k\">else</span><span class=\"p\">:</span><br>\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class=\"n\">status</span><span class=\"p\">,</span> <span class=\"n\">headers</span><span class=\"p\">,</span> <span class=\"n\">app_iter</span> <span class=\"o\">=</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">call_application</span><span class=\"p\">(</span><br>\n<span class=\"source-highlight\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class=\"n\">application</span><span class=\"p\">,</span> <span class=\"n\">catch_exc_info</span><span class=\"o\">=</span><span class=\"bp\">False</span><span class=\"p\">)</span></span><br>\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class=\"k\">return</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">ResponseClass</span><span class=\"p\">(</span><br>\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class=\"n\">status</span><span class=\"o\">=</span><span class=\"n\">status</span><span class=\"p\">,</span> <span class=\"n\">headerlist</span><span class=\"o\">=</span><span class=\"nb\">list</span><span class=\"p\">(</span><span class=\"n\">headers</span><span class=\"p\">),</span> <span class=\"n\">app_iter</span><span class=\"o\">=</span><span class=\"n\">app_iter</span><span class=\"p\">,</span></div><div class=\"source highlight\" source-type=\"short\"><a onclick=\"return switch_source(this, 'short')\" class=\"switch_source\" href=\"#\">&gt;&gt;&nbsp; </a><span class=\"n\">application</span><span class=\"p\">,</span> <span class=\"n\">catch_exc_info</span><span class=\"o\">=</span><span class=\"bp\">False</span><span class=\"p\">)</span></div>\n</div>\n<div class=\"frame\">\nModule <span class=\"module\" title=\"/usr/lib/ckan/local/lib/python2.7/site-packages/webob/request.py\">webob.request</span>:<b>1022</b> in <code>call_application</code>  <a href=\"#\" class=\"show_locals\" tbid=\"140449077474872\" onClick=\"return showFrame(this)\">&nbsp; &nbsp; <img src=\"http://boot2docker:5462/_debug/media/plus.jpg\" border=0 width=9 height=9> &nbsp; &nbsp;</a> <a href=\"#\" class=\"\" location=\"webob.request:1022\" onClick=\"return showSource(this)\">view</a><br>\n<div style=\"display: none\" class=\"source highlight\" source-type=\"long\"><a class=\"switch_source\" onclick=\"return switch_source(this, 'long')\" href=\"#\">&lt;&lt;&nbsp; </a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class=\"n\">captured</span><span class=\"p\">[:]</span> <span class=\"o\">=</span> <span class=\"p\">[</span><span class=\"n\">status</span><span class=\"p\">,</span> <span class=\"n\">headers</span><span class=\"p\">,</span> <span class=\"n\">exc_info</span><span class=\"p\">]</span><br>\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class=\"k\">return</span> <span class=\"n\">output</span><span class=\"o\">.</span><span class=\"n\">append</span><br>\n<span class=\"source-highlight\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class=\"n\">app_iter</span> <span class=\"o\">=</span> <span class=\"n\">application</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">environ</span><span class=\"p\">,</span> <span class=\"n\">start_response</span><span class=\"p\">)</span></span><br>\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class=\"k\">if</span> <span class=\"n\">output</span> <span class=\"ow\">or</span> <span class=\"ow\">not</span> <span class=\"n\">captured</span><span class=\"p\">:</span><br>\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class=\"k\">try</span><span class=\"p\">:</span></div><div class=\"source highlight\" source-type=\"short\"><a onclick=\"return switch_source(this, 'short')\" class=\"switch_source\" href=\"#\">&gt;&gt;&nbsp; </a><span class=\"n\">app_iter</span> <span class=\"o\">=</span> <span class=\"n\">application</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">environ</span><span class=\"p\">,</span> <span class=\"n\">start_response</span><span class=\"p\">)</span></div>\n</div>\n<div class=\"frame\">\nModule <span class=\"module\" title=\"/usr/lib/ckan/local/lib/python2.7/site-packages/webob/dec.py\">webob.dec</span>:<b>147</b> in <code>__call__</code>  <a href=\"#\" class=\"show_locals\" tbid=\"140449077476816\" onClick=\"return showFrame(this)\">&nbsp; &nbsp; <img src=\"http://boot2docker:5462/_debug/media/plus.jpg\" border=0 width=9 height=9> &nbsp; &nbsp;</a> <a href=\"#\" class=\"\" location=\"webob.dec:147\" onClick=\"return showSource(this)\">view</a><br>\n<div style=\"display: none\" class=\"source highlight\" source-type=\"long\"><a class=\"switch_source\" onclick=\"return switch_source(this, 'long')\" href=\"#\">&lt;&lt;&nbsp; </a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class=\"k\">if</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">middleware_wraps</span><span class=\"p\">:</span><br>\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class=\"n\">args</span> <span class=\"o\">=</span> <span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">middleware_wraps</span><span class=\"p\">,)</span> <span class=\"o\">+</span> <span class=\"n\">args</span><br>\n<span class=\"source-highlight\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class=\"n\">resp</span> <span class=\"o\">=</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">call_func</span><span class=\"p\">(</span><span class=\"n\">req</span><span class=\"p\">,</span> <span class=\"o\">*</span><span class=\"n\">args</span><span class=\"p\">,</span> <span class=\"o\">**</span><span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">kwargs</span><span class=\"p\">)</span></span><br>\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class=\"k\">except</span> <span class=\"n\">webob</span><span class=\"o\">.</span><span class=\"n\">exc</span><span class=\"o\">.</span><span class=\"n\">HTTPException</span><span class=\"p\">,</span> <span class=\"n\">resp</span><span class=\"p\">:</span><br>\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class=\"k\">pass</span></div><div class=\"source highlight\" source-type=\"short\"><a onclick=\"return switch_source(this, 'short')\" class=\"switch_source\" href=\"#\">&gt;&gt;&nbsp; </a><span class=\"n\">resp</span> <span class=\"o\">=</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">call_func</span><span class=\"p\">(</span><span class=\"n\">req</span><span class=\"p\">,</span> <span class=\"o\">*</span><span class=\"n\">args</span><span class=\"p\">,</span> <span class=\"o\">**</span><span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">kwargs</span><span class=\"p\">)</span></div>\n</div>\n<div class=\"frame\">\nModule <span class=\"module\" title=\"/usr/lib/ckan/local/lib/python2.7/site-packages/webob/dec.py\">webob.dec</span>:<b>208</b> in <code>call_func</code>  <a href=\"#\" class=\"show_locals\" tbid=\"140449077476312\" onClick=\"return showFrame(this)\">&nbsp; &nbsp; <img src=\"http://boot2docker:5462/_debug/media/plus.jpg\" border=0 width=9 height=9> &nbsp; &nbsp;</a> <a href=\"#\" class=\"\" location=\"webob.dec:208\" onClick=\"return showSource(this)\">view</a><br>\n<div style=\"display: none\" class=\"source highlight\" source-type=\"long\"><a class=\"switch_source\" onclick=\"return switch_source(this, 'long')\" href=\"#\">&lt;&lt;&nbsp; </a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class=\"sd\">&quot;&quot;&quot;Call the wrapped function; override this in a subclass to</span><br>\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class=\"sd\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; change how the function is called.&quot;&quot;&quot;</span><br>\n<span class=\"source-highlight\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class=\"k\">return</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">func</span><span class=\"p\">(</span><span class=\"n\">req</span><span class=\"p\">,</span> <span class=\"o\">*</span><span class=\"n\">args</span><span class=\"p\">,</span> <span class=\"o\">**</span><span class=\"n\">kwargs</span><span class=\"p\">)</span></span><br>\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class=\"k\">def</span> <span class=\"nf\">clone</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">,</span> <span class=\"n\">func</span><span class=\"o\">=</span><span class=\"bp\">None</span><span class=\"p\">,</span> <span class=\"o\">**</span><span class=\"n\">kw</span><span class=\"p\">):</span></div><div class=\"source highlight\" source-type=\"short\"><a onclick=\"return switch_source(this, 'short')\" class=\"switch_source\" href=\"#\">&gt;&gt;&nbsp; </a><span class=\"k\">return</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">func</span><span class=\"p\">(</span><span class=\"n\">req</span><span class=\"p\">,</span> <span class=\"o\">*</span><span class=\"n\">args</span><span class=\"p\">,</span> <span class=\"o\">**</span><span class=\"n\">kwargs</span><span class=\"p\">)</span></div>\n</div>\n<div class=\"frame\">\nModule <span class=\"module\" title=\"/usr/lib/ckan/local/lib/python2.7/site-packages/fanstatic/injector.py\">fanstatic.injector</span>:<b>54</b> in <code>__call__</code>  <a href=\"#\" class=\"show_locals\" tbid=\"140449077473432\" onClick=\"return showFrame(this)\">&nbsp; &nbsp; <img src=\"http://boot2docker:5462/_debug/media/plus.jpg\" border=0 width=9 height=9> &nbsp; &nbsp;</a> <a href=\"#\" class=\"\" location=\"fanstatic.injector:54\" onClick=\"return showSource(this)\">view</a><br>\n<div style=\"display: none\" class=\"source highlight\" source-type=\"long\"><a class=\"switch_source\" onclick=\"return switch_source(this, 'long')\" href=\"#\">&lt;&lt;&nbsp; </a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class=\"c\"># Get the response from the wrapped application:</span><br>\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class=\"n\">response</span> <span class=\"o\">=</span> <span class=\"n\">request</span><span class=\"o\">.</span><span class=\"n\">get_response</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">app</span><span class=\"p\">)</span><br>\n<span class=\"source-highlight\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><br>\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class=\"c\"># We only continue if the content-type is appropriate.</span></div><div class=\"source highlight\" source-type=\"short\"><a onclick=\"return switch_source(this, 'short')\" class=\"switch_source\" href=\"#\">&gt;&gt;&nbsp; </a><span class=\"n\">response</span> <span class=\"o\">=</span> <span class=\"n\">request</span><span class=\"o\">.</span><span class=\"n\">get_response</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">app</span><span class=\"p\">)</span></div>\n</div>\n<div class=\"frame\">\nModule <span class=\"module\" title=\"/usr/lib/ckan/local/lib/python2.7/site-packages/webob/request.py\">webob.request</span>:<b>1053</b> in <code>get_response</code>  <a href=\"#\" class=\"show_locals\" tbid=\"140449077476600\" onClick=\"return showFrame(this)\">&nbsp; &nbsp; <img src=\"http://boot2docker:5462/_debug/media/plus.jpg\" border=0 width=9 height=9> &nbsp; &nbsp;</a> <a href=\"#\" class=\"\" location=\"webob.request:1053\" onClick=\"return showSource(this)\">view</a><br>\n<div style=\"display: none\" class=\"source highlight\" source-type=\"long\"><a class=\"switch_source\" onclick=\"return switch_source(this, 'long')\" href=\"#\">&lt;&lt;&nbsp; </a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class=\"k\">else</span><span class=\"p\">:</span><br>\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class=\"n\">status</span><span class=\"p\">,</span> <span class=\"n\">headers</span><span class=\"p\">,</span> <span class=\"n\">app_iter</span> <span class=\"o\">=</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">call_application</span><span class=\"p\">(</span><br>\n<span class=\"source-highlight\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class=\"n\">application</span><span class=\"p\">,</span> <span class=\"n\">catch_exc_info</span><span class=\"o\">=</span><span class=\"bp\">False</span><span class=\"p\">)</span></span><br>\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class=\"k\">return</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">ResponseClass</span><span class=\"p\">(</span><br>\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class=\"n\">status</span><span class=\"o\">=</span><span class=\"n\">status</span><span class=\"p\">,</span> <span class=\"n\">headerlist</span><span class=\"o\">=</span><span class=\"nb\">list</span><span class=\"p\">(</span><span class=\"n\">headers</span><span class=\"p\">),</span> <span class=\"n\">app_iter</span><span class=\"o\">=</span><span class=\"n\">app_iter</span><span class=\"p\">,</span></div><div class=\"source highlight\" source-type=\"short\"><a onclick=\"return switch_source(this, 'short')\" class=\"switch_source\" href=\"#\">&gt;&gt;&nbsp; </a><span class=\"n\">application</span><span class=\"p\">,</span> <span class=\"n\">catch_exc_info</span><span class=\"o\">=</span><span class=\"bp\">False</span><span class=\"p\">)</span></div>\n</div>\n<div class=\"frame\">\nModule <span class=\"module\" title=\"/usr/lib/ckan/local/lib/python2.7/site-packages/webob/request.py\">webob.request</span>:<b>1022</b> in <code>call_application</code>  <a href=\"#\" class=\"show_locals\" tbid=\"140449077475664\" onClick=\"return showFrame(this)\">&nbsp; &nbsp; <img src=\"http://boot2docker:5462/_debug/media/plus.jpg\" border=0 width=9 height=9> &nbsp; &nbsp;</a> <a href=\"#\" class=\"\" location=\"webob.request:1022\" onClick=\"return showSource(this)\">view</a><br>\n<div style=\"display: none\" class=\"source highlight\" source-type=\"long\"><a class=\"switch_source\" onclick=\"return switch_source(this, 'long')\" href=\"#\">&lt;&lt;&nbsp; </a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class=\"n\">captured</span><span class=\"p\">[:]</span> <span class=\"o\">=</span> <span class=\"p\">[</span><span class=\"n\">status</span><span class=\"p\">,</span> <span class=\"n\">headers</span><span class=\"p\">,</span> <span class=\"n\">exc_info</span><span class=\"p\">]</span><br>\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class=\"k\">return</span> <span class=\"n\">output</span><span class=\"o\">.</span><span class=\"n\">append</span><br>\n<span class=\"source-highlight\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class=\"n\">app_iter</span> <span class=\"o\">=</span> <span class=\"n\">application</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">environ</span><span class=\"p\">,</span> <span class=\"n\">start_response</span><span class=\"p\">)</span></span><br>\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class=\"k\">if</span> <span class=\"n\">output</span> <span class=\"ow\">or</span> <span class=\"ow\">not</span> <span class=\"n\">captured</span><span class=\"p\">:</span><br>\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class=\"k\">try</span><span class=\"p\">:</span></div><div class=\"source highlight\" source-type=\"short\"><a onclick=\"return switch_source(this, 'short')\" class=\"switch_source\" href=\"#\">&gt;&gt;&nbsp; </a><span class=\"n\">app_iter</span> <span class=\"o\">=</span> <span class=\"n\">application</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">environ</span><span class=\"p\">,</span> <span class=\"n\">start_response</span><span class=\"p\">)</span></div>\n</div>\n<div class=\"frame\">\nModule <span class=\"module\" title=\"/usr/lib/ckan/local/lib/python2.7/site-packages/beaker/middleware.py\">beaker.middleware</span>:<b>73</b> in <code>__call__</code>  <a href=\"#\" class=\"show_locals\" tbid=\"140449077477320\" onClick=\"return showFrame(this)\">&nbsp; &nbsp; <img src=\"http://boot2docker:5462/_debug/media/plus.jpg\" border=0 width=9 height=9> &nbsp; &nbsp;</a> <a href=\"#\" class=\"\" location=\"beaker.middleware:73\" onClick=\"return showSource(this)\">view</a><br>\n<div style=\"display: none\" class=\"source highlight\" source-type=\"long\"><a class=\"switch_source\" onclick=\"return switch_source(this, 'long')\" href=\"#\">&lt;&lt;&nbsp; </a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">cache_manager</span><span class=\"p\">)</span><br>\n<span class=\"source-highlight\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class=\"n\">environ</span><span class=\"p\">[</span><span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">environ_key</span><span class=\"p\">]</span> <span class=\"o\">=</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">cache_manager</span></span><br>\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class=\"k\">return</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">app</span><span class=\"p\">(</span><span class=\"n\">environ</span><span class=\"p\">,</span> <span class=\"n\">start_response</span><span class=\"p\">)</span></div><div class=\"source highlight\" source-type=\"short\"><a onclick=\"return switch_source(this, 'short')\" class=\"switch_source\" href=\"#\">&gt;&gt;&nbsp; </a><span class=\"k\">return</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">app</span><span class=\"p\">(</span><span class=\"n\">environ</span><span class=\"p\">,</span> <span class=\"n\">start_response</span><span class=\"p\">)</span></div>\n</div>\n<div class=\"frame\">\nModule <span class=\"module\" title=\"/usr/lib/ckan/local/lib/python2.7/site-packages/beaker/middleware.py\">beaker.middleware</span>:<b>155</b> in <code>__call__</code>  <a href=\"#\" class=\"show_locals\" tbid=\"140449077475952\" onClick=\"return showFrame(this)\">&nbsp; &nbsp; <img src=\"http://boot2docker:5462/_debug/media/plus.jpg\" border=0 width=9 height=9> &nbsp; &nbsp;</a> <a href=\"#\" class=\"\" location=\"beaker.middleware:155\" onClick=\"return showSource(this)\">view</a><br>\n<div style=\"display: none\" class=\"source highlight\" source-type=\"long\"><a class=\"switch_source\" onclick=\"return switch_source(this, 'long')\" href=\"#\">&lt;&lt;&nbsp; </a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class=\"n\">headers</span><span class=\"o\">.</span><span class=\"n\">append</span><span class=\"p\">((</span><span class=\"s\">&#39;Set-cookie&#39;</span><span class=\"p\">,</span> <span class=\"n\">cookie</span><span class=\"p\">))</span><br>\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class=\"k\">return</span> <span class=\"n\">start_response</span><span class=\"p\">(</span><span class=\"n\">status</span><span class=\"p\">,</span> <span class=\"n\">headers</span><span class=\"p\">,</span> <span class=\"n\">exc_info</span><span class=\"p\">)</span><br>\n<span class=\"source-highlight\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class=\"k\">return</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">wrap_app</span><span class=\"p\">(</span><span class=\"n\">environ</span><span class=\"p\">,</span> <span class=\"n\">session_start_response</span><span class=\"p\">)</span></span><br>\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class=\"k\">def</span> <span class=\"nf\">_get_session</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">):</span></div><div class=\"source highlight\" source-type=\"short\"><a onclick=\"return switch_source(this, 'short')\" class=\"switch_source\" href=\"#\">&gt;&gt;&nbsp; </a><span class=\"k\">return</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">wrap_app</span><span class=\"p\">(</span><span class=\"n\">environ</span><span class=\"p\">,</span> <span class=\"n\">session_start_response</span><span class=\"p\">)</span></div>\n</div>\n<div class=\"frame\">\nModule <span class=\"module\" title=\"/usr/lib/ckan/local/lib/python2.7/site-packages/routes/middleware.py\">routes.middleware</span>:<b>131</b> in <code>__call__</code>  <a href=\"#\" class=\"show_locals\" tbid=\"140449080643456\" onClick=\"return showFrame(this)\">&nbsp; &nbsp; <img src=\"http://boot2docker:5462/_debug/media/plus.jpg\" border=0 width=9 height=9> &nbsp; &nbsp;</a> <a href=\"#\" class=\"\" location=\"routes.middleware:131\" onClick=\"return showSource(this)\">view</a><br>\n<div style=\"display: none\" class=\"source highlight\" source-type=\"long\"><a class=\"switch_source\" onclick=\"return switch_source(this, 'long')\" href=\"#\">&lt;&lt;&nbsp; </a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class=\"s\">r&#39;\\1&#39;</span><span class=\"p\">,</span> <span class=\"n\">oldpath</span><span class=\"p\">)</span><br>\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>\n<span class=\"source-highlight\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class=\"n\">response</span> <span class=\"o\">=</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">app</span><span class=\"p\">(</span><span class=\"n\">environ</span><span class=\"p\">,</span> <span class=\"n\">start_response</span><span class=\"p\">)</span></span><br>\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class=\"c\"># Wrapped in try as in rare cases the attribute will be gone already</span></div><div class=\"source highlight\" source-type=\"short\"><a onclick=\"return switch_source(this, 'short')\" class=\"switch_source\" href=\"#\">&gt;&gt;&nbsp; </a><span class=\"n\">response</span> <span class=\"o\">=</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">app</span><span class=\"p\">(</span><span class=\"n\">environ</span><span class=\"p\">,</span> <span class=\"n\">start_response</span><span class=\"p\">)</span></div>\n</div>\n<div class=\"frame\">\nModule <span class=\"module\" title=\"/usr/lib/ckan/local/lib/python2.7/site-packages/pylons/wsgiapp.py\">pylons.wsgiapp</span>:<b>125</b> in <code>__call__</code>  <a href=\"#\" class=\"show_locals\" tbid=\"140449080135192\" onClick=\"return showFrame(this)\">&nbsp; &nbsp; <img src=\"http://boot2docker:5462/_debug/media/plus.jpg\" border=0 width=9 height=9> &nbsp; &nbsp;</a> <a href=\"#\" class=\"\" location=\"pylons.wsgiapp:125\" onClick=\"return showSource(this)\">view</a><br>\n<div style=\"display: none\" class=\"source highlight\" source-type=\"long\"><a class=\"switch_source\" onclick=\"return switch_source(this, 'long')\" href=\"#\">&lt;&lt;&nbsp; </a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class=\"n\">controller</span> <span class=\"o\">=</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">resolve</span><span class=\"p\">(</span><span class=\"n\">environ</span><span class=\"p\">,</span> <span class=\"n\">start_response</span><span class=\"p\">)</span><br>\n<span class=\"source-highlight\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class=\"n\">response</span> <span class=\"o\">=</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">dispatch</span><span class=\"p\">(</span><span class=\"n\">controller</span><span class=\"p\">,</span> <span class=\"n\">environ</span><span class=\"p\">,</span> <span class=\"n\">start_response</span><span class=\"p\">)</span></span><br>\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class=\"k\">if</span> <span class=\"s\">&#39;paste.testing_variables&#39;</span> <span class=\"ow\">in</span> <span class=\"n\">environ</span> <span class=\"ow\">and</span> <span class=\"nb\">hasattr</span><span class=\"p\">(</span><span class=\"n\">response</span><span class=\"p\">,</span></div><div class=\"source highlight\" source-type=\"short\"><a onclick=\"return switch_source(this, 'short')\" class=\"switch_source\" href=\"#\">&gt;&gt;&nbsp; </a><span class=\"n\">response</span> <span class=\"o\">=</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">dispatch</span><span class=\"p\">(</span><span class=\"n\">controller</span><span class=\"p\">,</span> <span class=\"n\">environ</span><span class=\"p\">,</span> <span class=\"n\">start_response</span><span class=\"p\">)</span></div>\n</div>\n<div class=\"frame\">\nModule <span class=\"module\" title=\"/usr/lib/ckan/local/lib/python2.7/site-packages/pylons/wsgiapp.py\">pylons.wsgiapp</span>:<b>324</b> in <code>dispatch</code>  <a href=\"#\" class=\"show_locals\" tbid=\"140449080134904\" onClick=\"return showFrame(this)\">&nbsp; &nbsp; <img src=\"http://boot2docker:5462/_debug/media/plus.jpg\" border=0 width=9 height=9> &nbsp; &nbsp;</a> <a href=\"#\" class=\"\" location=\"pylons.wsgiapp:324\" onClick=\"return showSource(this)\">view</a><br>\n<div style=\"display: none\" class=\"source highlight\" source-type=\"long\"><a class=\"switch_source\" onclick=\"return switch_source(this, 'long')\" href=\"#\">&lt;&lt;&nbsp; </a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class=\"k\">if</span> <span class=\"n\">log_debug</span><span class=\"p\">:</span><br>\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class=\"n\">log</span><span class=\"o\">.</span><span class=\"n\">debug</span><span class=\"p\">(</span><span class=\"s\">&quot;Calling controller class with WSGI interface&quot;</span><span class=\"p\">)</span><br>\n<span class=\"source-highlight\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class=\"k\">return</span> <span class=\"n\">controller</span><span class=\"p\">(</span><span class=\"n\">environ</span><span class=\"p\">,</span> <span class=\"n\">start_response</span><span class=\"p\">)</span></span><br>\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class=\"k\">def</span> <span class=\"nf\">load_test_env</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">,</span> <span class=\"n\">environ</span><span class=\"p\">):</span></div><div class=\"source highlight\" source-type=\"short\"><a onclick=\"return switch_source(this, 'short')\" class=\"switch_source\" href=\"#\">&gt;&gt;&nbsp; </a><span class=\"k\">return</span> <span class=\"n\">controller</span><span class=\"p\">(</span><span class=\"n\">environ</span><span class=\"p\">,</span> <span class=\"n\">start_response</span><span class=\"p\">)</span></div>\n</div>\n<div class=\"frame\">\nModule <span class=\"module\" title=\"/project/ckan/ckan/controllers/api.py\">ckan.controllers.api</span>:<b>70</b> in <code>__call__</code>  <a href=\"#\" class=\"show_locals\" tbid=\"140449463017840\" onClick=\"return showFrame(this)\">&nbsp; &nbsp; <img src=\"http://boot2docker:5462/_debug/media/plus.jpg\" border=0 width=9 height=9> &nbsp; &nbsp;</a> <a href=\"#\" class=\"\" location=\"ckan.controllers.api:70\" onClick=\"return showSource(this)\">view</a><br>\n<div style=\"display: none\" class=\"source highlight\" source-type=\"long\"><a class=\"switch_source\" onclick=\"return switch_source(this, 'long')\" href=\"#\">&lt;&lt;&nbsp; </a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class=\"c\"># avoid status_code_redirect intercepting error responses</span><br>\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class=\"n\">environ</span><span class=\"p\">[</span><span class=\"s\">&#39;pylons.status_code_redirect&#39;</span><span class=\"p\">]</span> <span class=\"o\">=</span> <span class=\"bp\">True</span><br>\n<span class=\"source-highlight\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class=\"k\">return</span> <span class=\"n\">base</span><span class=\"o\">.</span><span class=\"n\">BaseController</span><span class=\"o\">.</span><span class=\"n\">__call__</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">,</span> <span class=\"n\">environ</span><span class=\"p\">,</span> <span class=\"n\">start_response</span><span class=\"p\">)</span></span><br>\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class=\"k\">def</span> <span class=\"nf\">_finish</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">,</span> <span class=\"n\">status_int</span><span class=\"p\">,</span> <span class=\"n\">response_data</span><span class=\"o\">=</span><span class=\"bp\">None</span><span class=\"p\">,</span></div><div class=\"source highlight\" source-type=\"short\"><a onclick=\"return switch_source(this, 'short')\" class=\"switch_source\" href=\"#\">&gt;&gt;&nbsp; </a><span class=\"k\">return</span> <span class=\"n\">base</span><span class=\"o\">.</span><span class=\"n\">BaseController</span><span class=\"o\">.</span><span class=\"n\">__call__</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">,</span> <span class=\"n\">environ</span><span class=\"p\">,</span> <span class=\"n\">start_response</span><span class=\"p\">)</span></div>\n</div>\n<div class=\"frame\">\nModule <span class=\"module\" title=\"/project/ckan/ckan/lib/base.py\">ckan.lib.base</span>:<b>338</b> in <code>__call__</code>  <a href=\"#\" class=\"show_locals\" tbid=\"140449077474584\" onClick=\"return showFrame(this)\">&nbsp; &nbsp; <img src=\"http://boot2docker:5462/_debug/media/plus.jpg\" border=0 width=9 height=9> &nbsp; &nbsp;</a> <a href=\"#\" class=\"\" location=\"ckan.lib.base:338\" onClick=\"return showSource(this)\">view</a><br>\n<div style=\"display: none\" class=\"source highlight\" source-type=\"long\"><a class=\"switch_source\" onclick=\"return switch_source(this, 'long')\" href=\"#\">&lt;&lt;&nbsp; </a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class=\"k\">try</span><span class=\"p\">:</span><br>\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class=\"n\">res</span> <span class=\"o\">=</span> <span class=\"n\">WSGIController</span><span class=\"o\">.</span><span class=\"n\">__call__</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">,</span> <span class=\"n\">environ</span><span class=\"p\">,</span> <span class=\"n\">start_response</span><span class=\"p\">)</span><br>\n<span class=\"source-highlight\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class=\"k\">finally</span><span class=\"p\">:</span></span><br>\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class=\"n\">model</span><span class=\"o\">.</span><span class=\"n\">Session</span><span class=\"o\">.</span><span class=\"n\">remove</span><span class=\"p\">()</span></div><div class=\"source highlight\" source-type=\"short\"><a onclick=\"return switch_source(this, 'short')\" class=\"switch_source\" href=\"#\">&gt;&gt;&nbsp; </a><span class=\"n\">res</span> <span class=\"o\">=</span> <span class=\"n\">WSGIController</span><span class=\"o\">.</span><span class=\"n\">__call__</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">,</span> <span class=\"n\">environ</span><span class=\"p\">,</span> <span class=\"n\">start_response</span><span class=\"p\">)</span></div>\n</div>\n<div class=\"frame\">\nModule <span class=\"module\" title=\"/usr/lib/ckan/local/lib/python2.7/site-packages/pylons/controllers/core.py\">pylons.controllers.core</span>:<b>221</b> in <code>__call__</code>  <a href=\"#\" class=\"show_locals\" tbid=\"140449073848832\" onClick=\"return showFrame(this)\">&nbsp; &nbsp; <img src=\"http://boot2docker:5462/_debug/media/plus.jpg\" border=0 width=9 height=9> &nbsp; &nbsp;</a> <a href=\"#\" class=\"\" location=\"pylons.controllers.core:221\" onClick=\"return showSource(this)\">view</a><br>\n<div style=\"display: none\" class=\"source highlight\" source-type=\"long\"><a class=\"switch_source\" onclick=\"return switch_source(this, 'long')\" href=\"#\">&lt;&lt;&nbsp; </a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class=\"k\">return</span> <span class=\"n\">response</span><span class=\"p\">(</span><span class=\"n\">environ</span><span class=\"p\">,</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">start_response</span><span class=\"p\">)</span><br>\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>\n<span class=\"source-highlight\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class=\"n\">response</span> <span class=\"o\">=</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">_dispatch_call</span><span class=\"p\">()</span></span><br>\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class=\"k\">if</span> <span class=\"ow\">not</span> <span class=\"n\">start_response_called</span><span class=\"p\">:</span><br>\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">start_response</span> <span class=\"o\">=</span> <span class=\"n\">start_response</span></div><div class=\"source highlight\" source-type=\"short\"><a onclick=\"return switch_source(this, 'short')\" class=\"switch_source\" href=\"#\">&gt;&gt;&nbsp; </a><span class=\"n\">response</span> <span class=\"o\">=</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">_dispatch_call</span><span class=\"p\">()</span></div>\n</div>\n<div class=\"frame\">\nModule <span class=\"module\" title=\"/usr/lib/ckan/local/lib/python2.7/site-packages/pylons/controllers/core.py\">pylons.controllers.core</span>:<b>172</b> in <code>_dispatch_call</code>  <a href=\"#\" class=\"show_locals\" tbid=\"140449073851136\" onClick=\"return showFrame(this)\">&nbsp; &nbsp; <img src=\"http://boot2docker:5462/_debug/media/plus.jpg\" border=0 width=9 height=9> &nbsp; &nbsp;</a> <a href=\"#\" class=\"\" location=\"pylons.controllers.core:172\" onClick=\"return showSource(this)\">view</a><br>\n<div style=\"display: none\" class=\"source highlight\" source-type=\"long\"><a class=\"switch_source\" onclick=\"return switch_source(this, 'long')\" href=\"#\">&lt;&lt;&nbsp; </a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class=\"n\">req</span><span class=\"o\">.</span><span class=\"n\">environ</span><span class=\"p\">[</span><span class=\"s\">&#39;pylons.action_method&#39;</span><span class=\"p\">]</span> <span class=\"o\">=</span> <span class=\"n\">func</span><br>\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>\n<span class=\"source-highlight\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class=\"n\">response</span> <span class=\"o\">=</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">_inspect_call</span><span class=\"p\">(</span><span class=\"n\">func</span><span class=\"p\">)</span></span><br>\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class=\"k\">else</span><span class=\"p\">:</span><br>\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class=\"k\">if</span> <span class=\"n\">log_debug</span><span class=\"p\">:</span></div><div class=\"source highlight\" source-type=\"short\"><a onclick=\"return switch_source(this, 'short')\" class=\"switch_source\" href=\"#\">&gt;&gt;&nbsp; </a><span class=\"n\">response</span> <span class=\"o\">=</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">_inspect_call</span><span class=\"p\">(</span><span class=\"n\">func</span><span class=\"p\">)</span></div>\n</div>\n<div class=\"frame\">\nModule <span class=\"module\" title=\"/usr/lib/ckan/local/lib/python2.7/site-packages/pylons/controllers/core.py\">pylons.controllers.core</span>:<b>107</b> in <code>_inspect_call</code>  <a href=\"#\" class=\"show_locals\" tbid=\"140449073850560\" onClick=\"return showFrame(this)\">&nbsp; &nbsp; <img src=\"http://boot2docker:5462/_debug/media/plus.jpg\" border=0 width=9 height=9> &nbsp; &nbsp;</a> <a href=\"#\" class=\"\" location=\"pylons.controllers.core:107\" onClick=\"return showSource(this)\">view</a><br>\n<div style=\"display: none\" class=\"source highlight\" source-type=\"long\"><a class=\"switch_source\" onclick=\"return switch_source(this, 'long')\" href=\"#\">&lt;&lt;&nbsp; </a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class=\"n\">func</span><span class=\"o\">.</span><span class=\"n\">__name__</span><span class=\"p\">,</span> <span class=\"n\">args</span><span class=\"p\">)</span><br>\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class=\"k\">try</span><span class=\"p\">:</span><br>\n<span class=\"source-highlight\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class=\"n\">result</span> <span class=\"o\">=</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">_perform_call</span><span class=\"p\">(</span><span class=\"n\">func</span><span class=\"p\">,</span> <span class=\"n\">args</span><span class=\"p\">)</span></span><br>\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class=\"k\">except</span> <span class=\"n\">HTTPException</span><span class=\"p\">,</span> <span class=\"n\">httpe</span><span class=\"p\">:</span><br>\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class=\"k\">if</span> <span class=\"n\">log_debug</span><span class=\"p\">:</span></div><div class=\"source highlight\" source-type=\"short\"><a onclick=\"return switch_source(this, 'short')\" class=\"switch_source\" href=\"#\">&gt;&gt;&nbsp; </a><span class=\"n\">result</span> <span class=\"o\">=</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">_perform_call</span><span class=\"p\">(</span><span class=\"n\">func</span><span class=\"p\">,</span> <span class=\"n\">args</span><span class=\"p\">)</span></div>\n</div>\n<div class=\"frame\">\nModule <span class=\"module\" title=\"/usr/lib/ckan/local/lib/python2.7/site-packages/pylons/controllers/core.py\">pylons.controllers.core</span>:<b>60</b> in <code>_perform_call</code>  <a href=\"#\" class=\"show_locals\" tbid=\"140449073850992\" onClick=\"return showFrame(this)\">&nbsp; &nbsp; <img src=\"http://boot2docker:5462/_debug/media/plus.jpg\" border=0 width=9 height=9> &nbsp; &nbsp;</a> <a href=\"#\" class=\"\" location=\"pylons.controllers.core:60\" onClick=\"return showSource(this)\">view</a><br>\n<div style=\"display: none\" class=\"source highlight\" source-type=\"long\"><a class=\"switch_source\" onclick=\"return switch_source(this, 'long')\" href=\"#\">&lt;&lt;&nbsp; </a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class=\"sd\">&quot;&quot;&quot;Hide the traceback for everything above this method&quot;&quot;&quot;</span><br>\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class=\"n\">__traceback_hide__</span> <span class=\"o\">=</span> <span class=\"s\">&#39;before_and_this&#39;</span><br>\n<span class=\"source-highlight\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class=\"k\">return</span> <span class=\"n\">func</span><span class=\"p\">(</span><span class=\"o\">**</span><span class=\"n\">args</span><span class=\"p\">)</span></span><br>\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class=\"k\">def</span> <span class=\"nf\">_inspect_call</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">,</span> <span class=\"n\">func</span><span class=\"p\">):</span></div><div class=\"source highlight\" source-type=\"short\"><a onclick=\"return switch_source(this, 'short')\" class=\"switch_source\" href=\"#\">&gt;&gt;&nbsp; </a><span class=\"k\">return</span> <span class=\"n\">func</span><span class=\"p\">(</span><span class=\"o\">**</span><span class=\"n\">args</span><span class=\"p\">)</span></div>\n</div>\n<div class=\"frame\">\nModule <span class=\"module\" title=\"/project/ckan/ckan/controllers/api.py\">ckan.controllers.api</span>:<b>197</b> in <code>action</code>  <a href=\"#\" class=\"show_locals\" tbid=\"140449073848904\" onClick=\"return showFrame(this)\">&nbsp; &nbsp; <img src=\"http://boot2docker:5462/_debug/media/plus.jpg\" border=0 width=9 height=9> &nbsp; &nbsp;</a> <a href=\"#\" class=\"\" location=\"ckan.controllers.api:197\" onClick=\"return showSource(this)\">view</a><br>\n<div style=\"display: none\" class=\"source highlight\" source-type=\"long\"><a class=\"switch_source\" onclick=\"return switch_source(this, 'long')\" href=\"#\">&lt;&lt;&nbsp; </a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class=\"k\">del</span> <span class=\"n\">request_data</span><span class=\"p\">[</span><span class=\"s\">&#39;callback&#39;</span><span class=\"p\">]</span><br>\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class=\"k\">try</span><span class=\"p\">:</span><br>\n<span class=\"source-highlight\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class=\"n\">result</span> <span class=\"o\">=</span> <span class=\"n\">function</span><span class=\"p\">(</span><span class=\"n\">context</span><span class=\"p\">,</span> <span class=\"n\">request_data</span><span class=\"p\">)</span></span><br>\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class=\"n\">return_dict</span><span class=\"p\">[</span><span class=\"s\">&#39;success&#39;</span><span class=\"p\">]</span> <span class=\"o\">=</span> <span class=\"bp\">True</span><br>\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class=\"n\">return_dict</span><span class=\"p\">[</span><span class=\"s\">&#39;result&#39;</span><span class=\"p\">]</span> <span class=\"o\">=</span> <span class=\"n\">result</span></div><div class=\"source highlight\" source-type=\"short\"><a onclick=\"return switch_source(this, 'short')\" class=\"switch_source\" href=\"#\">&gt;&gt;&nbsp; </a><span class=\"n\">result</span> <span class=\"o\">=</span> <span class=\"n\">function</span><span class=\"p\">(</span><span class=\"n\">context</span><span class=\"p\">,</span> <span class=\"n\">request_data</span><span class=\"p\">)</span></div>\n</div>\n<div class=\"frame\">\nModule <span class=\"module\" title=\"/project/ckan/ckan/logic/__init__.py\">ckan.logic</span>:<b>424</b> in <code>wrapped</code>  <a href=\"#\" class=\"show_locals\" tbid=\"140449073848688\" onClick=\"return showFrame(this)\">&nbsp; &nbsp; <img src=\"http://boot2docker:5462/_debug/media/plus.jpg\" border=0 width=9 height=9> &nbsp; &nbsp;</a> <a href=\"#\" class=\"\" location=\"ckan.logic:424\" onClick=\"return showSource(this)\">view</a><br>\n<div style=\"display: none\" class=\"source highlight\" source-type=\"long\"><a class=\"switch_source\" onclick=\"return switch_source(this, 'long')\" href=\"#\">&lt;&lt;&nbsp; </a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class=\"c\"># check_access(action_name, context, data_dict=None)</span><br>\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class=\"n\">result</span> <span class=\"o\">=</span> <span class=\"n\">_action</span><span class=\"p\">(</span><span class=\"n\">context</span><span class=\"p\">,</span> <span class=\"n\">data_dict</span><span class=\"p\">,</span> <span class=\"o\">**</span><span class=\"n\">kw</span><span class=\"p\">)</span><br>\n<span class=\"source-highlight\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class=\"k\">try</span><span class=\"p\">:</span></span><br>\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class=\"n\">audit</span> <span class=\"o\">=</span> <span class=\"n\">context</span><span class=\"p\">[</span><span class=\"s\">&#39;__auth_audit&#39;</span><span class=\"p\">][</span><span class=\"o\">-</span><span class=\"mi\">1</span><span class=\"p\">]</span></div><div class=\"source highlight\" source-type=\"short\"><a onclick=\"return switch_source(this, 'short')\" class=\"switch_source\" href=\"#\">&gt;&gt;&nbsp; </a><span class=\"n\">result</span> <span class=\"o\">=</span> <span class=\"n\">_action</span><span class=\"p\">(</span><span class=\"n\">context</span><span class=\"p\">,</span> <span class=\"n\">data_dict</span><span class=\"p\">,</span> <span class=\"o\">**</span><span class=\"n\">kw</span><span class=\"p\">)</span></div>\n</div>\n<div class=\"frame\">\nModule <span class=\"module\" title=\"/project/ckan/ckanext/datastore/logic/action.py\">ckanext.datastore.logic.action</span>:<b>212</b> in <code>datastore_upsert</code>  <a href=\"#\" class=\"show_locals\" tbid=\"140449073852000\" onClick=\"return showFrame(this)\">&nbsp; &nbsp; <img src=\"http://boot2docker:5462/_debug/media/plus.jpg\" border=0 width=9 height=9> &nbsp; &nbsp;</a> <a href=\"#\" class=\"\" location=\"ckanext.datastore.logic.action:212\" onClick=\"return showSource(this)\">view</a><br>\n<div style=\"display: none\" class=\"source highlight\" source-type=\"long\"><a class=\"switch_source\" onclick=\"return switch_source(this, 'long')\" href=\"#\">&lt;&lt;&nbsp; </a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class=\"p\">))</span><br>\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>\n<span class=\"source-highlight\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class=\"n\">result</span> <span class=\"o\">=</span> <span class=\"n\">db</span><span class=\"o\">.</span><span class=\"n\">upsert</span><span class=\"p\">(</span><span class=\"n\">context</span><span class=\"p\">,</span> <span class=\"n\">data_dict</span><span class=\"p\">)</span></span><br>\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class=\"n\">result</span><span class=\"o\">.</span><span class=\"n\">pop</span><span class=\"p\">(</span><span class=\"s\">&#39;id&#39;</span><span class=\"p\">,</span> <span class=\"bp\">None</span><span class=\"p\">)</span><br>\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class=\"n\">result</span><span class=\"o\">.</span><span class=\"n\">pop</span><span class=\"p\">(</span><span class=\"s\">&#39;connection_url&#39;</span><span class=\"p\">)</span></div><div class=\"source highlight\" source-type=\"short\"><a onclick=\"return switch_source(this, 'short')\" class=\"switch_source\" href=\"#\">&gt;&gt;&nbsp; </a><span class=\"n\">result</span> <span class=\"o\">=</span> <span class=\"n\">db</span><span class=\"o\">.</span><span class=\"n\">upsert</span><span class=\"p\">(</span><span class=\"n\">context</span><span class=\"p\">,</span> <span class=\"n\">data_dict</span><span class=\"p\">)</span></div>\n</div>\n<div class=\"frame\">\nModule <span class=\"module\" title=\"/project/ckan/ckanext/datastore/db.py\">ckanext.datastore.db</span>:<b>1121</b> in <code>upsert</code>  <a href=\"#\" class=\"show_locals\" tbid=\"140449073849048\" onClick=\"return showFrame(this)\">&nbsp; &nbsp; <img src=\"http://boot2docker:5462/_debug/media/plus.jpg\" border=0 width=9 height=9> &nbsp; &nbsp;</a> <a href=\"#\" class=\"\" location=\"ckanext.datastore.db:1121\" onClick=\"return showSource(this)\">view</a><br>\n<div style=\"display: none\" class=\"source highlight\" source-type=\"long\"><a class=\"switch_source\" onclick=\"return switch_source(this, 'long')\" href=\"#\">&lt;&lt;&nbsp; </a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class=\"n\">context</span><span class=\"p\">[</span><span class=\"s\">&#39;connection&#39;</span><span class=\"p\">]</span><span class=\"o\">.</span><span class=\"n\">execute</span><span class=\"p\">(</span><br>\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class=\"s\">u&#39;SET LOCAL statement_timeout TO {0}&#39;</span><span class=\"o\">.</span><span class=\"n\">format</span><span class=\"p\">(</span><span class=\"n\">timeout</span><span class=\"p\">))</span><br>\n<span class=\"source-highlight\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class=\"n\">upsert_data</span><span class=\"p\">(</span><span class=\"n\">context</span><span class=\"p\">,</span> <span class=\"n\">data_dict</span><span class=\"p\">)</span></span><br>\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class=\"n\">trans</span><span class=\"o\">.</span><span class=\"n\">commit</span><span class=\"p\">()</span><br>\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class=\"k\">return</span> <span class=\"n\">_unrename_json_field</span><span class=\"p\">(</span><span class=\"n\">data_dict</span><span class=\"p\">)</span></div><div class=\"source highlight\" source-type=\"short\"><a onclick=\"return switch_source(this, 'short')\" class=\"switch_source\" href=\"#\">&gt;&gt;&nbsp; </a><span class=\"n\">upsert_data</span><span class=\"p\">(</span><span class=\"n\">context</span><span class=\"p\">,</span> <span class=\"n\">data_dict</span><span class=\"p\">)</span></div>\n</div>\n<div class=\"frame\">\nModule <span class=\"module\" title=\"/project/ckan/ckanext/datastore/db.py\">ckanext.datastore.db</span>:<b>656</b> in <code>upsert_data</code>  <a href=\"#\" class=\"show_locals\" tbid=\"140449073851856\" onClick=\"return showFrame(this)\">&nbsp; &nbsp; <img src=\"http://boot2docker:5462/_debug/media/plus.jpg\" border=0 width=9 height=9> &nbsp; &nbsp;</a> <a href=\"#\" class=\"\" location=\"ckanext.datastore.db:656\" onClick=\"return showSource(this)\">view</a><br>\n<div style=\"display: none\" class=\"source highlight\" source-type=\"long\"><a class=\"switch_source\" onclick=\"return switch_source(this, 'long')\" href=\"#\">&lt;&lt;&nbsp; </a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class=\"k\">except</span> <span class=\"n\">sqlalchemy</span><span class=\"o\">.</span><span class=\"n\">exc</span><span class=\"o\">.</span><span class=\"n\">DataError</span> <span class=\"k\">as</span> <span class=\"n\">err</span><span class=\"p\">:</span><br>\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class=\"k\">raise</span> <span class=\"n\">InvalidDataError</span><span class=\"p\">(</span><br>\n<span class=\"source-highlight\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class=\"n\">toolkit</span><span class=\"o\">.</span><span class=\"n\">_</span><span class=\"p\">(</span><span class=\"s\">&quot;The data was invalid (for example: a numeric value &quot;</span></span><br>\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class=\"s\">&quot;is out of range or was inserted into a text field).&quot;</span><br>\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class=\"p\">))</span></div><div class=\"source highlight\" source-type=\"short\"><a onclick=\"return switch_source(this, 'short')\" class=\"switch_source\" href=\"#\">&gt;&gt;&nbsp; </a><span class=\"n\">toolkit</span><span class=\"o\">.</span><span class=\"n\">_</span><span class=\"p\">(</span><span class=\"s\">&quot;The data was invalid (for example: a numeric value &quot;</span></div>\n</div>\n<b>InvalidDataError: The data was invalid (for example: a numeric value is out of range or was inserted into a text field).</b><br>\n        </div>\n        <div id=\"long_text_version\" class=\"hidden-data\">\n        <textarea style=\"width: 100%\" rows=56 cols=60>URL: http://boot2docker:5462/api/3/action/datastore_upsert\nFile '/usr/lib/ckan/local/lib/python2.7/site-packages/weberror/evalexception.py', line 431 in respond\n  app_iter = self.application(environ, detect_start_response)\nFile '/usr/lib/ckan/local/lib/python2.7/site-packages/webob/dec.py', line 147 in __call__\n  resp = self.call_func(req, *args, **self.kwargs)\nFile '/usr/lib/ckan/local/lib/python2.7/site-packages/webob/dec.py', line 208 in call_func\n  return self.func(req, *args, **kwargs)\nFile '/usr/lib/ckan/local/lib/python2.7/site-packages/fanstatic/publisher.py', line 234 in __call__\n  return request.get_response(self.app)\nFile '/usr/lib/ckan/local/lib/python2.7/site-packages/webob/request.py', line 1053 in get_response\n  application, catch_exc_info=False)\nFile '/usr/lib/ckan/local/lib/python2.7/site-packages/webob/request.py', line 1022 in call_application\n  app_iter = application(self.environ, start_response)\nFile '/usr/lib/ckan/local/lib/python2.7/site-packages/webob/dec.py', line 147 in __call__\n  resp = self.call_func(req, *args, **self.kwargs)\nFile '/usr/lib/ckan/local/lib/python2.7/site-packages/webob/dec.py', line 208 in call_func\n  return self.func(req, *args, **kwargs)\nFile '/usr/lib/ckan/local/lib/python2.7/site-packages/fanstatic/injector.py', line 54 in __call__\n  response = request.get_response(self.app)\nFile '/usr/lib/ckan/local/lib/python2.7/site-packages/webob/request.py', line 1053 in get_response\n  application, catch_exc_info=False)\nFile '/usr/lib/ckan/local/lib/python2.7/site-packages/webob/request.py', line 1022 in call_application\n  app_iter = application(self.environ, start_response)\nFile '/usr/lib/ckan/local/lib/python2.7/site-packages/beaker/middleware.py', line 73 in __call__\n  return self.app(environ, start_response)\nFile '/usr/lib/ckan/local/lib/python2.7/site-packages/beaker/middleware.py', line 155 in __call__\n  return self.wrap_app(environ, session_start_response)\nFile '/usr/lib/ckan/local/lib/python2.7/site-packages/routes/middleware.py', line 131 in __call__\n  response = self.app(environ, start_response)\nFile '/usr/lib/ckan/local/lib/python2.7/site-packages/pylons/wsgiapp.py', line 125 in __call__\n  response = self.dispatch(controller, environ, start_response)\nFile '/usr/lib/ckan/local/lib/python2.7/site-packages/pylons/wsgiapp.py', line 324 in dispatch\n  return controller(environ, start_response)\nFile '/project/ckan/ckan/controllers/api.py', line 70 in __call__\n  return base.BaseController.__call__(self, environ, start_response)\nFile '/project/ckan/ckan/lib/base.py', line 338 in __call__\n  res = WSGIController.__call__(self, environ, start_response)\nFile '/usr/lib/ckan/local/lib/python2.7/site-packages/pylons/controllers/core.py', line 221 in __call__\n  response = self._dispatch_call()\nFile '/usr/lib/ckan/local/lib/python2.7/site-packages/pylons/controllers/core.py', line 172 in _dispatch_call\n  response = self._inspect_call(func)\nFile '/usr/lib/ckan/local/lib/python2.7/site-packages/pylons/controllers/core.py', line 107 in _inspect_call\n  result = self._perform_call(func, args)\nFile '/usr/lib/ckan/local/lib/python2.7/site-packages/pylons/controllers/core.py', line 60 in _perform_call\n  return func(**args)\nFile '/project/ckan/ckan/controllers/api.py', line 197 in action\n  result = function(context, request_data)\nFile '/project/ckan/ckan/logic/__init__.py', line 424 in wrapped\n  result = _action(context, data_dict, **kw)\nFile '/project/ckan/ckanext/datastore/logic/action.py', line 212 in datastore_upsert\n  result = db.upsert(context, data_dict)\nFile '/project/ckan/ckanext/datastore/db.py', line 1121 in upsert\n  upsert_data(context, data_dict)\nFile '/project/ckan/ckanext/datastore/db.py', line 656 in upsert_data\n  toolkit._(\"The data was invalid (for example: a numeric value \"\nInvalidDataError: The data was invalid (for example: a numeric value is out of range or was inserted into a text field).</textarea>\n        </div>\n        \n    \n<div class=\"feature-highlight\">\n<b>Extra Features</b>\n<table border=\"0\">\n<tr><td><a href=\"#\" onclick=\"return false\" class=\"switch_source\" style=\"cursor: default\">&gt;&gt;</a></td><td>Display the lines of code near each part of the traceback</td></tr>\n<tr><td><img src=\"http://boot2docker:5462/_debug/media/plus.jpg\" /></td><td>Show a debug prompt to allow you to directly debug the code at the traceback</td></tr>\n</table>\n</div>\n\n            </div>\n        </div>\n        <br class=\"clear\" />\n        <div class=\"hr\"><hr class=\"clear\" /></div>\n    </div>\n    <!-- Footer -->\n    <script type=\"text/javascript\" src=\"http://boot2docker:5462/_debug/media/jquery-1.2.3.pack.js\"></script>\n    <script type=\"text/javascript\" src=\"http://boot2docker:5462/_debug/media/debug.js\"></script>\n    <div id=\"footer\"><script src=\"http://boot2docker:5462/_debug/media/pylons/javascripts/traceback.js\"></script>\n<script>\nvar TRACEBACK = {\n    uri: \"http://boot2docker:5462/_debug\",\n    host: \"pylonshq.com\",\n    traceback: \"/tracebacks\"\n}\n</script>\n<div id=\"service_widget\">\n<h2 class=\"assistance\">Online Assistance</h2>\n<div id=\"nv\">\n<ul id=\"supportnav\">\n    <li class=\"nav active\"><a class=\"overview\" href=\"#\">Overview</a></li>\n    <li class=\"nav\"><a class=\"search\" href=\"#\">Search Mail Lists</a></li>\n    <li class=\"nav\"><a class=\"posttraceback\" href=\"#\">Post Traceback</a></li>\n</ul>\n</div>\n<div class=\"clearfix\">&nbsp;</div>\n<div class=\"overviewtab\">\n<b>Looking for help?</b>\n\n<p>Here are a few tips for troubleshooting if the above traceback isn't\nhelping out.</p>\n\n<ol>\n<li>Search the mail list</li>\n<li>Post the traceback, and ask for help on IRC</li>\n<li>Post a message to the mail list, referring to the posted traceback</li>\n\n</div>\n<div class=\"posttracebacktab\">\n<p><b>Note:</b> Clicking this button will post your traceback to the PylonsHQ website.\nThe traceback includes the module names, Python version, and lines of code that you\ncan see above. All tracebacks are posted anonymously unless you're logged into the\nPylonsHQ website in this browser.</p>\n<input type=\"button\" href=\"#\" class=\"submit_traceback\" value=\"Send TraceBack to PylonsHQ\" style=\"text-align: center;\"/>\n</div>\n\n<div class=\"searchtab\">\n<p>The following mail lists will be searched:<br />\n<input type=\"checkbox\" name=\"lists\" value=\"pylons\" checked=\"checked\" /> Pylons<br />\n<input type=\"checkbox\" name=\"lists\" value=\"python\" /> Python<br />\n<input type=\"checkbox\" name=\"lists\" value=\"mako\" /> Mako<br />\n<input type=\"checkbox\" name=\"lists\" value=\"sqlalchemy\" /> SQLAlchemy</p>\n<p class=\"query\">for: <input type=\"text\" name=\"query\" class=\"query\" /></p>\n\n<p><input type=\"submit\" value=\"Search\" /></p>\n<div class=\"searchresults\">\n\n</div>\n</div>\n\n</div>\n<div id=\"pylons_logo\"><img src=\"http://boot2docker:5462/_debug/media/pylons/img/pylons-powered-02.png\" /></div>\n<div class=\"credits\">Pylons version (not installed)</div></div>\n</body>\n</html>\n"
dpm ERR! CKANJS API Error. HTTP code 500. Message: "<!DOCTYPE html PUBLIC \"-//W3C//DTD XHTML 1.0 Strict//EN\" \"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd\">\n<html xmlns=\"http://www.w3.org/1999/xhtml\" xml:lang=\"en\" lang=\"en\">\n<head>\n <title>Server Error</title>\n\n<script type=\"text/javascript\">\n  debug_base = 'http://boot2docker:5462/_debug';\n  debug_count = 1431466927;\n</script>\n\n<!-- CSS Imports -->\n<link rel=\"stylesheet\" href=\"http://boot2docker:5462/_debug/media/traceback.css\" type=\"text/css\" media=\"screen\" />\n<!-- Pygments highlighting -->\n<style type=\"text/css\">\n.highlight .hll { background-color: #ffffcc }\n.highlight  { background: #f8f8f8; }\n.highlight .c { color: #408080; font-style: italic } /* Comment */\n.highlight .err { border: 1px solid #FF0000 } /* Error */\n.highlight .k { color: #008000; font-weight: bold } /* Keyword */\n.highlight .o { color: #666666 } /* Operator */\n.highlight .cm { color: #408080; font-style: italic } /* Comment.Multiline */\n.highlight .cp { color: #BC7A00 } /* Comment.Preproc */\n.highlight .c1 { color: #408080; font-style: italic } /* Comment.Single */\n.highlight .cs { color: #408080; font-style: italic } /* Comment.Special */\n.highlight .gd { color: #A00000 } /* Generic.Deleted */\n.highlight .ge { font-style: italic } /* Generic.Emph */\n.highlight .gr { color: #FF0000 } /* Generic.Error */\n.highlight .gh { color: #000080; font-weight: bold } /* Generic.Heading */\n.highlight .gi { color: #00A000 } /* Generic.Inserted */\n.highlight .go { color: #888888 } /* Generic.Output */\n.highlight .gp { color: #000080; font-weight: bold } /* Generic.Prompt */\n.highlight .gs { font-weight: bold } /* Generic.Strong */\n.highlight .gu { color: #800080; font-weight: bold } /* Generic.Subheading */\n.highlight .gt { color: #0044DD } /* Generic.Traceback */\n.highlight .kc { color: #008000; font-weight: bold } /* Keyword.Constant */\n.highlight .kd { color: #008000; font-weight: bold } /* Keyword.Declaration */\n.highlight .kn { color: #008000; font-weight: bold } /* Keyword.Namespace */\n.highlight .kp { color: #008000 } /* Keyword.Pseudo */\n.highlight .kr { color: #008000; font-weight: bold } /* Keyword.Reserved */\n.highlight .kt { color: #B00040 } /* Keyword.Type */\n.highlight .m { color: #666666 } /* Literal.Number */\n.highlight .s { color: #BA2121 } /* Literal.String */\n.highlight .na { color: #7D9029 } /* Name.Attribute */\n.highlight .nb { color: #008000 } /* Name.Builtin */\n.highlight .nc { color: #0000FF; font-weight: bold } /* Name.Class */\n.highlight .no { color: #880000 } /* Name.Constant */\n.highlight .nd { color: #AA22FF } /* Name.Decorator */\n.highlight .ni { color: #999999; font-weight: bold } /* Name.Entity */\n.highlight .ne { color: #D2413A; font-weight: bold } /* Name.Exception */\n.highlight .nf { color: #0000FF } /* Name.Function */\n.highlight .nl { color: #A0A000 } /* Name.Label */\n.highlight .nn { color: #0000FF; font-weight: bold } /* Name.Namespace */\n.highlight .nt { color: #008000; font-weight: bold } /* Name.Tag */\n.highlight .nv { color: #19177C } /* Name.Variable */\n.highlight .ow { color: #AA22FF; font-weight: bold } /* Operator.Word */\n.highlight .w { color: #bbbbbb } /* Text.Whitespace */\n.highlight .mf { color: #666666 } /* Literal.Number.Float */\n.highlight .mh { color: #666666 } /* Literal.Number.Hex */\n.highlight .mi { color: #666666 } /* Literal.Number.Integer */\n.highlight .mo { color: #666666 } /* Literal.Number.Oct */\n.highlight .sb { color: #BA2121 } /* Literal.String.Backtick */\n.highlight .sc { color: #BA2121 } /* Literal.String.Char */\n.highlight .sd { color: #BA2121; font-style: italic } /* Literal.String.Doc */\n.highlight .s2 { color: #BA2121 } /* Literal.String.Double */\n.highlight .se { color: #BB6622; font-weight: bold } /* Literal.String.Escape */\n.highlight .sh { color: #BA2121 } /* Literal.String.Heredoc */\n.highlight .si { color: #BB6688; font-weight: bold } /* Literal.String.Interpol */\n.highlight .sx { color: #008000 } /* Literal.String.Other */\n.highlight .sr { color: #BB6688 } /* Literal.String.Regex */\n.highlight .s1 { color: #BA2121 } /* Literal.String.Single */\n.highlight .ss { color: #19177C } /* Literal.String.Symbol */\n.highlight .bp { color: #008000 } /* Name.Builtin.Pseudo */\n.highlight .vc { color: #19177C } /* Name.Variable.Class */\n.highlight .vg { color: #19177C } /* Name.Variable.Global */\n.highlight .vi { color: #19177C } /* Name.Variable.Instance */\n.highlight .il { color: #666666 } /* Literal.Number.Integer.Long */\n</style>\n\n<link rel=\"stylesheet\" href=\"http://boot2docker:5462/_debug/media/pylons/style/itraceback.css\" type=\"text/css\" media=\"screen\" />\n\n</head>\n\n<body id=\"documentation\" onload=\"switch_display('traceback_data')\">\n<!-- We are only using a table to ensure old browsers see the message correctly -->\n\n<noscript>\n<div style=\"border-bottom: 1px solid #808080\">\n<div style=\"border-bottom: 1px solid #404040\">\n<table width=\"100%\" border=\"0\" cellpadding=\"0\" bgcolor=\"#FFFFE1\"><tr><td>&nbsp;</td><td><span style=\"padding: 0px; margin: 0px; font-family: Tahoma, sans-serif; font-size: 11px\">Warning, your browser does not support JavaScript so you will not be able to use the interactive debugging on this page.</span></td></tr></table>\n</div>\n</div>\n</noscript>\n\n    <!-- Top anchor -->\n    <a name=\"top\"></a>\n\n    <!-- Main Content -->\n    <div id=\"nav-bar\">\n\n        <!-- Section Navigation -->\n        <h4 class=\"invisible\">Section Links</h4>\n\n            <ul id=\"navlist\">\n               <!--   -->\n               <li id=\"source_data_tab\"><a href=\"#source_data\" onclick=\"javascript:return switch_display('source_data');\" accesskey=\"4\" id=\"source_data_link\">Source</a></li>\n               <li id=\"template_data_tab\"><a href=\"#template_data\" onclick=\"javascript:return switch_display('template_data');\" accesskey=\"3\" id=\"template_data_link\">Template</a></li>\n               <li id=\"extra_data_tab\"><a href=\"#extra_data\" onclick=\"javascript:return switch_display('extra_data');\" id=\"extra_data_link\" accesskey=\"2\" >Extra Data</a></li>\n               <li id=\"traceback_data_tab\" class=\"active\"><a href=\"#traceback_data\" onclick=\"javascript:return switch_display('traceback_data');\" id=\"traceback_data_link\" class=\"active\" accesskey=\"1\">Traceback</a></li>\n            </ul>\n    </div>\n    <div id=\"main-content\">\n        <div class=\"hr\"><hr class=\"hr\" /></div>\n        <div class=\"content-padding\">\n            <div id=\"source_data\" class=\"hidden-data\">\n              There is no source code to display. Click a 'view' link in the <a href=\"#traceback_data\" onclick=\"javascript:switch_display('traceback_data')\" id=\"traceback_data_link\" class=\"active\" accesskey=\"1\">Traceback</a> tab to load source code.\n            </div>\n            <div id=\"extra_data\" class=\"hidden-data\">\n                <h1 class=\"first\"><a name=\"content\"></a>Extra Data</h1>\n                <table class=\"variables\">\n<tr class=\"header\"><th colspan=\"2\">CGI Variables</th></tr>\n<tr class=\"odd\"><td>CKAN_CURRENT_URL</td>\n<td><tt>'/api/3/action/datastore_upsert'</tt></td></tr>\n<tr class=\"even\"><td>CKAN_LANG</td>\n<td><tt>'en'</tt></td></tr>\n<tr class=\"odd\"><td>CKAN_LANG_IS_DEFAULT</td>\n<td><tt>True</tt></td></tr>\n<tr class=\"even\"><td>CONTENT_LENGTH</td>\n<td><tt>'350807'</tt></td></tr>\n<tr class=\"odd\"><td>CONTENT_TYPE</td>\n<td><tt>'application/json; charset=utf-8'</tt></td></tr>\n<tr class=\"even\"><td>HTTP_ACCEPT</td>\n<td><tt>'application/json'</tt></td></tr>\n<tr class=\"odd\"><td>HTTP_CONNECTION</td>\n<td><tt>'keep-alive'</tt></td></tr>\n<tr class=\"even\"><td>HTTP_HOST</td>\n<td><tt>'boot2docker:5462'</tt></td></tr>\n<tr class=\"odd\"><td>HTTP_X_CKAN_API_KEY</td>\n<td><tt>'ea8de489-11f3-4c30-afaf-480e3fafd422'</tt></td></tr>\n<tr class=\"even\"><td>PATH_INFO</td>\n<td><tt>'/api/3/action/datastore_upsert'</tt></td></tr>\n<tr class=\"odd\"><td>REMOTE_ADDR</td>\n<td><tt>'192.168.59.3'</tt></td></tr>\n<tr class=\"even\"><td>REQUEST_METHOD</td>\n<td><tt>'POST'</tt></td></tr>\n<tr class=\"odd\"><td>SERVER_NAME</td>\n<td><tt>'0.0.0.0'</tt></td></tr>\n<tr class=\"even\"><td>SERVER_PORT</td>\n<td><tt>'5000'</tt></td></tr>\n<tr class=\"odd\"><td>SERVER_PROTOCOL</td>\n<td><tt>'HTTP/1.1'</tt></td></tr>\n</table>\n                <h1 class=\"first\"><a name=\"content\"></a>Extra Data</h1>\n                <table class=\"variables\">\n<tr class=\"header\"><th colspan=\"2\">WSGI Variables</th></tr>\n<tr class=\"odd\"><td>application</td>\n<td><tt>&lt;fanstatic.publisher.Delegator object at 0x7fbcf38f1a50&gt;</tt></td></tr>\n<tr class=\"even\"><td>beaker.cache</td>\n<td><tt>&lt;beaker.cache.CacheManager object at 0x7fbcf38f1810&gt;</tt></td></tr>\n<tr class=\"odd\"><td>beaker.get_session</td>\n<td><tt>&lt;bound method SessionMiddleware._get_session of &lt;beaker.middleware.SessionMiddleware object at 0x7fbcf37a7ad0&gt;&gt;</tt></td></tr>\n<tr class=\"even\"><td>beaker.session</td>\n<td><tt>{'_accessed_time': 1431469734.502756, '_creation_time': 1431469734.502756}</tt></td></tr>\n<tr class=\"odd\"><td>fanstatic.needed</td>\n<td><tt>&lt;fanstatic.core.NeededResources object at 0x7fbcd95db590&gt;</tt></td></tr>\n<tr class=\"even\"><td>paste.cookies</td>\n<td><tt>(&lt;SimpleCookie: &gt;, '')</tt></td></tr>\n<tr class=\"odd\"><td>paste.evalexception</td>\n<td><tt>&lt;weberror.evalexception.EvalException object at 0x7fbcf38f1850&gt;</tt></td></tr>\n<tr class=\"even\"><td>paste.evalexception.debug_count</td>\n<td><tt>1431466927</tt></td></tr>\n<tr class=\"odd\"><td>paste.httpserver.thread_pool</td>\n<td><tt>&lt;paste.httpserver.ThreadPool object at 0x7fbd00a72f90&gt;</tt></td></tr>\n<tr class=\"even\"><td>paste.registry</td>\n<td><tt>&lt;paste.registry.Registry object at 0x7fbcf37a7b90&gt;</tt></td></tr>\n<tr class=\"odd\"><td>paste.throw_errors</td>\n<td><tt>True</tt></td></tr>\n<tr class=\"even\"><td>pylons.action_method</td>\n<td><tt>&lt;bound method ApiController.action of &lt;ckan.controllers.api.ApiController object at 0x7fbcd8d40c10&gt;&gt;</tt></td></tr>\n<tr class=\"odd\"><td>pylons.controller</td>\n<td><tt>&lt;ckan.controllers.api.ApiController object at 0x7fbcd8d40c10&gt;</tt></td></tr>\n<tr class=\"even\"><td>pylons.environ_config</td>\n<td><tt>{'session': 'beaker.session', 'cache': 'beaker.cache'}</tt></td></tr>\n<tr class=\"odd\"><td>pylons.pylons</td>\n<td><tt>&lt;pylons.util.PylonsContext object at 0x7fbcd8d40650&gt;</tt></td></tr>\n<tr class=\"even\"><td>pylons.routes_dict</td>\n<td><tt>{'action': u'action', 'controller': u'api', 'ver': 3, 'logic_function': u'datastore_upsert'}</tt></td></tr>\n<tr class=\"odd\"><td>pylons.status_code_redirect</td>\n<td><tt>True</tt></td></tr>\n<tr class=\"even\"><td>repoze.who.api</td>\n<td><tt>&lt;repoze.who.api.API object at 0x7fbcf37a7bd0&gt;</tt></td></tr>\n<tr class=\"odd\"><td>repoze.who.logger</td>\n<td><tt>&lt;logging.Logger object at 0x7fbcf38d2690&gt;</tt></td></tr>\n<tr class=\"even\"><td>repoze.who.plugins</td>\n<td><tt>{'ckan.lib.authenticator:UsernamePasswordAuthenticator': &lt;ckan.lib.authenticator.UsernamePasswordAuthenticator object at 0x7fbcf38c7d90&gt;, 'friendlyform': &lt;FriendlyFormPlugin 140449516647760&gt;, 'auth_tkt': &lt;CkanAuthTktCookiePlugin 140449516647696&gt;}</tt></td></tr>\n<tr class=\"odd\"><td>routes.route</td>\n<td><tt>&lt;routes.route.Route object at 0x7fbcf3996d50&gt;</tt></td></tr>\n<tr class=\"even\"><td>routes.url</td>\n<td><tt>&lt;routes.util.URLGenerator object at 0x7fbcf0650e10&gt;</tt></td></tr>\n<tr class=\"odd\"><td>weberror.evalexception</td>\n<td><tt>&lt;weberror.evalexception.EvalException object at 0x7fbcf38f1850&gt;</tt></td></tr>\n<tr class=\"even\"><td>webob._parsed_query_vars</td>\n<td><tt>(GET([]), '')</tt></td></tr>\n<tr class=\"odd\"><td>webob.adhoc_attrs</td>\n<td><tt>{'response': &lt;Response at 0x7fbcd95dbb10 200 OK&gt;, 'language': 'en-us'}</tt></td></tr>\n<tr class=\"even\"><td>webob.is_body_seekable</td>\n<td><tt>True</tt></td></tr>\n<tr class=\"odd\"><td>wsgi process</td>\n<td><tt>'Multithreaded'</tt></td></tr>\n<tr class=\"even\"><td>wsgiorg.routing_args</td>\n<td><tt>(&lt;routes.util.URLGenerator object at 0x7fbcf0650e10&gt;, {'action': u'action', 'controller': u'api', 'ver': 3, 'logic_function': u'datastore_upsert'})</tt></td></tr>\n</table>\n            </div>\n            <div id=\"template_data\" class=\"hidden-data\">\n                <p>No Template information available.</p>\n            </div>\n            <div id=\"traceback_data\">\n<div style=\"float: left; width: 100%; padding-bottom: 20px;\">\n<h1 class=\"first\"><a name=\"content\"></a>WebError Traceback:</h1>\n<div class=\"main-exception-bar\">\n  <span class=\"main-exception\" style=\"color: #f00;\">&#8669;</span>\n  <code class=\"main-exception\">InvalidDataError: The data was invalid (for example: a numeric value is out of range or was inserted into a text field).</code>\n</div>\n<div id=\"formats\">\n   <span class=\"title\">View as: &nbsp;</span> <a id=\"view_short_html\" class=\"active\" href=\"#\">Interactive</a> \n   <a id=\"view_long_html\" href=\"#\">(full)</a> &nbsp;|&nbsp; <a id=\"view_short_text\" href=\"#\">Text</a>  \n   <a id=\"view_long_text\" href=\"#\">(full)</a> &nbsp;|&nbsp; <a id=\"view_short_xml\" href=\"#\">XML</a> \n   <a id=\"view_long_xml\" href=\"#\">(full)</a>\n</div>  \n<div style=\"clear: both;\">\n<div id=\"error-area\" style=\"display: none; background-color: #600; color: #fff; border: 2px solid black\">\n<button onclick=\"return clearError()\">clear this</button>\n<div id=\"error-container\"></div>\n<button onclick=\"return clearError()\">clear this</button>\n</div>\n\n    <div id=\"short_traceback\">\n    <div class=\"frame\">\nModule <span class=\"module\" title=\"/project/ckan/ckan/controllers/api.py\">ckan.controllers.api</span>:<b>197</b> in <code>action</code>  <a href=\"#\" class=\"show_locals\" tbid=\"140449073848904\" onClick=\"return showFrame(this)\">&nbsp; &nbsp; <img src=\"http://boot2docker:5462/_debug/media/plus.jpg\" border=0 width=9 height=9> &nbsp; &nbsp;</a> <a href=\"#\" class=\"\" location=\"ckan.controllers.api:197\" onClick=\"return showSource(this)\">view</a><br>\n<div style=\"display: none\" class=\"source highlight\" source-type=\"long\"><a class=\"switch_source\" onclick=\"return switch_source(this, 'long')\" href=\"#\">&lt;&lt;&nbsp; </a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class=\"k\">del</span> <span class=\"n\">request_data</span><span class=\"p\">[</span><span class=\"s\">&#39;callback&#39;</span><span class=\"p\">]</span><br>\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class=\"k\">try</span><span class=\"p\">:</span><br>\n<span class=\"source-highlight\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class=\"n\">result</span> <span class=\"o\">=</span> <span class=\"n\">function</span><span class=\"p\">(</span><span class=\"n\">context</span><span class=\"p\">,</span> <span class=\"n\">request_data</span><span class=\"p\">)</span></span><br>\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class=\"n\">return_dict</span><span class=\"p\">[</span><span class=\"s\">&#39;success&#39;</span><span class=\"p\">]</span> <span class=\"o\">=</span> <span class=\"bp\">True</span><br>\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class=\"n\">return_dict</span><span class=\"p\">[</span><span class=\"s\">&#39;result&#39;</span><span class=\"p\">]</span> <span class=\"o\">=</span> <span class=\"n\">result</span></div><div class=\"source highlight\" source-type=\"short\"><a onclick=\"return switch_source(this, 'short')\" class=\"switch_source\" href=\"#\">&gt;&gt;&nbsp; </a><span class=\"n\">result</span> <span class=\"o\">=</span> <span class=\"n\">function</span><span class=\"p\">(</span><span class=\"n\">context</span><span class=\"p\">,</span> <span class=\"n\">request_data</span><span class=\"p\">)</span></div>\n</div>\n<div class=\"frame\">\nModule <span class=\"module\" title=\"/project/ckan/ckan/logic/__init__.py\">ckan.logic</span>:<b>424</b> in <code>wrapped</code>  <a href=\"#\" class=\"show_locals\" tbid=\"140449073848688\" onClick=\"return showFrame(this)\">&nbsp; &nbsp; <img src=\"http://boot2docker:5462/_debug/media/plus.jpg\" border=0 width=9 height=9> &nbsp; &nbsp;</a> <a href=\"#\" class=\"\" location=\"ckan.logic:424\" onClick=\"return showSource(this)\">view</a><br>\n<div style=\"display: none\" class=\"source highlight\" source-type=\"long\"><a class=\"switch_source\" onclick=\"return switch_source(this, 'long')\" href=\"#\">&lt;&lt;&nbsp; </a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class=\"c\"># check_access(action_name, context, data_dict=None)</span><br>\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class=\"n\">result</span> <span class=\"o\">=</span> <span class=\"n\">_action</span><span class=\"p\">(</span><span class=\"n\">context</span><span class=\"p\">,</span> <span class=\"n\">data_dict</span><span class=\"p\">,</span> <span class=\"o\">**</span><span class=\"n\">kw</span><span class=\"p\">)</span><br>\n<span class=\"source-highlight\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class=\"k\">try</span><span class=\"p\">:</span></span><br>\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class=\"n\">audit</span> <span class=\"o\">=</span> <span class=\"n\">context</span><span class=\"p\">[</span><span class=\"s\">&#39;__auth_audit&#39;</span><span class=\"p\">][</span><span class=\"o\">-</span><span class=\"mi\">1</span><span class=\"p\">]</span></div><div class=\"source highlight\" source-type=\"short\"><a onclick=\"return switch_source(this, 'short')\" class=\"switch_source\" href=\"#\">&gt;&gt;&nbsp; </a><span class=\"n\">result</span> <span class=\"o\">=</span> <span class=\"n\">_action</span><span class=\"p\">(</span><span class=\"n\">context</span><span class=\"p\">,</span> <span class=\"n\">data_dict</span><span class=\"p\">,</span> <span class=\"o\">**</span><span class=\"n\">kw</span><span class=\"p\">)</span></div>\n</div>\n<div class=\"frame\">\nModule <span class=\"module\" title=\"/project/ckan/ckanext/datastore/logic/action.py\">ckanext.datastore.logic.action</span>:<b>212</b> in <code>datastore_upsert</code>  <a href=\"#\" class=\"show_locals\" tbid=\"140449073852000\" onClick=\"return showFrame(this)\">&nbsp; &nbsp; <img src=\"http://boot2docker:5462/_debug/media/plus.jpg\" border=0 width=9 height=9> &nbsp; &nbsp;</a> <a href=\"#\" class=\"\" location=\"ckanext.datastore.logic.action:212\" onClick=\"return showSource(this)\">view</a><br>\n<div style=\"display: none\" class=\"source highlight\" source-type=\"long\"><a class=\"switch_source\" onclick=\"return switch_source(this, 'long')\" href=\"#\">&lt;&lt;&nbsp; </a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class=\"p\">))</span><br>\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>\n<span class=\"source-highlight\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class=\"n\">result</span> <span class=\"o\">=</span> <span class=\"n\">db</span><span class=\"o\">.</span><span class=\"n\">upsert</span><span class=\"p\">(</span><span class=\"n\">context</span><span class=\"p\">,</span> <span class=\"n\">data_dict</span><span class=\"p\">)</span></span><br>\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class=\"n\">result</span><span class=\"o\">.</span><span class=\"n\">pop</span><span class=\"p\">(</span><span class=\"s\">&#39;id&#39;</span><span class=\"p\">,</span> <span class=\"bp\">None</span><span class=\"p\">)</span><br>\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class=\"n\">result</span><span class=\"o\">.</span><span class=\"n\">pop</span><span class=\"p\">(</span><span class=\"s\">&#39;connection_url&#39;</span><span class=\"p\">)</span></div><div class=\"source highlight\" source-type=\"short\"><a onclick=\"return switch_source(this, 'short')\" class=\"switch_source\" href=\"#\">&gt;&gt;&nbsp; </a><span class=\"n\">result</span> <span class=\"o\">=</span> <span class=\"n\">db</span><span class=\"o\">.</span><span class=\"n\">upsert</span><span class=\"p\">(</span><span class=\"n\">context</span><span class=\"p\">,</span> <span class=\"n\">data_dict</span><span class=\"p\">)</span></div>\n</div>\n<div class=\"frame\">\nModule <span class=\"module\" title=\"/project/ckan/ckanext/datastore/db.py\">ckanext.datastore.db</span>:<b>1121</b> in <code>upsert</code>  <a href=\"#\" class=\"show_locals\" tbid=\"140449073849048\" onClick=\"return showFrame(this)\">&nbsp; &nbsp; <img src=\"http://boot2docker:5462/_debug/media/plus.jpg\" border=0 width=9 height=9> &nbsp; &nbsp;</a> <a href=\"#\" class=\"\" location=\"ckanext.datastore.db:1121\" onClick=\"return showSource(this)\">view</a><br>\n<div style=\"display: none\" class=\"source highlight\" source-type=\"long\"><a class=\"switch_source\" onclick=\"return switch_source(this, 'long')\" href=\"#\">&lt;&lt;&nbsp; </a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class=\"n\">context</span><span class=\"p\">[</span><span class=\"s\">&#39;connection&#39;</span><span class=\"p\">]</span><span class=\"o\">.</span><span class=\"n\">execute</span><span class=\"p\">(</span><br>\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class=\"s\">u&#39;SET LOCAL statement_timeout TO {0}&#39;</span><span class=\"o\">.</span><span class=\"n\">format</span><span class=\"p\">(</span><span class=\"n\">timeout</span><span class=\"p\">))</span><br>\n<span class=\"source-highlight\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class=\"n\">upsert_data</span><span class=\"p\">(</span><span class=\"n\">context</span><span class=\"p\">,</span> <span class=\"n\">data_dict</span><span class=\"p\">)</span></span><br>\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class=\"n\">trans</span><span class=\"o\">.</span><span class=\"n\">commit</span><span class=\"p\">()</span><br>\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class=\"k\">return</span> <span class=\"n\">_unrename_json_field</span><span class=\"p\">(</span><span class=\"n\">data_dict</span><span class=\"p\">)</span></div><div class=\"source highlight\" source-type=\"short\"><a onclick=\"return switch_source(this, 'short')\" class=\"switch_source\" href=\"#\">&gt;&gt;&nbsp; </a><span class=\"n\">upsert_data</span><span class=\"p\">(</span><span class=\"n\">context</span><span class=\"p\">,</span> <span class=\"n\">data_dict</span><span class=\"p\">)</span></div>\n</div>\n<div class=\"frame\">\nModule <span class=\"module\" title=\"/project/ckan/ckanext/datastore/db.py\">ckanext.datastore.db</span>:<b>656</b> in <code>upsert_data</code>  <a href=\"#\" class=\"show_locals\" tbid=\"140449073851856\" onClick=\"return showFrame(this)\">&nbsp; &nbsp; <img src=\"http://boot2docker:5462/_debug/media/plus.jpg\" border=0 width=9 height=9> &nbsp; &nbsp;</a> <a href=\"#\" class=\"\" location=\"ckanext.datastore.db:656\" onClick=\"return showSource(this)\">view</a><br>\n<div style=\"display: none\" class=\"source highlight\" source-type=\"long\"><a class=\"switch_source\" onclick=\"return switch_source(this, 'long')\" href=\"#\">&lt;&lt;&nbsp; </a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class=\"k\">except</span> <span class=\"n\">sqlalchemy</span><span class=\"o\">.</span><span class=\"n\">exc</span><span class=\"o\">.</span><span class=\"n\">DataError</span> <span class=\"k\">as</span> <span class=\"n\">err</span><span class=\"p\">:</span><br>\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class=\"k\">raise</span> <span class=\"n\">InvalidDataError</span><span class=\"p\">(</span><br>\n<span class=\"source-highlight\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class=\"n\">toolkit</span><span class=\"o\">.</span><span class=\"n\">_</span><span class=\"p\">(</span><span class=\"s\">&quot;The data was invalid (for example: a numeric value &quot;</span></span><br>\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class=\"s\">&quot;is out of range or was inserted into a text field).&quot;</span><br>\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class=\"p\">))</span></div><div class=\"source highlight\" source-type=\"short\"><a onclick=\"return switch_source(this, 'short')\" class=\"switch_source\" href=\"#\">&gt;&gt;&nbsp; </a><span class=\"n\">toolkit</span><span class=\"o\">.</span><span class=\"n\">_</span><span class=\"p\">(</span><span class=\"s\">&quot;The data was invalid (for example: a numeric value &quot;</span></div>\n</div>\n<b>InvalidDataError: The data was invalid (for example: a numeric value is out of range or was inserted into a text field).</b><br>\n    </div>\n    <div id=\"short_text_version\" class=\"hidden-data\">\n    <textarea style=\"width: 100%\" rows=11 cols=60>File '/project/ckan/ckan/controllers/api.py', line 197 in action\n  result = function(context, request_data)\nFile '/project/ckan/ckan/logic/__init__.py', line 424 in wrapped\n  result = _action(context, data_dict, **kw)\nFile '/project/ckan/ckanext/datastore/logic/action.py', line 212 in datastore_upsert\n  result = db.upsert(context, data_dict)\nFile '/project/ckan/ckanext/datastore/db.py', line 1121 in upsert\n  upsert_data(context, data_dict)\nFile '/project/ckan/ckanext/datastore/db.py', line 656 in upsert_data\n  toolkit._(\"The data was invalid (for example: a numeric value \"\nInvalidDataError: The data was invalid (for example: a numeric value is out of range or was inserted into a text field).</textarea>\n    </div>\n    <div id=\"long_xml_version\" class=\"hidden-data\">\n    <textarea style=\"width: 100%\" rows=50 cols=60>&lt;?xml version=\"1.0\" ?&gt;&lt;traceback&gt;&lt;sysinfo&gt;&lt;language full_version=\"2.7.6 (default, Mar 22 2014, 22:59:56) \n[GCC 4.8.2]\" platform=\"linux2\" version=\"2.7.6\"&gt;Python&lt;/language&gt;&lt;libraries&gt;&lt;library name=\"repoze.lru\" version=\"0.6\"/&gt;&lt;library name=\"mako\" version=\"0.9.0\"/&gt;&lt;library name=\"webhelpers\" version=\"1.3\"/&gt;&lt;library name=\"pylons\" version=\"0.9.7\"/&gt;&lt;library name=\"simplejson\" version=\"3.3.1\"/&gt;&lt;library name=\"weberror\" version=\"0.10.3\"/&gt;&lt;library name=\"webtest\" version=\"1.4.3\"/&gt;&lt;library name=\"markupsafe\" version=\"0.18\"/&gt;&lt;library name=\"pygments\" version=\"1.6\"/&gt;&lt;library name=\"genshi\" version=\"0.6\"/&gt;&lt;library name=\"sqlalchemy\" version=\"0.9.6\"/&gt;&lt;library name=\"paste\" version=\"1.7.5.1\"/&gt;&lt;library name=\"decorator\" version=\"3.4.0\"/&gt;&lt;library name=\"beaker\" version=\"1.6.4\"/&gt;&lt;library name=\"formencode\" version=\"1.2.6\"/&gt;&lt;library name=\"pastedeploy\" version=\"1.5.0\"/&gt;&lt;library name=\"tempita\" version=\"0.5.2\"/&gt;&lt;library name=\"nose\" version=\"1.3.0\"/&gt;&lt;library name=\"routes\" version=\"1.13\"/&gt;&lt;library name=\"webob\" version=\"1.0.8\"/&gt;&lt;library name=\"pastescript\" version=\"1.7.5\"/&gt;&lt;/libraries&gt;&lt;/sysinfo&gt;&lt;stack&gt;&lt;frame&gt;&lt;module&gt;weberror.evalexception&lt;/module&gt;&lt;filename&gt;/usr/lib/ckan/local/lib/python2.7/site-packages/weberror/evalexception.py&lt;/filename&gt;&lt;line&gt;431&lt;/line&gt;&lt;function&gt;respond&lt;/function&gt;&lt;operation&gt;app_iter = self.application(environ, detect_start_response)&lt;/operation&gt;&lt;operation_context&gt;        try:\n            __traceback_supplement__ = errormiddleware.Supplement, self, environ\n            app_iter = self.application(environ, detect_start_response)\n            \n            # Don't create a list from a paste.fileapp object \n&lt;/operation_context&gt;&lt;/frame&gt;&lt;frame&gt;&lt;module&gt;webob.dec&lt;/module&gt;&lt;filename&gt;/usr/lib/ckan/local/lib/python2.7/site-packages/webob/dec.py&lt;/filename&gt;&lt;line&gt;147&lt;/line&gt;&lt;function&gt;__call__&lt;/function&gt;&lt;operation&gt;resp = self.call_func(req, *args, **self.kwargs)&lt;/operation&gt;&lt;operation_context&gt;                if self.middleware_wraps:\n                    args = (self.middleware_wraps,) + args\n                resp = self.call_func(req, *args, **self.kwargs)\n            except webob.exc.HTTPException, resp:\n                pass\n&lt;/operation_context&gt;&lt;/frame&gt;&lt;frame&gt;&lt;module&gt;webob.dec&lt;/module&gt;&lt;filename&gt;/usr/lib/ckan/local/lib/python2.7/site-packages/webob/dec.py&lt;/filename&gt;&lt;line&gt;208&lt;/line&gt;&lt;function&gt;call_func&lt;/function&gt;&lt;operation&gt;return self.func(req, *args, **kwargs)&lt;/operation&gt;&lt;operation_context&gt;        &amp;quot;&amp;quot;&amp;quot;Call the wrapped function; override this in a subclass to\n        change how the function is called.&amp;quot;&amp;quot;&amp;quot;\n        return self.func(req, *args, **kwargs)\n\n    def clone(self, func=None, **kw):\n&lt;/operation_context&gt;&lt;/frame&gt;&lt;frame&gt;&lt;module&gt;fanstatic.publisher&lt;/module&gt;&lt;filename&gt;/usr/lib/ckan/local/lib/python2.7/site-packages/fanstatic/publisher.py&lt;/filename&gt;&lt;line&gt;234&lt;/line&gt;&lt;function&gt;__call__&lt;/function&gt;&lt;operation&gt;return request.get_response(self.app)&lt;/operation&gt;&lt;operation_context&gt;            # the trigger segment is not in the URL, so we delegate\n            # to the original application\n            return request.get_response(self.app)\n        # the trigger is in there, so let whatever is behind the\n        # trigger be handled by the publisher\n&lt;/operation_context&gt;&lt;/frame&gt;&lt;frame&gt;&lt;module&gt;webob.request&lt;/module&gt;&lt;filename&gt;/usr/lib/ckan/local/lib/python2.7/site-packages/webob/request.py&lt;/filename&gt;&lt;line&gt;1053&lt;/line&gt;&lt;function&gt;get_response&lt;/function&gt;&lt;operation&gt;application, catch_exc_info=False)&lt;/operation&gt;&lt;operation_context&gt;        else:\n            status, headers, app_iter = self.call_application(\n                application, catch_exc_info=False)\n        return self.ResponseClass(\n            status=status, headerlist=list(headers), app_iter=app_iter,\n&lt;/operation_context&gt;&lt;/frame&gt;&lt;frame&gt;&lt;module&gt;webob.request&lt;/module&gt;&lt;filename&gt;/usr/lib/ckan/local/lib/python2.7/site-packages/webob/request.py&lt;/filename&gt;&lt;line&gt;1022&lt;/line&gt;&lt;function&gt;call_application&lt;/function&gt;&lt;operation&gt;app_iter = application(self.environ, start_response)&lt;/operation&gt;&lt;operation_context&gt;            captured[:] = [status, headers, exc_info]\n            return output.append\n        app_iter = application(self.environ, start_response)\n        if output or not captured:\n            try:\n&lt;/operation_context&gt;&lt;/frame&gt;&lt;frame&gt;&lt;module&gt;webob.dec&lt;/module&gt;&lt;filename&gt;/usr/lib/ckan/local/lib/python2.7/site-packages/webob/dec.py&lt;/filename&gt;&lt;line&gt;147&lt;/line&gt;&lt;function&gt;__call__&lt;/function&gt;&lt;operation&gt;resp = self.call_func(req, *args, **self.kwargs)&lt;/operation&gt;&lt;operation_context&gt;                if self.middleware_wraps:\n                    args = (self.middleware_wraps,) + args\n                resp = self.call_func(req, *args, **self.kwargs)\n            except webob.exc.HTTPException, resp:\n                pass\n&lt;/operation_context&gt;&lt;/frame&gt;&lt;frame&gt;&lt;module&gt;webob.dec&lt;/module&gt;&lt;filename&gt;/usr/lib/ckan/local/lib/python2.7/site-packages/webob/dec.py&lt;/filename&gt;&lt;line&gt;208&lt;/line&gt;&lt;function&gt;call_func&lt;/function&gt;&lt;operation&gt;return self.func(req, *args, **kwargs)&lt;/operation&gt;&lt;operation_context&gt;        &amp;quot;&amp;quot;&amp;quot;Call the wrapped function; override this in a subclass to\n        change how the function is called.&amp;quot;&amp;quot;&amp;quot;\n        return self.func(req, *args, **kwargs)\n\n    def clone(self, func=None, **kw):\n&lt;/operation_context&gt;&lt;/frame&gt;&lt;frame&gt;&lt;module&gt;fanstatic.injector&lt;/module&gt;&lt;filename&gt;/usr/lib/ckan/local/lib/python2.7/site-packages/fanstatic/injector.py&lt;/filename&gt;&lt;line&gt;54&lt;/line&gt;&lt;function&gt;__call__&lt;/function&gt;&lt;operation&gt;response = request.get_response(self.app)&lt;/operation&gt;&lt;operation_context&gt;\n        # Get the response from the wrapped application:\n        response = request.get_response(self.app)\n\n        # We only continue if the content-type is appropriate.\n&lt;/operation_context&gt;&lt;/frame&gt;&lt;frame&gt;&lt;module&gt;webob.request&lt;/module&gt;&lt;filename&gt;/usr/lib/ckan/local/lib/python2.7/site-packages/webob/request.py&lt;/filename&gt;&lt;line&gt;1053&lt;/line&gt;&lt;function&gt;get_response&lt;/function&gt;&lt;operation&gt;application, catch_exc_info=False)&lt;/operation&gt;&lt;operation_context&gt;        else:\n            status, headers, app_iter = self.call_application(\n                application, catch_exc_info=False)\n        return self.ResponseClass(\n            status=status, headerlist=list(headers), app_iter=app_iter,\n&lt;/operation_context&gt;&lt;/frame&gt;&lt;frame&gt;&lt;module&gt;webob.request&lt;/module&gt;&lt;filename&gt;/usr/lib/ckan/local/lib/python2.7/site-packages/webob/request.py&lt;/filename&gt;&lt;line&gt;1022&lt;/line&gt;&lt;function&gt;call_application&lt;/function&gt;&lt;operation&gt;app_iter = application(self.environ, start_response)&lt;/operation&gt;&lt;operation_context&gt;            captured[:] = [status, headers, exc_info]\n            return output.append\n        app_iter = application(self.environ, start_response)\n        if output or not captured:\n            try:\n&lt;/operation_context&gt;&lt;/frame&gt;&lt;frame&gt;&lt;module&gt;beaker.middleware&lt;/module&gt;&lt;filename&gt;/usr/lib/ckan/local/lib/python2.7/site-packages/beaker/middleware.py&lt;/filename&gt;&lt;line&gt;73&lt;/line&gt;&lt;function&gt;__call__&lt;/function&gt;&lt;operation&gt;return self.app(environ, start_response)&lt;/operation&gt;&lt;operation_context&gt;                                                   self.cache_manager)\n        environ[self.environ_key] = self.cache_manager\n        return self.app(environ, start_response)\n\n\n&lt;/operation_context&gt;&lt;/frame&gt;&lt;frame&gt;&lt;module&gt;beaker.middleware&lt;/module&gt;&lt;filename&gt;/usr/lib/ckan/local/lib/python2.7/site-packages/beaker/middleware.py&lt;/filename&gt;&lt;line&gt;155&lt;/line&gt;&lt;function&gt;__call__&lt;/function&gt;&lt;operation&gt;return self.wrap_app(environ, session_start_response)&lt;/operation&gt;&lt;operation_context&gt;                        headers.append(('Set-cookie', cookie))\n            return start_response(status, headers, exc_info)\n        return self.wrap_app(environ, session_start_response)\n\n    def _get_session(self):\n&lt;/operation_context&gt;&lt;/frame&gt;&lt;frame&gt;&lt;module&gt;routes.middleware&lt;/module&gt;&lt;filename&gt;/usr/lib/ckan/local/lib/python2.7/site-packages/routes/middleware.py&lt;/filename&gt;&lt;line&gt;131&lt;/line&gt;&lt;function&gt;__call__&lt;/function&gt;&lt;operation&gt;response = self.app(environ, start_response)&lt;/operation&gt;&lt;operation_context&gt;                                             r'\\1', oldpath)\n        \n        response = self.app(environ, start_response)\n        \n        # Wrapped in try as in rare cases the attribute will be gone already\n&lt;/operation_context&gt;&lt;/frame&gt;&lt;frame&gt;&lt;module&gt;pylons.wsgiapp&lt;/module&gt;&lt;filename&gt;/usr/lib/ckan/local/lib/python2.7/site-packages/pylons/wsgiapp.py&lt;/filename&gt;&lt;line&gt;125&lt;/line&gt;&lt;function&gt;__call__&lt;/function&gt;&lt;operation&gt;response = self.dispatch(controller, environ, start_response)&lt;/operation&gt;&lt;operation_context&gt;        \n        controller = self.resolve(environ, start_response)\n        response = self.dispatch(controller, environ, start_response)\n        \n        if 'paste.testing_variables' in environ and hasattr(response,\n&lt;/operation_context&gt;&lt;/frame&gt;&lt;frame&gt;&lt;module&gt;pylons.wsgiapp&lt;/module&gt;&lt;filename&gt;/usr/lib/ckan/local/lib/python2.7/site-packages/pylons/wsgiapp.py&lt;/filename&gt;&lt;line&gt;324&lt;/line&gt;&lt;function&gt;dispatch&lt;/function&gt;&lt;operation&gt;return controller(environ, start_response)&lt;/operation&gt;&lt;operation_context&gt;        if log_debug:\n            log.debug(&amp;quot;Calling controller class with WSGI interface&amp;quot;)\n        return controller(environ, start_response)\n    \n    def load_test_env(self, environ):\n&lt;/operation_context&gt;&lt;/frame&gt;&lt;frame&gt;&lt;module&gt;ckan.controllers.api&lt;/module&gt;&lt;filename&gt;/project/ckan/ckan/controllers/api.py&lt;/filename&gt;&lt;line&gt;70&lt;/line&gt;&lt;function&gt;__call__&lt;/function&gt;&lt;operation&gt;return base.BaseController.__call__(self, environ, start_response)&lt;/operation&gt;&lt;operation_context&gt;        # avoid status_code_redirect intercepting error responses\n        environ['pylons.status_code_redirect'] = True\n        return base.BaseController.__call__(self, environ, start_response)\n\n    def _finish(self, status_int, response_data=None,\n&lt;/operation_context&gt;&lt;/frame&gt;&lt;frame&gt;&lt;module&gt;ckan.lib.base&lt;/module&gt;&lt;filename&gt;/project/ckan/ckan/lib/base.py&lt;/filename&gt;&lt;line&gt;338&lt;/line&gt;&lt;function&gt;__call__&lt;/function&gt;&lt;operation&gt;res = WSGIController.__call__(self, environ, start_response)&lt;/operation&gt;&lt;operation_context&gt;\n        try:\n            res = WSGIController.__call__(self, environ, start_response)\n        finally:\n            model.Session.remove()\n&lt;/operation_context&gt;&lt;/frame&gt;&lt;frame&gt;&lt;module&gt;pylons.controllers.core&lt;/module&gt;&lt;filename&gt;/usr/lib/ckan/local/lib/python2.7/site-packages/pylons/controllers/core.py&lt;/filename&gt;&lt;line&gt;221&lt;/line&gt;&lt;function&gt;__call__&lt;/function&gt;&lt;operation&gt;response = self._dispatch_call()&lt;/operation&gt;&lt;operation_context&gt;                return response(environ, self.start_response)\n        \n        response = self._dispatch_call()\n        if not start_response_called:\n            self.start_response = start_response\n&lt;/operation_context&gt;&lt;/frame&gt;&lt;frame&gt;&lt;module&gt;pylons.controllers.core&lt;/module&gt;&lt;filename&gt;/usr/lib/ckan/local/lib/python2.7/site-packages/pylons/controllers/core.py&lt;/filename&gt;&lt;line&gt;172&lt;/line&gt;&lt;function&gt;_dispatch_call&lt;/function&gt;&lt;operation&gt;response = self._inspect_call(func)&lt;/operation&gt;&lt;operation_context&gt;            req.environ['pylons.action_method'] = func\n            \n            response = self._inspect_call(func)\n        else:\n            if log_debug:\n&lt;/operation_context&gt;&lt;/frame&gt;&lt;frame&gt;&lt;module&gt;pylons.controllers.core&lt;/module&gt;&lt;filename&gt;/usr/lib/ckan/local/lib/python2.7/site-packages/pylons/controllers/core.py&lt;/filename&gt;&lt;line&gt;107&lt;/line&gt;&lt;function&gt;_inspect_call&lt;/function&gt;&lt;operation&gt;result = self._perform_call(func, args)&lt;/operation&gt;&lt;operation_context&gt;                      func.__name__, args)\n        try:\n            result = self._perform_call(func, args)\n        except HTTPException, httpe:\n            if log_debug:\n&lt;/operation_context&gt;&lt;/frame&gt;&lt;frame&gt;&lt;module&gt;pylons.controllers.core&lt;/module&gt;&lt;filename&gt;/usr/lib/ckan/local/lib/python2.7/site-packages/pylons/controllers/core.py&lt;/filename&gt;&lt;line&gt;60&lt;/line&gt;&lt;function&gt;_perform_call&lt;/function&gt;&lt;operation&gt;return func(**args)&lt;/operation&gt;&lt;operation_context&gt;        &amp;quot;&amp;quot;&amp;quot;Hide the traceback for everything above this method&amp;quot;&amp;quot;&amp;quot;\n        __traceback_hide__ = 'before_and_this'\n        return func(**args)\n    \n    def _inspect_call(self, func):\n&lt;/operation_context&gt;&lt;/frame&gt;&lt;frame&gt;&lt;module&gt;ckan.controllers.api&lt;/module&gt;&lt;filename&gt;/project/ckan/ckan/controllers/api.py&lt;/filename&gt;&lt;line&gt;197&lt;/line&gt;&lt;function&gt;action&lt;/function&gt;&lt;operation&gt;result = function(context, request_data)&lt;/operation&gt;&lt;operation_context&gt;            del request_data['callback']\n        try:\n            result = function(context, request_data)\n            return_dict['success'] = True\n            return_dict['result'] = result\n&lt;/operation_context&gt;&lt;/frame&gt;&lt;frame&gt;&lt;module&gt;ckan.logic&lt;/module&gt;&lt;filename&gt;/project/ckan/ckan/logic/__init__.py&lt;/filename&gt;&lt;line&gt;424&lt;/line&gt;&lt;function&gt;wrapped&lt;/function&gt;&lt;operation&gt;result = _action(context, data_dict, **kw)&lt;/operation&gt;&lt;operation_context&gt;\n                # check_access(action_name, context, data_dict=None)\n                result = _action(context, data_dict, **kw)\n                try:\n                    audit = context['__auth_audit'][-1]\n&lt;/operation_context&gt;&lt;/frame&gt;&lt;frame&gt;&lt;module&gt;ckanext.datastore.logic.action&lt;/module&gt;&lt;filename&gt;/project/ckan/ckanext/datastore/logic/action.py&lt;/filename&gt;&lt;line&gt;212&lt;/line&gt;&lt;function&gt;datastore_upsert&lt;/function&gt;&lt;operation&gt;result = db.upsert(context, data_dict)&lt;/operation&gt;&lt;operation_context&gt;        ))\n\n    result = db.upsert(context, data_dict)\n    result.pop('id', None)\n    result.pop('connection_url')\n&lt;/operation_context&gt;&lt;/frame&gt;&lt;frame&gt;&lt;module&gt;ckanext.datastore.db&lt;/module&gt;&lt;filename&gt;/project/ckan/ckanext/datastore/db.py&lt;/filename&gt;&lt;line&gt;1121&lt;/line&gt;&lt;function&gt;upsert&lt;/function&gt;&lt;operation&gt;upsert_data(context, data_dict)&lt;/operation&gt;&lt;operation_context&gt;        context['connection'].execute(\n            u'SET LOCAL statement_timeout TO {0}'.format(timeout))\n        upsert_data(context, data_dict)\n        trans.commit()\n        return _unrename_json_field(data_dict)\n&lt;/operation_context&gt;&lt;/frame&gt;&lt;frame&gt;&lt;module&gt;ckanext.datastore.db&lt;/module&gt;&lt;filename&gt;/project/ckan/ckanext/datastore/db.py&lt;/filename&gt;&lt;line&gt;656&lt;/line&gt;&lt;function&gt;upsert_data&lt;/function&gt;&lt;operation&gt;toolkit._(&amp;quot;The data was invalid (for example: a numeric value &amp;quot;&lt;/operation&gt;&lt;operation_context&gt;        except sqlalchemy.exc.DataError as err:\n            raise InvalidDataError(\n                toolkit._(&amp;quot;The data was invalid (for example: a numeric value &amp;quot;\n                          &amp;quot;is out of range or was inserted into a text field).&amp;quot;\n                          ))\n&lt;/operation_context&gt;&lt;/frame&gt;&lt;/stack&gt;&lt;exception&gt;&lt;type&gt;InvalidDataError&lt;/type&gt;&lt;value&gt;The data was invalid (for example: a numeric value is out of range or was inserted into a text field).&lt;/value&gt;&lt;/exception&gt;&lt;/traceback&gt;</textarea>\n    </div>\n    <div id=\"short_xml_version\" class=\"hidden-data\">\n    <textarea style=\"width: 100%\" rows=27 cols=60>&lt;?xml version=\"1.0\" ?&gt;&lt;traceback&gt;&lt;sysinfo&gt;&lt;language full_version=\"2.7.6 (default, Mar 22 2014, 22:59:56) \n[GCC 4.8.2]\" platform=\"linux2\" version=\"2.7.6\"&gt;Python&lt;/language&gt;&lt;libraries&gt;&lt;library name=\"repoze.lru\" version=\"0.6\"/&gt;&lt;library name=\"mako\" version=\"0.9.0\"/&gt;&lt;library name=\"webhelpers\" version=\"1.3\"/&gt;&lt;library name=\"pylons\" version=\"0.9.7\"/&gt;&lt;library name=\"simplejson\" version=\"3.3.1\"/&gt;&lt;library name=\"weberror\" version=\"0.10.3\"/&gt;&lt;library name=\"webtest\" version=\"1.4.3\"/&gt;&lt;library name=\"markupsafe\" version=\"0.18\"/&gt;&lt;library name=\"pygments\" version=\"1.6\"/&gt;&lt;library name=\"genshi\" version=\"0.6\"/&gt;&lt;library name=\"sqlalchemy\" version=\"0.9.6\"/&gt;&lt;library name=\"paste\" version=\"1.7.5.1\"/&gt;&lt;library name=\"decorator\" version=\"3.4.0\"/&gt;&lt;library name=\"beaker\" version=\"1.6.4\"/&gt;&lt;library name=\"formencode\" version=\"1.2.6\"/&gt;&lt;library name=\"pastedeploy\" version=\"1.5.0\"/&gt;&lt;library name=\"tempita\" version=\"0.5.2\"/&gt;&lt;library name=\"nose\" version=\"1.3.0\"/&gt;&lt;library name=\"routes\" version=\"1.13\"/&gt;&lt;library name=\"webob\" version=\"1.0.8\"/&gt;&lt;library name=\"pastescript\" version=\"1.7.5\"/&gt;&lt;/libraries&gt;&lt;/sysinfo&gt;&lt;stack&gt;&lt;frame&gt;&lt;module&gt;ckan.controllers.api&lt;/module&gt;&lt;filename&gt;/project/ckan/ckan/controllers/api.py&lt;/filename&gt;&lt;line&gt;197&lt;/line&gt;&lt;function&gt;action&lt;/function&gt;&lt;operation&gt;result = function(context, request_data)&lt;/operation&gt;&lt;operation_context&gt;            del request_data['callback']\n        try:\n            result = function(context, request_data)\n            return_dict['success'] = True\n            return_dict['result'] = result\n&lt;/operation_context&gt;&lt;/frame&gt;&lt;frame&gt;&lt;module&gt;ckan.logic&lt;/module&gt;&lt;filename&gt;/project/ckan/ckan/logic/__init__.py&lt;/filename&gt;&lt;line&gt;424&lt;/line&gt;&lt;function&gt;wrapped&lt;/function&gt;&lt;operation&gt;result = _action(context, data_dict, **kw)&lt;/operation&gt;&lt;operation_context&gt;\n                # check_access(action_name, context, data_dict=None)\n                result = _action(context, data_dict, **kw)\n                try:\n                    audit = context['__auth_audit'][-1]\n&lt;/operation_context&gt;&lt;/frame&gt;&lt;frame&gt;&lt;module&gt;ckanext.datastore.logic.action&lt;/module&gt;&lt;filename&gt;/project/ckan/ckanext/datastore/logic/action.py&lt;/filename&gt;&lt;line&gt;212&lt;/line&gt;&lt;function&gt;datastore_upsert&lt;/function&gt;&lt;operation&gt;result = db.upsert(context, data_dict)&lt;/operation&gt;&lt;operation_context&gt;        ))\n\n    result = db.upsert(context, data_dict)\n    result.pop('id', None)\n    result.pop('connection_url')\n&lt;/operation_context&gt;&lt;/frame&gt;&lt;frame&gt;&lt;module&gt;ckanext.datastore.db&lt;/module&gt;&lt;filename&gt;/project/ckan/ckanext/datastore/db.py&lt;/filename&gt;&lt;line&gt;1121&lt;/line&gt;&lt;function&gt;upsert&lt;/function&gt;&lt;operation&gt;upsert_data(context, data_dict)&lt;/operation&gt;&lt;operation_context&gt;        context['connection'].execute(\n            u'SET LOCAL statement_timeout TO {0}'.format(timeout))\n        upsert_data(context, data_dict)\n        trans.commit()\n        return _unrename_json_field(data_dict)\n&lt;/operation_context&gt;&lt;/frame&gt;&lt;frame&gt;&lt;module&gt;ckanext.datastore.db&lt;/module&gt;&lt;filename&gt;/project/ckan/ckanext/datastore/db.py&lt;/filename&gt;&lt;line&gt;656&lt;/line&gt;&lt;function&gt;upsert_data&lt;/function&gt;&lt;operation&gt;toolkit._(&amp;quot;The data was invalid (for example: a numeric value &amp;quot;&lt;/operation&gt;&lt;operation_context&gt;        except sqlalchemy.exc.DataError as err:\n            raise InvalidDataError(\n                toolkit._(&amp;quot;The data was invalid (for example: a numeric value &amp;quot;\n                          &amp;quot;is out of range or was inserted into a text field).&amp;quot;\n                          ))\n&lt;/operation_context&gt;&lt;/frame&gt;&lt;/stack&gt;&lt;exception&gt;&lt;type&gt;InvalidDataError&lt;/type&gt;&lt;value&gt;The data was invalid (for example: a numeric value is out of range or was inserted into a text field).&lt;/value&gt;&lt;/exception&gt;&lt;/traceback&gt;</textarea>\n    </div>\n    \n        <div id=\"full_traceback\" class=\"hidden-data\">\n        URL: <a href=\"http://boot2docker:5462/api/3/action/datastore_upsert\">http://boot2docker:5462/api/3/action/datastore_upsert</a><br>\n<div class=\"frame\">\nModule <span class=\"module\" title=\"/usr/lib/ckan/local/lib/python2.7/site-packages/weberror/evalexception.py\">weberror.evalexception</span>:<b>431</b> in <code>respond</code>  <a href=\"#\" class=\"show_locals\" tbid=\"140449077477176\" onClick=\"return showFrame(this)\">&nbsp; &nbsp; <img src=\"http://boot2docker:5462/_debug/media/plus.jpg\" border=0 width=9 height=9> &nbsp; &nbsp;</a> <a href=\"#\" class=\"\" location=\"weberror.evalexception:431\" onClick=\"return showSource(this)\">view</a><br>\n<div style=\"display: none\" class=\"source highlight\" source-type=\"long\"><a class=\"switch_source\" onclick=\"return switch_source(this, 'long')\" href=\"#\">&lt;&lt;&nbsp; </a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class=\"k\">try</span><span class=\"p\">:</span><br>\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class=\"n\">__traceback_supplement__</span> <span class=\"o\">=</span> <span class=\"n\">errormiddleware</span><span class=\"o\">.</span><span class=\"n\">Supplement</span><span class=\"p\">,</span> <span class=\"bp\">self</span><span class=\"p\">,</span> <span class=\"n\">environ</span><br>\n<span class=\"source-highlight\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class=\"n\">app_iter</span> <span class=\"o\">=</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">application</span><span class=\"p\">(</span><span class=\"n\">environ</span><span class=\"p\">,</span> <span class=\"n\">detect_start_response</span><span class=\"p\">)</span></span><br>\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class=\"c\"># Don&#39;t create a list from a paste.fileapp object </span></div><div class=\"source highlight\" source-type=\"short\"><a onclick=\"return switch_source(this, 'short')\" class=\"switch_source\" href=\"#\">&gt;&gt;&nbsp; </a><span class=\"n\">app_iter</span> <span class=\"o\">=</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">application</span><span class=\"p\">(</span><span class=\"n\">environ</span><span class=\"p\">,</span> <span class=\"n\">detect_start_response</span><span class=\"p\">)</span></div>\n</div>\n<div class=\"frame\">\nModule <span class=\"module\" title=\"/usr/lib/ckan/local/lib/python2.7/site-packages/webob/dec.py\">webob.dec</span>:<b>147</b> in <code>__call__</code>  <a href=\"#\" class=\"show_locals\" tbid=\"140449077476240\" onClick=\"return showFrame(this)\">&nbsp; &nbsp; <img src=\"http://boot2docker:5462/_debug/media/plus.jpg\" border=0 width=9 height=9> &nbsp; &nbsp;</a> <a href=\"#\" class=\"\" location=\"webob.dec:147\" onClick=\"return showSource(this)\">view</a><br>\n<div style=\"display: none\" class=\"source highlight\" source-type=\"long\"><a class=\"switch_source\" onclick=\"return switch_source(this, 'long')\" href=\"#\">&lt;&lt;&nbsp; </a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class=\"k\">if</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">middleware_wraps</span><span class=\"p\">:</span><br>\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class=\"n\">args</span> <span class=\"o\">=</span> <span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">middleware_wraps</span><span class=\"p\">,)</span> <span class=\"o\">+</span> <span class=\"n\">args</span><br>\n<span class=\"source-highlight\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class=\"n\">resp</span> <span class=\"o\">=</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">call_func</span><span class=\"p\">(</span><span class=\"n\">req</span><span class=\"p\">,</span> <span class=\"o\">*</span><span class=\"n\">args</span><span class=\"p\">,</span> <span class=\"o\">**</span><span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">kwargs</span><span class=\"p\">)</span></span><br>\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class=\"k\">except</span> <span class=\"n\">webob</span><span class=\"o\">.</span><span class=\"n\">exc</span><span class=\"o\">.</span><span class=\"n\">HTTPException</span><span class=\"p\">,</span> <span class=\"n\">resp</span><span class=\"p\">:</span><br>\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class=\"k\">pass</span></div><div class=\"source highlight\" source-type=\"short\"><a onclick=\"return switch_source(this, 'short')\" class=\"switch_source\" href=\"#\">&gt;&gt;&nbsp; </a><span class=\"n\">resp</span> <span class=\"o\">=</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">call_func</span><span class=\"p\">(</span><span class=\"n\">req</span><span class=\"p\">,</span> <span class=\"o\">*</span><span class=\"n\">args</span><span class=\"p\">,</span> <span class=\"o\">**</span><span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">kwargs</span><span class=\"p\">)</span></div>\n</div>\n<div class=\"frame\">\nModule <span class=\"module\" title=\"/usr/lib/ckan/local/lib/python2.7/site-packages/webob/dec.py\">webob.dec</span>:<b>208</b> in <code>call_func</code>  <a href=\"#\" class=\"show_locals\" tbid=\"140449077474728\" onClick=\"return showFrame(this)\">&nbsp; &nbsp; <img src=\"http://boot2docker:5462/_debug/media/plus.jpg\" border=0 width=9 height=9> &nbsp; &nbsp;</a> <a href=\"#\" class=\"\" location=\"webob.dec:208\" onClick=\"return showSource(this)\">view</a><br>\n<div style=\"display: none\" class=\"source highlight\" source-type=\"long\"><a class=\"switch_source\" onclick=\"return switch_source(this, 'long')\" href=\"#\">&lt;&lt;&nbsp; </a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class=\"sd\">&quot;&quot;&quot;Call the wrapped function; override this in a subclass to</span><br>\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class=\"sd\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; change how the function is called.&quot;&quot;&quot;</span><br>\n<span class=\"source-highlight\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class=\"k\">return</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">func</span><span class=\"p\">(</span><span class=\"n\">req</span><span class=\"p\">,</span> <span class=\"o\">*</span><span class=\"n\">args</span><span class=\"p\">,</span> <span class=\"o\">**</span><span class=\"n\">kwargs</span><span class=\"p\">)</span></span><br>\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class=\"k\">def</span> <span class=\"nf\">clone</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">,</span> <span class=\"n\">func</span><span class=\"o\">=</span><span class=\"bp\">None</span><span class=\"p\">,</span> <span class=\"o\">**</span><span class=\"n\">kw</span><span class=\"p\">):</span></div><div class=\"source highlight\" source-type=\"short\"><a onclick=\"return switch_source(this, 'short')\" class=\"switch_source\" href=\"#\">&gt;&gt;&nbsp; </a><span class=\"k\">return</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">func</span><span class=\"p\">(</span><span class=\"n\">req</span><span class=\"p\">,</span> <span class=\"o\">*</span><span class=\"n\">args</span><span class=\"p\">,</span> <span class=\"o\">**</span><span class=\"n\">kwargs</span><span class=\"p\">)</span></div>\n</div>\n<div class=\"frame\">\nModule <span class=\"module\" title=\"/usr/lib/ckan/local/lib/python2.7/site-packages/fanstatic/publisher.py\">fanstatic.publisher</span>:<b>234</b> in <code>__call__</code>  <a href=\"#\" class=\"show_locals\" tbid=\"140449077477248\" onClick=\"return showFrame(this)\">&nbsp; &nbsp; <img src=\"http://boot2docker:5462/_debug/media/plus.jpg\" border=0 width=9 height=9> &nbsp; &nbsp;</a> <a href=\"#\" class=\"\" location=\"fanstatic.publisher:234\" onClick=\"return showSource(this)\">view</a><br>\n<div style=\"display: none\" class=\"source highlight\" source-type=\"long\"><a class=\"switch_source\" onclick=\"return switch_source(this, 'long')\" href=\"#\">&lt;&lt;&nbsp; </a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class=\"c\"># the trigger segment is not in the URL, so we delegate</span><br>\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class=\"c\"># to the original application</span><br>\n<span class=\"source-highlight\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class=\"k\">return</span> <span class=\"n\">request</span><span class=\"o\">.</span><span class=\"n\">get_response</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">app</span><span class=\"p\">)</span></span><br>\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class=\"c\"># the trigger is in there, so let whatever is behind the</span><br>\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class=\"c\"># trigger be handled by the publisher</span></div><div class=\"source highlight\" source-type=\"short\"><a onclick=\"return switch_source(this, 'short')\" class=\"switch_source\" href=\"#\">&gt;&gt;&nbsp; </a><span class=\"k\">return</span> <span class=\"n\">request</span><span class=\"o\">.</span><span class=\"n\">get_response</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">app</span><span class=\"p\">)</span></div>\n</div>\n<div class=\"frame\">\nModule <span class=\"module\" title=\"/usr/lib/ckan/local/lib/python2.7/site-packages/webob/request.py\">webob.request</span>:<b>1053</b> in <code>get_response</code>  <a href=\"#\" class=\"show_locals\" tbid=\"140449077476168\" onClick=\"return showFrame(this)\">&nbsp; &nbsp; <img src=\"http://boot2docker:5462/_debug/media/plus.jpg\" border=0 width=9 height=9> &nbsp; &nbsp;</a> <a href=\"#\" class=\"\" location=\"webob.request:1053\" onClick=\"return showSource(this)\">view</a><br>\n<div style=\"display: none\" class=\"source highlight\" source-type=\"long\"><a class=\"switch_source\" onclick=\"return switch_source(this, 'long')\" href=\"#\">&lt;&lt;&nbsp; </a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class=\"k\">else</span><span class=\"p\">:</span><br>\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class=\"n\">status</span><span class=\"p\">,</span> <span class=\"n\">headers</span><span class=\"p\">,</span> <span class=\"n\">app_iter</span> <span class=\"o\">=</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">call_application</span><span class=\"p\">(</span><br>\n<span class=\"source-highlight\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class=\"n\">application</span><span class=\"p\">,</span> <span class=\"n\">catch_exc_info</span><span class=\"o\">=</span><span class=\"bp\">False</span><span class=\"p\">)</span></span><br>\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class=\"k\">return</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">ResponseClass</span><span class=\"p\">(</span><br>\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class=\"n\">status</span><span class=\"o\">=</span><span class=\"n\">status</span><span class=\"p\">,</span> <span class=\"n\">headerlist</span><span class=\"o\">=</span><span class=\"nb\">list</span><span class=\"p\">(</span><span class=\"n\">headers</span><span class=\"p\">),</span> <span class=\"n\">app_iter</span><span class=\"o\">=</span><span class=\"n\">app_iter</span><span class=\"p\">,</span></div><div class=\"source highlight\" source-type=\"short\"><a onclick=\"return switch_source(this, 'short')\" class=\"switch_source\" href=\"#\">&gt;&gt;&nbsp; </a><span class=\"n\">application</span><span class=\"p\">,</span> <span class=\"n\">catch_exc_info</span><span class=\"o\">=</span><span class=\"bp\">False</span><span class=\"p\">)</span></div>\n</div>\n<div class=\"frame\">\nModule <span class=\"module\" title=\"/usr/lib/ckan/local/lib/python2.7/site-packages/webob/request.py\">webob.request</span>:<b>1022</b> in <code>call_application</code>  <a href=\"#\" class=\"show_locals\" tbid=\"140449077474872\" onClick=\"return showFrame(this)\">&nbsp; &nbsp; <img src=\"http://boot2docker:5462/_debug/media/plus.jpg\" border=0 width=9 height=9> &nbsp; &nbsp;</a> <a href=\"#\" class=\"\" location=\"webob.request:1022\" onClick=\"return showSource(this)\">view</a><br>\n<div style=\"display: none\" class=\"source highlight\" source-type=\"long\"><a class=\"switch_source\" onclick=\"return switch_source(this, 'long')\" href=\"#\">&lt;&lt;&nbsp; </a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class=\"n\">captured</span><span class=\"p\">[:]</span> <span class=\"o\">=</span> <span class=\"p\">[</span><span class=\"n\">status</span><span class=\"p\">,</span> <span class=\"n\">headers</span><span class=\"p\">,</span> <span class=\"n\">exc_info</span><span class=\"p\">]</span><br>\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class=\"k\">return</span> <span class=\"n\">output</span><span class=\"o\">.</span><span class=\"n\">append</span><br>\n<span class=\"source-highlight\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class=\"n\">app_iter</span> <span class=\"o\">=</span> <span class=\"n\">application</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">environ</span><span class=\"p\">,</span> <span class=\"n\">start_response</span><span class=\"p\">)</span></span><br>\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class=\"k\">if</span> <span class=\"n\">output</span> <span class=\"ow\">or</span> <span class=\"ow\">not</span> <span class=\"n\">captured</span><span class=\"p\">:</span><br>\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class=\"k\">try</span><span class=\"p\">:</span></div><div class=\"source highlight\" source-type=\"short\"><a onclick=\"return switch_source(this, 'short')\" class=\"switch_source\" href=\"#\">&gt;&gt;&nbsp; </a><span class=\"n\">app_iter</span> <span class=\"o\">=</span> <span class=\"n\">application</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">environ</span><span class=\"p\">,</span> <span class=\"n\">start_response</span><span class=\"p\">)</span></div>\n</div>\n<div class=\"frame\">\nModule <span class=\"module\" title=\"/usr/lib/ckan/local/lib/python2.7/site-packages/webob/dec.py\">webob.dec</span>:<b>147</b> in <code>__call__</code>  <a href=\"#\" class=\"show_locals\" tbid=\"140449077476816\" onClick=\"return showFrame(this)\">&nbsp; &nbsp; <img src=\"http://boot2docker:5462/_debug/media/plus.jpg\" border=0 width=9 height=9> &nbsp; &nbsp;</a> <a href=\"#\" class=\"\" location=\"webob.dec:147\" onClick=\"return showSource(this)\">view</a><br>\n<div style=\"display: none\" class=\"source highlight\" source-type=\"long\"><a class=\"switch_source\" onclick=\"return switch_source(this, 'long')\" href=\"#\">&lt;&lt;&nbsp; </a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class=\"k\">if</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">middleware_wraps</span><span class=\"p\">:</span><br>\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class=\"n\">args</span> <span class=\"o\">=</span> <span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">middleware_wraps</span><span class=\"p\">,)</span> <span class=\"o\">+</span> <span class=\"n\">args</span><br>\n<span class=\"source-highlight\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class=\"n\">resp</span> <span class=\"o\">=</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">call_func</span><span class=\"p\">(</span><span class=\"n\">req</span><span class=\"p\">,</span> <span class=\"o\">*</span><span class=\"n\">args</span><span class=\"p\">,</span> <span class=\"o\">**</span><span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">kwargs</span><span class=\"p\">)</span></span><br>\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class=\"k\">except</span> <span class=\"n\">webob</span><span class=\"o\">.</span><span class=\"n\">exc</span><span class=\"o\">.</span><span class=\"n\">HTTPException</span><span class=\"p\">,</span> <span class=\"n\">resp</span><span class=\"p\">:</span><br>\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class=\"k\">pass</span></div><div class=\"source highlight\" source-type=\"short\"><a onclick=\"return switch_source(this, 'short')\" class=\"switch_source\" href=\"#\">&gt;&gt;&nbsp; </a><span class=\"n\">resp</span> <span class=\"o\">=</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">call_func</span><span class=\"p\">(</span><span class=\"n\">req</span><span class=\"p\">,</span> <span class=\"o\">*</span><span class=\"n\">args</span><span class=\"p\">,</span> <span class=\"o\">**</span><span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">kwargs</span><span class=\"p\">)</span></div>\n</div>\n<div class=\"frame\">\nModule <span class=\"module\" title=\"/usr/lib/ckan/local/lib/python2.7/site-packages/webob/dec.py\">webob.dec</span>:<b>208</b> in <code>call_func</code>  <a href=\"#\" class=\"show_locals\" tbid=\"140449077476312\" onClick=\"return showFrame(this)\">&nbsp; &nbsp; <img src=\"http://boot2docker:5462/_debug/media/plus.jpg\" border=0 width=9 height=9> &nbsp; &nbsp;</a> <a href=\"#\" class=\"\" location=\"webob.dec:208\" onClick=\"return showSource(this)\">view</a><br>\n<div style=\"display: none\" class=\"source highlight\" source-type=\"long\"><a class=\"switch_source\" onclick=\"return switch_source(this, 'long')\" href=\"#\">&lt;&lt;&nbsp; </a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class=\"sd\">&quot;&quot;&quot;Call the wrapped function; override this in a subclass to</span><br>\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class=\"sd\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; change how the function is called.&quot;&quot;&quot;</span><br>\n<span class=\"source-highlight\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class=\"k\">return</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">func</span><span class=\"p\">(</span><span class=\"n\">req</span><span class=\"p\">,</span> <span class=\"o\">*</span><span class=\"n\">args</span><span class=\"p\">,</span> <span class=\"o\">**</span><span class=\"n\">kwargs</span><span class=\"p\">)</span></span><br>\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class=\"k\">def</span> <span class=\"nf\">clone</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">,</span> <span class=\"n\">func</span><span class=\"o\">=</span><span class=\"bp\">None</span><span class=\"p\">,</span> <span class=\"o\">**</span><span class=\"n\">kw</span><span class=\"p\">):</span></div><div class=\"source highlight\" source-type=\"short\"><a onclick=\"return switch_source(this, 'short')\" class=\"switch_source\" href=\"#\">&gt;&gt;&nbsp; </a><span class=\"k\">return</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">func</span><span class=\"p\">(</span><span class=\"n\">req</span><span class=\"p\">,</span> <span class=\"o\">*</span><span class=\"n\">args</span><span class=\"p\">,</span> <span class=\"o\">**</span><span class=\"n\">kwargs</span><span class=\"p\">)</span></div>\n</div>\n<div class=\"frame\">\nModule <span class=\"module\" title=\"/usr/lib/ckan/local/lib/python2.7/site-packages/fanstatic/injector.py\">fanstatic.injector</span>:<b>54</b> in <code>__call__</code>  <a href=\"#\" class=\"show_locals\" tbid=\"140449077473432\" onClick=\"return showFrame(this)\">&nbsp; &nbsp; <img src=\"http://boot2docker:5462/_debug/media/plus.jpg\" border=0 width=9 height=9> &nbsp; &nbsp;</a> <a href=\"#\" class=\"\" location=\"fanstatic.injector:54\" onClick=\"return showSource(this)\">view</a><br>\n<div style=\"display: none\" class=\"source highlight\" source-type=\"long\"><a class=\"switch_source\" onclick=\"return switch_source(this, 'long')\" href=\"#\">&lt;&lt;&nbsp; </a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class=\"c\"># Get the response from the wrapped application:</span><br>\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class=\"n\">response</span> <span class=\"o\">=</span> <span class=\"n\">request</span><span class=\"o\">.</span><span class=\"n\">get_response</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">app</span><span class=\"p\">)</span><br>\n<span class=\"source-highlight\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><br>\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class=\"c\"># We only continue if the content-type is appropriate.</span></div><div class=\"source highlight\" source-type=\"short\"><a onclick=\"return switch_source(this, 'short')\" class=\"switch_source\" href=\"#\">&gt;&gt;&nbsp; </a><span class=\"n\">response</span> <span class=\"o\">=</span> <span class=\"n\">request</span><span class=\"o\">.</span><span class=\"n\">get_response</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">app</span><span class=\"p\">)</span></div>\n</div>\n<div class=\"frame\">\nModule <span class=\"module\" title=\"/usr/lib/ckan/local/lib/python2.7/site-packages/webob/request.py\">webob.request</span>:<b>1053</b> in <code>get_response</code>  <a href=\"#\" class=\"show_locals\" tbid=\"140449077476600\" onClick=\"return showFrame(this)\">&nbsp; &nbsp; <img src=\"http://boot2docker:5462/_debug/media/plus.jpg\" border=0 width=9 height=9> &nbsp; &nbsp;</a> <a href=\"#\" class=\"\" location=\"webob.request:1053\" onClick=\"return showSource(this)\">view</a><br>\n<div style=\"display: none\" class=\"source highlight\" source-type=\"long\"><a class=\"switch_source\" onclick=\"return switch_source(this, 'long')\" href=\"#\">&lt;&lt;&nbsp; </a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class=\"k\">else</span><span class=\"p\">:</span><br>\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class=\"n\">status</span><span class=\"p\">,</span> <span class=\"n\">headers</span><span class=\"p\">,</span> <span class=\"n\">app_iter</span> <span class=\"o\">=</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">call_application</span><span class=\"p\">(</span><br>\n<span class=\"source-highlight\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class=\"n\">application</span><span class=\"p\">,</span> <span class=\"n\">catch_exc_info</span><span class=\"o\">=</span><span class=\"bp\">False</span><span class=\"p\">)</span></span><br>\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class=\"k\">return</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">ResponseClass</span><span class=\"p\">(</span><br>\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class=\"n\">status</span><span class=\"o\">=</span><span class=\"n\">status</span><span class=\"p\">,</span> <span class=\"n\">headerlist</span><span class=\"o\">=</span><span class=\"nb\">list</span><span class=\"p\">(</span><span class=\"n\">headers</span><span class=\"p\">),</span> <span class=\"n\">app_iter</span><span class=\"o\">=</span><span class=\"n\">app_iter</span><span class=\"p\">,</span></div><div class=\"source highlight\" source-type=\"short\"><a onclick=\"return switch_source(this, 'short')\" class=\"switch_source\" href=\"#\">&gt;&gt;&nbsp; </a><span class=\"n\">application</span><span class=\"p\">,</span> <span class=\"n\">catch_exc_info</span><span class=\"o\">=</span><span class=\"bp\">False</span><span class=\"p\">)</span></div>\n</div>\n<div class=\"frame\">\nModule <span class=\"module\" title=\"/usr/lib/ckan/local/lib/python2.7/site-packages/webob/request.py\">webob.request</span>:<b>1022</b> in <code>call_application</code>  <a href=\"#\" class=\"show_locals\" tbid=\"140449077475664\" onClick=\"return showFrame(this)\">&nbsp; &nbsp; <img src=\"http://boot2docker:5462/_debug/media/plus.jpg\" border=0 width=9 height=9> &nbsp; &nbsp;</a> <a href=\"#\" class=\"\" location=\"webob.request:1022\" onClick=\"return showSource(this)\">view</a><br>\n<div style=\"display: none\" class=\"source highlight\" source-type=\"long\"><a class=\"switch_source\" onclick=\"return switch_source(this, 'long')\" href=\"#\">&lt;&lt;&nbsp; </a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class=\"n\">captured</span><span class=\"p\">[:]</span> <span class=\"o\">=</span> <span class=\"p\">[</span><span class=\"n\">status</span><span class=\"p\">,</span> <span class=\"n\">headers</span><span class=\"p\">,</span> <span class=\"n\">exc_info</span><span class=\"p\">]</span><br>\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class=\"k\">return</span> <span class=\"n\">output</span><span class=\"o\">.</span><span class=\"n\">append</span><br>\n<span class=\"source-highlight\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class=\"n\">app_iter</span> <span class=\"o\">=</span> <span class=\"n\">application</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">environ</span><span class=\"p\">,</span> <span class=\"n\">start_response</span><span class=\"p\">)</span></span><br>\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class=\"k\">if</span> <span class=\"n\">output</span> <span class=\"ow\">or</span> <span class=\"ow\">not</span> <span class=\"n\">captured</span><span class=\"p\">:</span><br>\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class=\"k\">try</span><span class=\"p\">:</span></div><div class=\"source highlight\" source-type=\"short\"><a onclick=\"return switch_source(this, 'short')\" class=\"switch_source\" href=\"#\">&gt;&gt;&nbsp; </a><span class=\"n\">app_iter</span> <span class=\"o\">=</span> <span class=\"n\">application</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">environ</span><span class=\"p\">,</span> <span class=\"n\">start_response</span><span class=\"p\">)</span></div>\n</div>\n<div class=\"frame\">\nModule <span class=\"module\" title=\"/usr/lib/ckan/local/lib/python2.7/site-packages/beaker/middleware.py\">beaker.middleware</span>:<b>73</b> in <code>__call__</code>  <a href=\"#\" class=\"show_locals\" tbid=\"140449077477320\" onClick=\"return showFrame(this)\">&nbsp; &nbsp; <img src=\"http://boot2docker:5462/_debug/media/plus.jpg\" border=0 width=9 height=9> &nbsp; &nbsp;</a> <a href=\"#\" class=\"\" location=\"beaker.middleware:73\" onClick=\"return showSource(this)\">view</a><br>\n<div style=\"display: none\" class=\"source highlight\" source-type=\"long\"><a class=\"switch_source\" onclick=\"return switch_source(this, 'long')\" href=\"#\">&lt;&lt;&nbsp; </a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">cache_manager</span><span class=\"p\">)</span><br>\n<span class=\"source-highlight\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class=\"n\">environ</span><span class=\"p\">[</span><span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">environ_key</span><span class=\"p\">]</span> <span class=\"o\">=</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">cache_manager</span></span><br>\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class=\"k\">return</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">app</span><span class=\"p\">(</span><span class=\"n\">environ</span><span class=\"p\">,</span> <span class=\"n\">start_response</span><span class=\"p\">)</span></div><div class=\"source highlight\" source-type=\"short\"><a onclick=\"return switch_source(this, 'short')\" class=\"switch_source\" href=\"#\">&gt;&gt;&nbsp; </a><span class=\"k\">return</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">app</span><span class=\"p\">(</span><span class=\"n\">environ</span><span class=\"p\">,</span> <span class=\"n\">start_response</span><span class=\"p\">)</span></div>\n</div>\n<div class=\"frame\">\nModule <span class=\"module\" title=\"/usr/lib/ckan/local/lib/python2.7/site-packages/beaker/middleware.py\">beaker.middleware</span>:<b>155</b> in <code>__call__</code>  <a href=\"#\" class=\"show_locals\" tbid=\"140449077475952\" onClick=\"return showFrame(this)\">&nbsp; &nbsp; <img src=\"http://boot2docker:5462/_debug/media/plus.jpg\" border=0 width=9 height=9> &nbsp; &nbsp;</a> <a href=\"#\" class=\"\" location=\"beaker.middleware:155\" onClick=\"return showSource(this)\">view</a><br>\n<div style=\"display: none\" class=\"source highlight\" source-type=\"long\"><a class=\"switch_source\" onclick=\"return switch_source(this, 'long')\" href=\"#\">&lt;&lt;&nbsp; </a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class=\"n\">headers</span><span class=\"o\">.</span><span class=\"n\">append</span><span class=\"p\">((</span><span class=\"s\">&#39;Set-cookie&#39;</span><span class=\"p\">,</span> <span class=\"n\">cookie</span><span class=\"p\">))</span><br>\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class=\"k\">return</span> <span class=\"n\">start_response</span><span class=\"p\">(</span><span class=\"n\">status</span><span class=\"p\">,</span> <span class=\"n\">headers</span><span class=\"p\">,</span> <span class=\"n\">exc_info</span><span class=\"p\">)</span><br>\n<span class=\"source-highlight\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class=\"k\">return</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">wrap_app</span><span class=\"p\">(</span><span class=\"n\">environ</span><span class=\"p\">,</span> <span class=\"n\">session_start_response</span><span class=\"p\">)</span></span><br>\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class=\"k\">def</span> <span class=\"nf\">_get_session</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">):</span></div><div class=\"source highlight\" source-type=\"short\"><a onclick=\"return switch_source(this, 'short')\" class=\"switch_source\" href=\"#\">&gt;&gt;&nbsp; </a><span class=\"k\">return</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">wrap_app</span><span class=\"p\">(</span><span class=\"n\">environ</span><span class=\"p\">,</span> <span class=\"n\">session_start_response</span><span class=\"p\">)</span></div>\n</div>\n<div class=\"frame\">\nModule <span class=\"module\" title=\"/usr/lib/ckan/local/lib/python2.7/site-packages/routes/middleware.py\">routes.middleware</span>:<b>131</b> in <code>__call__</code>  <a href=\"#\" class=\"show_locals\" tbid=\"140449080643456\" onClick=\"return showFrame(this)\">&nbsp; &nbsp; <img src=\"http://boot2docker:5462/_debug/media/plus.jpg\" border=0 width=9 height=9> &nbsp; &nbsp;</a> <a href=\"#\" class=\"\" location=\"routes.middleware:131\" onClick=\"return showSource(this)\">view</a><br>\n<div style=\"display: none\" class=\"source highlight\" source-type=\"long\"><a class=\"switch_source\" onclick=\"return switch_source(this, 'long')\" href=\"#\">&lt;&lt;&nbsp; </a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class=\"s\">r&#39;\\1&#39;</span><span class=\"p\">,</span> <span class=\"n\">oldpath</span><span class=\"p\">)</span><br>\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>\n<span class=\"source-highlight\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class=\"n\">response</span> <span class=\"o\">=</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">app</span><span class=\"p\">(</span><span class=\"n\">environ</span><span class=\"p\">,</span> <span class=\"n\">start_response</span><span class=\"p\">)</span></span><br>\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class=\"c\"># Wrapped in try as in rare cases the attribute will be gone already</span></div><div class=\"source highlight\" source-type=\"short\"><a onclick=\"return switch_source(this, 'short')\" class=\"switch_source\" href=\"#\">&gt;&gt;&nbsp; </a><span class=\"n\">response</span> <span class=\"o\">=</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">app</span><span class=\"p\">(</span><span class=\"n\">environ</span><span class=\"p\">,</span> <span class=\"n\">start_response</span><span class=\"p\">)</span></div>\n</div>\n<div class=\"frame\">\nModule <span class=\"module\" title=\"/usr/lib/ckan/local/lib/python2.7/site-packages/pylons/wsgiapp.py\">pylons.wsgiapp</span>:<b>125</b> in <code>__call__</code>  <a href=\"#\" class=\"show_locals\" tbid=\"140449080135192\" onClick=\"return showFrame(this)\">&nbsp; &nbsp; <img src=\"http://boot2docker:5462/_debug/media/plus.jpg\" border=0 width=9 height=9> &nbsp; &nbsp;</a> <a href=\"#\" class=\"\" location=\"pylons.wsgiapp:125\" onClick=\"return showSource(this)\">view</a><br>\n<div style=\"display: none\" class=\"source highlight\" source-type=\"long\"><a class=\"switch_source\" onclick=\"return switch_source(this, 'long')\" href=\"#\">&lt;&lt;&nbsp; </a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class=\"n\">controller</span> <span class=\"o\">=</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">resolve</span><span class=\"p\">(</span><span class=\"n\">environ</span><span class=\"p\">,</span> <span class=\"n\">start_response</span><span class=\"p\">)</span><br>\n<span class=\"source-highlight\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class=\"n\">response</span> <span class=\"o\">=</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">dispatch</span><span class=\"p\">(</span><span class=\"n\">controller</span><span class=\"p\">,</span> <span class=\"n\">environ</span><span class=\"p\">,</span> <span class=\"n\">start_response</span><span class=\"p\">)</span></span><br>\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class=\"k\">if</span> <span class=\"s\">&#39;paste.testing_variables&#39;</span> <span class=\"ow\">in</span> <span class=\"n\">environ</span> <span class=\"ow\">and</span> <span class=\"nb\">hasattr</span><span class=\"p\">(</span><span class=\"n\">response</span><span class=\"p\">,</span></div><div class=\"source highlight\" source-type=\"short\"><a onclick=\"return switch_source(this, 'short')\" class=\"switch_source\" href=\"#\">&gt;&gt;&nbsp; </a><span class=\"n\">response</span> <span class=\"o\">=</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">dispatch</span><span class=\"p\">(</span><span class=\"n\">controller</span><span class=\"p\">,</span> <span class=\"n\">environ</span><span class=\"p\">,</span> <span class=\"n\">start_response</span><span class=\"p\">)</span></div>\n</div>\n<div class=\"frame\">\nModule <span class=\"module\" title=\"/usr/lib/ckan/local/lib/python2.7/site-packages/pylons/wsgiapp.py\">pylons.wsgiapp</span>:<b>324</b> in <code>dispatch</code>  <a href=\"#\" class=\"show_locals\" tbid=\"140449080134904\" onClick=\"return showFrame(this)\">&nbsp; &nbsp; <img src=\"http://boot2docker:5462/_debug/media/plus.jpg\" border=0 width=9 height=9> &nbsp; &nbsp;</a> <a href=\"#\" class=\"\" location=\"pylons.wsgiapp:324\" onClick=\"return showSource(this)\">view</a><br>\n<div style=\"display: none\" class=\"source highlight\" source-type=\"long\"><a class=\"switch_source\" onclick=\"return switch_source(this, 'long')\" href=\"#\">&lt;&lt;&nbsp; </a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class=\"k\">if</span> <span class=\"n\">log_debug</span><span class=\"p\">:</span><br>\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class=\"n\">log</span><span class=\"o\">.</span><span class=\"n\">debug</span><span class=\"p\">(</span><span class=\"s\">&quot;Calling controller class with WSGI interface&quot;</span><span class=\"p\">)</span><br>\n<span class=\"source-highlight\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class=\"k\">return</span> <span class=\"n\">controller</span><span class=\"p\">(</span><span class=\"n\">environ</span><span class=\"p\">,</span> <span class=\"n\">start_response</span><span class=\"p\">)</span></span><br>\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class=\"k\">def</span> <span class=\"nf\">load_test_env</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">,</span> <span class=\"n\">environ</span><span class=\"p\">):</span></div><div class=\"source highlight\" source-type=\"short\"><a onclick=\"return switch_source(this, 'short')\" class=\"switch_source\" href=\"#\">&gt;&gt;&nbsp; </a><span class=\"k\">return</span> <span class=\"n\">controller</span><span class=\"p\">(</span><span class=\"n\">environ</span><span class=\"p\">,</span> <span class=\"n\">start_response</span><span class=\"p\">)</span></div>\n</div>\n<div class=\"frame\">\nModule <span class=\"module\" title=\"/project/ckan/ckan/controllers/api.py\">ckan.controllers.api</span>:<b>70</b> in <code>__call__</code>  <a href=\"#\" class=\"show_locals\" tbid=\"140449463017840\" onClick=\"return showFrame(this)\">&nbsp; &nbsp; <img src=\"http://boot2docker:5462/_debug/media/plus.jpg\" border=0 width=9 height=9> &nbsp; &nbsp;</a> <a href=\"#\" class=\"\" location=\"ckan.controllers.api:70\" onClick=\"return showSource(this)\">view</a><br>\n<div style=\"display: none\" class=\"source highlight\" source-type=\"long\"><a class=\"switch_source\" onclick=\"return switch_source(this, 'long')\" href=\"#\">&lt;&lt;&nbsp; </a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class=\"c\"># avoid status_code_redirect intercepting error responses</span><br>\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class=\"n\">environ</span><span class=\"p\">[</span><span class=\"s\">&#39;pylons.status_code_redirect&#39;</span><span class=\"p\">]</span> <span class=\"o\">=</span> <span class=\"bp\">True</span><br>\n<span class=\"source-highlight\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class=\"k\">return</span> <span class=\"n\">base</span><span class=\"o\">.</span><span class=\"n\">BaseController</span><span class=\"o\">.</span><span class=\"n\">__call__</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">,</span> <span class=\"n\">environ</span><span class=\"p\">,</span> <span class=\"n\">start_response</span><span class=\"p\">)</span></span><br>\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class=\"k\">def</span> <span class=\"nf\">_finish</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">,</span> <span class=\"n\">status_int</span><span class=\"p\">,</span> <span class=\"n\">response_data</span><span class=\"o\">=</span><span class=\"bp\">None</span><span class=\"p\">,</span></div><div class=\"source highlight\" source-type=\"short\"><a onclick=\"return switch_source(this, 'short')\" class=\"switch_source\" href=\"#\">&gt;&gt;&nbsp; </a><span class=\"k\">return</span> <span class=\"n\">base</span><span class=\"o\">.</span><span class=\"n\">BaseController</span><span class=\"o\">.</span><span class=\"n\">__call__</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">,</span> <span class=\"n\">environ</span><span class=\"p\">,</span> <span class=\"n\">start_response</span><span class=\"p\">)</span></div>\n</div>\n<div class=\"frame\">\nModule <span class=\"module\" title=\"/project/ckan/ckan/lib/base.py\">ckan.lib.base</span>:<b>338</b> in <code>__call__</code>  <a href=\"#\" class=\"show_locals\" tbid=\"140449077474584\" onClick=\"return showFrame(this)\">&nbsp; &nbsp; <img src=\"http://boot2docker:5462/_debug/media/plus.jpg\" border=0 width=9 height=9> &nbsp; &nbsp;</a> <a href=\"#\" class=\"\" location=\"ckan.lib.base:338\" onClick=\"return showSource(this)\">view</a><br>\n<div style=\"display: none\" class=\"source highlight\" source-type=\"long\"><a class=\"switch_source\" onclick=\"return switch_source(this, 'long')\" href=\"#\">&lt;&lt;&nbsp; </a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class=\"k\">try</span><span class=\"p\">:</span><br>\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class=\"n\">res</span> <span class=\"o\">=</span> <span class=\"n\">WSGIController</span><span class=\"o\">.</span><span class=\"n\">__call__</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">,</span> <span class=\"n\">environ</span><span class=\"p\">,</span> <span class=\"n\">start_response</span><span class=\"p\">)</span><br>\n<span class=\"source-highlight\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class=\"k\">finally</span><span class=\"p\">:</span></span><br>\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class=\"n\">model</span><span class=\"o\">.</span><span class=\"n\">Session</span><span class=\"o\">.</span><span class=\"n\">remove</span><span class=\"p\">()</span></div><div class=\"source highlight\" source-type=\"short\"><a onclick=\"return switch_source(this, 'short')\" class=\"switch_source\" href=\"#\">&gt;&gt;&nbsp; </a><span class=\"n\">res</span> <span class=\"o\">=</span> <span class=\"n\">WSGIController</span><span class=\"o\">.</span><span class=\"n\">__call__</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">,</span> <span class=\"n\">environ</span><span class=\"p\">,</span> <span class=\"n\">start_response</span><span class=\"p\">)</span></div>\n</div>\n<div class=\"frame\">\nModule <span class=\"module\" title=\"/usr/lib/ckan/local/lib/python2.7/site-packages/pylons/controllers/core.py\">pylons.controllers.core</span>:<b>221</b> in <code>__call__</code>  <a href=\"#\" class=\"show_locals\" tbid=\"140449073848832\" onClick=\"return showFrame(this)\">&nbsp; &nbsp; <img src=\"http://boot2docker:5462/_debug/media/plus.jpg\" border=0 width=9 height=9> &nbsp; &nbsp;</a> <a href=\"#\" class=\"\" location=\"pylons.controllers.core:221\" onClick=\"return showSource(this)\">view</a><br>\n<div style=\"display: none\" class=\"source highlight\" source-type=\"long\"><a class=\"switch_source\" onclick=\"return switch_source(this, 'long')\" href=\"#\">&lt;&lt;&nbsp; </a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class=\"k\">return</span> <span class=\"n\">response</span><span class=\"p\">(</span><span class=\"n\">environ</span><span class=\"p\">,</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">start_response</span><span class=\"p\">)</span><br>\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>\n<span class=\"source-highlight\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class=\"n\">response</span> <span class=\"o\">=</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">_dispatch_call</span><span class=\"p\">()</span></span><br>\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class=\"k\">if</span> <span class=\"ow\">not</span> <span class=\"n\">start_response_called</span><span class=\"p\">:</span><br>\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">start_response</span> <span class=\"o\">=</span> <span class=\"n\">start_response</span></div><div class=\"source highlight\" source-type=\"short\"><a onclick=\"return switch_source(this, 'short')\" class=\"switch_source\" href=\"#\">&gt;&gt;&nbsp; </a><span class=\"n\">response</span> <span class=\"o\">=</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">_dispatch_call</span><span class=\"p\">()</span></div>\n</div>\n<div class=\"frame\">\nModule <span class=\"module\" title=\"/usr/lib/ckan/local/lib/python2.7/site-packages/pylons/controllers/core.py\">pylons.controllers.core</span>:<b>172</b> in <code>_dispatch_call</code>  <a href=\"#\" class=\"show_locals\" tbid=\"140449073851136\" onClick=\"return showFrame(this)\">&nbsp; &nbsp; <img src=\"http://boot2docker:5462/_debug/media/plus.jpg\" border=0 width=9 height=9> &nbsp; &nbsp;</a> <a href=\"#\" class=\"\" location=\"pylons.controllers.core:172\" onClick=\"return showSource(this)\">view</a><br>\n<div style=\"display: none\" class=\"source highlight\" source-type=\"long\"><a class=\"switch_source\" onclick=\"return switch_source(this, 'long')\" href=\"#\">&lt;&lt;&nbsp; </a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class=\"n\">req</span><span class=\"o\">.</span><span class=\"n\">environ</span><span class=\"p\">[</span><span class=\"s\">&#39;pylons.action_method&#39;</span><span class=\"p\">]</span> <span class=\"o\">=</span> <span class=\"n\">func</span><br>\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>\n<span class=\"source-highlight\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class=\"n\">response</span> <span class=\"o\">=</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">_inspect_call</span><span class=\"p\">(</span><span class=\"n\">func</span><span class=\"p\">)</span></span><br>\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class=\"k\">else</span><span class=\"p\">:</span><br>\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class=\"k\">if</span> <span class=\"n\">log_debug</span><span class=\"p\">:</span></div><div class=\"source highlight\" source-type=\"short\"><a onclick=\"return switch_source(this, 'short')\" class=\"switch_source\" href=\"#\">&gt;&gt;&nbsp; </a><span class=\"n\">response</span> <span class=\"o\">=</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">_inspect_call</span><span class=\"p\">(</span><span class=\"n\">func</span><span class=\"p\">)</span></div>\n</div>\n<div class=\"frame\">\nModule <span class=\"module\" title=\"/usr/lib/ckan/local/lib/python2.7/site-packages/pylons/controllers/core.py\">pylons.controllers.core</span>:<b>107</b> in <code>_inspect_call</code>  <a href=\"#\" class=\"show_locals\" tbid=\"140449073850560\" onClick=\"return showFrame(this)\">&nbsp; &nbsp; <img src=\"http://boot2docker:5462/_debug/media/plus.jpg\" border=0 width=9 height=9> &nbsp; &nbsp;</a> <a href=\"#\" class=\"\" location=\"pylons.controllers.core:107\" onClick=\"return showSource(this)\">view</a><br>\n<div style=\"display: none\" class=\"source highlight\" source-type=\"long\"><a class=\"switch_source\" onclick=\"return switch_source(this, 'long')\" href=\"#\">&lt;&lt;&nbsp; </a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class=\"n\">func</span><span class=\"o\">.</span><span class=\"n\">__name__</span><span class=\"p\">,</span> <span class=\"n\">args</span><span class=\"p\">)</span><br>\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class=\"k\">try</span><span class=\"p\">:</span><br>\n<span class=\"source-highlight\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class=\"n\">result</span> <span class=\"o\">=</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">_perform_call</span><span class=\"p\">(</span><span class=\"n\">func</span><span class=\"p\">,</span> <span class=\"n\">args</span><span class=\"p\">)</span></span><br>\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class=\"k\">except</span> <span class=\"n\">HTTPException</span><span class=\"p\">,</span> <span class=\"n\">httpe</span><span class=\"p\">:</span><br>\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class=\"k\">if</span> <span class=\"n\">log_debug</span><span class=\"p\">:</span></div><div class=\"source highlight\" source-type=\"short\"><a onclick=\"return switch_source(this, 'short')\" class=\"switch_source\" href=\"#\">&gt;&gt;&nbsp; </a><span class=\"n\">result</span> <span class=\"o\">=</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">_perform_call</span><span class=\"p\">(</span><span class=\"n\">func</span><span class=\"p\">,</span> <span class=\"n\">args</span><span class=\"p\">)</span></div>\n</div>\n<div class=\"frame\">\nModule <span class=\"module\" title=\"/usr/lib/ckan/local/lib/python2.7/site-packages/pylons/controllers/core.py\">pylons.controllers.core</span>:<b>60</b> in <code>_perform_call</code>  <a href=\"#\" class=\"show_locals\" tbid=\"140449073850992\" onClick=\"return showFrame(this)\">&nbsp; &nbsp; <img src=\"http://boot2docker:5462/_debug/media/plus.jpg\" border=0 width=9 height=9> &nbsp; &nbsp;</a> <a href=\"#\" class=\"\" location=\"pylons.controllers.core:60\" onClick=\"return showSource(this)\">view</a><br>\n<div style=\"display: none\" class=\"source highlight\" source-type=\"long\"><a class=\"switch_source\" onclick=\"return switch_source(this, 'long')\" href=\"#\">&lt;&lt;&nbsp; </a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class=\"sd\">&quot;&quot;&quot;Hide the traceback for everything above this method&quot;&quot;&quot;</span><br>\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class=\"n\">__traceback_hide__</span> <span class=\"o\">=</span> <span class=\"s\">&#39;before_and_this&#39;</span><br>\n<span class=\"source-highlight\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class=\"k\">return</span> <span class=\"n\">func</span><span class=\"p\">(</span><span class=\"o\">**</span><span class=\"n\">args</span><span class=\"p\">)</span></span><br>\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class=\"k\">def</span> <span class=\"nf\">_inspect_call</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">,</span> <span class=\"n\">func</span><span class=\"p\">):</span></div><div class=\"source highlight\" source-type=\"short\"><a onclick=\"return switch_source(this, 'short')\" class=\"switch_source\" href=\"#\">&gt;&gt;&nbsp; </a><span class=\"k\">return</span> <span class=\"n\">func</span><span class=\"p\">(</span><span class=\"o\">**</span><span class=\"n\">args</span><span class=\"p\">)</span></div>\n</div>\n<div class=\"frame\">\nModule <span class=\"module\" title=\"/project/ckan/ckan/controllers/api.py\">ckan.controllers.api</span>:<b>197</b> in <code>action</code>  <a href=\"#\" class=\"show_locals\" tbid=\"140449073848904\" onClick=\"return showFrame(this)\">&nbsp; &nbsp; <img src=\"http://boot2docker:5462/_debug/media/plus.jpg\" border=0 width=9 height=9> &nbsp; &nbsp;</a> <a href=\"#\" class=\"\" location=\"ckan.controllers.api:197\" onClick=\"return showSource(this)\">view</a><br>\n<div style=\"display: none\" class=\"source highlight\" source-type=\"long\"><a class=\"switch_source\" onclick=\"return switch_source(this, 'long')\" href=\"#\">&lt;&lt;&nbsp; </a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class=\"k\">del</span> <span class=\"n\">request_data</span><span class=\"p\">[</span><span class=\"s\">&#39;callback&#39;</span><span class=\"p\">]</span><br>\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class=\"k\">try</span><span class=\"p\">:</span><br>\n<span class=\"source-highlight\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class=\"n\">result</span> <span class=\"o\">=</span> <span class=\"n\">function</span><span class=\"p\">(</span><span class=\"n\">context</span><span class=\"p\">,</span> <span class=\"n\">request_data</span><span class=\"p\">)</span></span><br>\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class=\"n\">return_dict</span><span class=\"p\">[</span><span class=\"s\">&#39;success&#39;</span><span class=\"p\">]</span> <span class=\"o\">=</span> <span class=\"bp\">True</span><br>\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class=\"n\">return_dict</span><span class=\"p\">[</span><span class=\"s\">&#39;result&#39;</span><span class=\"p\">]</span> <span class=\"o\">=</span> <span class=\"n\">result</span></div><div class=\"source highlight\" source-type=\"short\"><a onclick=\"return switch_source(this, 'short')\" class=\"switch_source\" href=\"#\">&gt;&gt;&nbsp; </a><span class=\"n\">result</span> <span class=\"o\">=</span> <span class=\"n\">function</span><span class=\"p\">(</span><span class=\"n\">context</span><span class=\"p\">,</span> <span class=\"n\">request_data</span><span class=\"p\">)</span></div>\n</div>\n<div class=\"frame\">\nModule <span class=\"module\" title=\"/project/ckan/ckan/logic/__init__.py\">ckan.logic</span>:<b>424</b> in <code>wrapped</code>  <a href=\"#\" class=\"show_locals\" tbid=\"140449073848688\" onClick=\"return showFrame(this)\">&nbsp; &nbsp; <img src=\"http://boot2docker:5462/_debug/media/plus.jpg\" border=0 width=9 height=9> &nbsp; &nbsp;</a> <a href=\"#\" class=\"\" location=\"ckan.logic:424\" onClick=\"return showSource(this)\">view</a><br>\n<div style=\"display: none\" class=\"source highlight\" source-type=\"long\"><a class=\"switch_source\" onclick=\"return switch_source(this, 'long')\" href=\"#\">&lt;&lt;&nbsp; </a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class=\"c\"># check_access(action_name, context, data_dict=None)</span><br>\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class=\"n\">result</span> <span class=\"o\">=</span> <span class=\"n\">_action</span><span class=\"p\">(</span><span class=\"n\">context</span><span class=\"p\">,</span> <span class=\"n\">data_dict</span><span class=\"p\">,</span> <span class=\"o\">**</span><span class=\"n\">kw</span><span class=\"p\">)</span><br>\n<span class=\"source-highlight\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class=\"k\">try</span><span class=\"p\">:</span></span><br>\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class=\"n\">audit</span> <span class=\"o\">=</span> <span class=\"n\">context</span><span class=\"p\">[</span><span class=\"s\">&#39;__auth_audit&#39;</span><span class=\"p\">][</span><span class=\"o\">-</span><span class=\"mi\">1</span><span class=\"p\">]</span></div><div class=\"source highlight\" source-type=\"short\"><a onclick=\"return switch_source(this, 'short')\" class=\"switch_source\" href=\"#\">&gt;&gt;&nbsp; </a><span class=\"n\">result</span> <span class=\"o\">=</span> <span class=\"n\">_action</span><span class=\"p\">(</span><span class=\"n\">context</span><span class=\"p\">,</span> <span class=\"n\">data_dict</span><span class=\"p\">,</span> <span class=\"o\">**</span><span class=\"n\">kw</span><span class=\"p\">)</span></div>\n</div>\n<div class=\"frame\">\nModule <span class=\"module\" title=\"/project/ckan/ckanext/datastore/logic/action.py\">ckanext.datastore.logic.action</span>:<b>212</b> in <code>datastore_upsert</code>  <a href=\"#\" class=\"show_locals\" tbid=\"140449073852000\" onClick=\"return showFrame(this)\">&nbsp; &nbsp; <img src=\"http://boot2docker:5462/_debug/media/plus.jpg\" border=0 width=9 height=9> &nbsp; &nbsp;</a> <a href=\"#\" class=\"\" location=\"ckanext.datastore.logic.action:212\" onClick=\"return showSource(this)\">view</a><br>\n<div style=\"display: none\" class=\"source highlight\" source-type=\"long\"><a class=\"switch_source\" onclick=\"return switch_source(this, 'long')\" href=\"#\">&lt;&lt;&nbsp; </a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class=\"p\">))</span><br>\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>\n<span class=\"source-highlight\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class=\"n\">result</span> <span class=\"o\">=</span> <span class=\"n\">db</span><span class=\"o\">.</span><span class=\"n\">upsert</span><span class=\"p\">(</span><span class=\"n\">context</span><span class=\"p\">,</span> <span class=\"n\">data_dict</span><span class=\"p\">)</span></span><br>\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class=\"n\">result</span><span class=\"o\">.</span><span class=\"n\">pop</span><span class=\"p\">(</span><span class=\"s\">&#39;id&#39;</span><span class=\"p\">,</span> <span class=\"bp\">None</span><span class=\"p\">)</span><br>\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class=\"n\">result</span><span class=\"o\">.</span><span class=\"n\">pop</span><span class=\"p\">(</span><span class=\"s\">&#39;connection_url&#39;</span><span class=\"p\">)</span></div><div class=\"source highlight\" source-type=\"short\"><a onclick=\"return switch_source(this, 'short')\" class=\"switch_source\" href=\"#\">&gt;&gt;&nbsp; </a><span class=\"n\">result</span> <span class=\"o\">=</span> <span class=\"n\">db</span><span class=\"o\">.</span><span class=\"n\">upsert</span><span class=\"p\">(</span><span class=\"n\">context</span><span class=\"p\">,</span> <span class=\"n\">data_dict</span><span class=\"p\">)</span></div>\n</div>\n<div class=\"frame\">\nModule <span class=\"module\" title=\"/project/ckan/ckanext/datastore/db.py\">ckanext.datastore.db</span>:<b>1121</b> in <code>upsert</code>  <a href=\"#\" class=\"show_locals\" tbid=\"140449073849048\" onClick=\"return showFrame(this)\">&nbsp; &nbsp; <img src=\"http://boot2docker:5462/_debug/media/plus.jpg\" border=0 width=9 height=9> &nbsp; &nbsp;</a> <a href=\"#\" class=\"\" location=\"ckanext.datastore.db:1121\" onClick=\"return showSource(this)\">view</a><br>\n<div style=\"display: none\" class=\"source highlight\" source-type=\"long\"><a class=\"switch_source\" onclick=\"return switch_source(this, 'long')\" href=\"#\">&lt;&lt;&nbsp; </a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class=\"n\">context</span><span class=\"p\">[</span><span class=\"s\">&#39;connection&#39;</span><span class=\"p\">]</span><span class=\"o\">.</span><span class=\"n\">execute</span><span class=\"p\">(</span><br>\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class=\"s\">u&#39;SET LOCAL statement_timeout TO {0}&#39;</span><span class=\"o\">.</span><span class=\"n\">format</span><span class=\"p\">(</span><span class=\"n\">timeout</span><span class=\"p\">))</span><br>\n<span class=\"source-highlight\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class=\"n\">upsert_data</span><span class=\"p\">(</span><span class=\"n\">context</span><span class=\"p\">,</span> <span class=\"n\">data_dict</span><span class=\"p\">)</span></span><br>\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class=\"n\">trans</span><span class=\"o\">.</span><span class=\"n\">commit</span><span class=\"p\">()</span><br>\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class=\"k\">return</span> <span class=\"n\">_unrename_json_field</span><span class=\"p\">(</span><span class=\"n\">data_dict</span><span class=\"p\">)</span></div><div class=\"source highlight\" source-type=\"short\"><a onclick=\"return switch_source(this, 'short')\" class=\"switch_source\" href=\"#\">&gt;&gt;&nbsp; </a><span class=\"n\">upsert_data</span><span class=\"p\">(</span><span class=\"n\">context</span><span class=\"p\">,</span> <span class=\"n\">data_dict</span><span class=\"p\">)</span></div>\n</div>\n<div class=\"frame\">\nModule <span class=\"module\" title=\"/project/ckan/ckanext/datastore/db.py\">ckanext.datastore.db</span>:<b>656</b> in <code>upsert_data</code>  <a href=\"#\" class=\"show_locals\" tbid=\"140449073851856\" onClick=\"return showFrame(this)\">&nbsp; &nbsp; <img src=\"http://boot2docker:5462/_debug/media/plus.jpg\" border=0 width=9 height=9> &nbsp; &nbsp;</a> <a href=\"#\" class=\"\" location=\"ckanext.datastore.db:656\" onClick=\"return showSource(this)\">view</a><br>\n<div style=\"display: none\" class=\"source highlight\" source-type=\"long\"><a class=\"switch_source\" onclick=\"return switch_source(this, 'long')\" href=\"#\">&lt;&lt;&nbsp; </a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class=\"k\">except</span> <span class=\"n\">sqlalchemy</span><span class=\"o\">.</span><span class=\"n\">exc</span><span class=\"o\">.</span><span class=\"n\">DataError</span> <span class=\"k\">as</span> <span class=\"n\">err</span><span class=\"p\">:</span><br>\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class=\"k\">raise</span> <span class=\"n\">InvalidDataError</span><span class=\"p\">(</span><br>\n<span class=\"source-highlight\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class=\"n\">toolkit</span><span class=\"o\">.</span><span class=\"n\">_</span><span class=\"p\">(</span><span class=\"s\">&quot;The data was invalid (for example: a numeric value &quot;</span></span><br>\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class=\"s\">&quot;is out of range or was inserted into a text field).&quot;</span><br>\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class=\"p\">))</span></div><div class=\"source highlight\" source-type=\"short\"><a onclick=\"return switch_source(this, 'short')\" class=\"switch_source\" href=\"#\">&gt;&gt;&nbsp; </a><span class=\"n\">toolkit</span><span class=\"o\">.</span><span class=\"n\">_</span><span class=\"p\">(</span><span class=\"s\">&quot;The data was invalid (for example: a numeric value &quot;</span></div>\n</div>\n<b>InvalidDataError: The data was invalid (for example: a numeric value is out of range or was inserted into a text field).</b><br>\n        </div>\n        <div id=\"long_text_version\" class=\"hidden-data\">\n        <textarea style=\"width: 100%\" rows=56 cols=60>URL: http://boot2docker:5462/api/3/action/datastore_upsert\nFile '/usr/lib/ckan/local/lib/python2.7/site-packages/weberror/evalexception.py', line 431 in respond\n  app_iter = self.application(environ, detect_start_response)\nFile '/usr/lib/ckan/local/lib/python2.7/site-packages/webob/dec.py', line 147 in __call__\n  resp = self.call_func(req, *args, **self.kwargs)\nFile '/usr/lib/ckan/local/lib/python2.7/site-packages/webob/dec.py', line 208 in call_func\n  return self.func(req, *args, **kwargs)\nFile '/usr/lib/ckan/local/lib/python2.7/site-packages/fanstatic/publisher.py', line 234 in __call__\n  return request.get_response(self.app)\nFile '/usr/lib/ckan/local/lib/python2.7/site-packages/webob/request.py', line 1053 in get_response\n  application, catch_exc_info=False)\nFile '/usr/lib/ckan/local/lib/python2.7/site-packages/webob/request.py', line 1022 in call_application\n  app_iter = application(self.environ, start_response)\nFile '/usr/lib/ckan/local/lib/python2.7/site-packages/webob/dec.py', line 147 in __call__\n  resp = self.call_func(req, *args, **self.kwargs)\nFile '/usr/lib/ckan/local/lib/python2.7/site-packages/webob/dec.py', line 208 in call_func\n  return self.func(req, *args, **kwargs)\nFile '/usr/lib/ckan/local/lib/python2.7/site-packages/fanstatic/injector.py', line 54 in __call__\n  response = request.get_response(self.app)\nFile '/usr/lib/ckan/local/lib/python2.7/site-packages/webob/request.py', line 1053 in get_response\n  application, catch_exc_info=False)\nFile '/usr/lib/ckan/local/lib/python2.7/site-packages/webob/request.py', line 1022 in call_application\n  app_iter = application(self.environ, start_response)\nFile '/usr/lib/ckan/local/lib/python2.7/site-packages/beaker/middleware.py', line 73 in __call__\n  return self.app(environ, start_response)\nFile '/usr/lib/ckan/local/lib/python2.7/site-packages/beaker/middleware.py', line 155 in __call__\n  return self.wrap_app(environ, session_start_response)\nFile '/usr/lib/ckan/local/lib/python2.7/site-packages/routes/middleware.py', line 131 in __call__\n  response = self.app(environ, start_response)\nFile '/usr/lib/ckan/local/lib/python2.7/site-packages/pylons/wsgiapp.py', line 125 in __call__\n  response = self.dispatch(controller, environ, start_response)\nFile '/usr/lib/ckan/local/lib/python2.7/site-packages/pylons/wsgiapp.py', line 324 in dispatch\n  return controller(environ, start_response)\nFile '/project/ckan/ckan/controllers/api.py', line 70 in __call__\n  return base.BaseController.__call__(self, environ, start_response)\nFile '/project/ckan/ckan/lib/base.py', line 338 in __call__\n  res = WSGIController.__call__(self, environ, start_response)\nFile '/usr/lib/ckan/local/lib/python2.7/site-packages/pylons/controllers/core.py', line 221 in __call__\n  response = self._dispatch_call()\nFile '/usr/lib/ckan/local/lib/python2.7/site-packages/pylons/controllers/core.py', line 172 in _dispatch_call\n  response = self._inspect_call(func)\nFile '/usr/lib/ckan/local/lib/python2.7/site-packages/pylons/controllers/core.py', line 107 in _inspect_call\n  result = self._perform_call(func, args)\nFile '/usr/lib/ckan/local/lib/python2.7/site-packages/pylons/controllers/core.py', line 60 in _perform_call\n  return func(**args)\nFile '/project/ckan/ckan/controllers/api.py', line 197 in action\n  result = function(context, request_data)\nFile '/project/ckan/ckan/logic/__init__.py', line 424 in wrapped\n  result = _action(context, data_dict, **kw)\nFile '/project/ckan/ckanext/datastore/logic/action.py', line 212 in datastore_upsert\n  result = db.upsert(context, data_dict)\nFile '/project/ckan/ckanext/datastore/db.py', line 1121 in upsert\n  upsert_data(context, data_dict)\nFile '/project/ckan/ckanext/datastore/db.py', line 656 in upsert_data\n  toolkit._(\"The data was invalid (for example: a numeric value \"\nInvalidDataError: The data was invalid (for example: a numeric value is out of range or was inserted into a text field).</textarea>\n        </div>\n        \n    \n<div class=\"feature-highlight\">\n<b>Extra Features</b>\n<table border=\"0\">\n<tr><td><a href=\"#\" onclick=\"return false\" class=\"switch_source\" style=\"cursor: default\">&gt;&gt;</a></td><td>Display the lines of code near each part of the traceback</td></tr>\n<tr><td><img src=\"http://boot2docker:5462/_debug/media/plus.jpg\" /></td><td>Show a debug prompt to allow you to directly debug the code at the traceback</td></tr>\n</table>\n</div>\n\n            </div>\n        </div>\n        <br class=\"clear\" />\n        <div class=\"hr\"><hr class=\"clear\" /></div>\n    </div>\n    <!-- Footer -->\n    <script type=\"text/javascript\" src=\"http://boot2docker:5462/_debug/media/jquery-1.2.3.pack.js\"></script>\n    <script type=\"text/javascript\" src=\"http://boot2docker:5462/_debug/media/debug.js\"></script>\n    <div id=\"footer\"><script src=\"http://boot2docker:5462/_debug/media/pylons/javascripts/traceback.js\"></script>\n<script>\nvar TRACEBACK = {\n    uri: \"http://boot2docker:5462/_debug\",\n    host: \"pylonshq.com\",\n    traceback: \"/tracebacks\"\n}\n</script>\n<div id=\"service_widget\">\n<h2 class=\"assistance\">Online Assistance</h2>\n<div id=\"nv\">\n<ul id=\"supportnav\">\n    <li class=\"nav active\"><a class=\"overview\" href=\"#\">Overview</a></li>\n    <li class=\"nav\"><a class=\"search\" href=\"#\">Search Mail Lists</a></li>\n    <li class=\"nav\"><a class=\"posttraceback\" href=\"#\">Post Traceback</a></li>\n</ul>\n</div>\n<div class=\"clearfix\">&nbsp;</div>\n<div class=\"overviewtab\">\n<b>Looking for help?</b>\n\n<p>Here are a few tips for troubleshooting if the above traceback isn't\nhelping out.</p>\n\n<ol>\n<li>Search the mail list</li>\n<li>Post the traceback, and ask for help on IRC</li>\n<li>Post a message to the mail list, referring to the posted traceback</li>\n\n</div>\n<div class=\"posttracebacktab\">\n<p><b>Note:</b> Clicking this button will post your traceback to the PylonsHQ website.\nThe traceback includes the module names, Python version, and lines of code that you\ncan see above. All tracebacks are posted anonymously unless you're logged into the\nPylonsHQ website in this browser.</p>\n<input type=\"button\" href=\"#\" class=\"submit_traceback\" value=\"Send TraceBack to PylonsHQ\" style=\"text-align: center;\"/>\n</div>\n\n<div class=\"searchtab\">\n<p>The following mail lists will be searched:<br />\n<input type=\"checkbox\" name=\"lists\" value=\"pylons\" checked=\"checked\" /> Pylons<br />\n<input type=\"checkbox\" name=\"lists\" value=\"python\" /> Python<br />\n<input type=\"checkbox\" name=\"lists\" value=\"mako\" /> Mako<br />\n<input type=\"checkbox\" name=\"lists\" value=\"sqlalchemy\" /> SQLAlchemy</p>\n<p class=\"query\">for: <input type=\"text\" name=\"query\" class=\"query\" /></p>\n\n<p><input type=\"submit\" value=\"Search\" /></p>\n<div class=\"searchresults\">\n\n</div>\n</div>\n\n</div>\n<div id=\"pylons_logo\"><img src=\"http://boot2docker:5462/_debug/media/pylons/img/pylons-powered-02.png\" /></div>\n<div class=\"credits\">Pylons version (not installed)</div></div>\n</body>\n</html>\n